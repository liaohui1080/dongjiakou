<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Title</title>
    <link href="../../../bower_components/animate.css/animate.css" rel="stylesheet" type="text/css"/>

    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="../../pagePublic/metronic/assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet"
          type="text/css"/>
    <link href="../../pagePublic/metronic/assets/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet"
          type="text/css"/>


    <style>
        .line {
            fill: none;
            stroke-width: 4px;
            stroke-miterlimit: 10px;
        }

        .line-jixian {
            stroke: #999999;

        }

        .line-hongxian {
            stroke: #fc5056;
            display: none;
        }

        .line-lanxian {
            stroke: #2E97DE;
            display: none;
        }

        .line-huixian {
            fill: none;
            /*stroke: #B3B3B3;*/
            stroke-width: 2px;
            stroke-miterlimit: 10px;
            stroke-dasharray: 5, 2;
            display: none;
        }

        .huixian-node {
            display: none;
        }

        .jueduidingwei {
            position: absolute;

            display: none;
        }

        .hongxianAnimat {
            stroke-dasharray: 3000;
            animation: hongxianKey 5s linear;
        }

        @keyframes hongxianKey {
            from {
                stroke-dashoffset: 3000;
            }
            to {
                stroke-dashoffset: 0;
            }
        }

        .hongxianJinduAnimat {
            stroke-dasharray: 40;
            stroke: #ffffff;
            animation: hongxianJinduKey 20s linear infinite;
        }

        @keyframes hongxianJinduKey {
            from {
                stroke-dashoffset: 1214;
            }
            to {
                stroke-dashoffset: 0;
            }
        }

        .popover {
            border: none;
            z-index: 999;
            left:0;
        }

        .popover .list-group {
            margin: 0;
        }


    </style>

</head>
<body>

<div class="container-fluid">
    <!--整改提示框-->

    <div class="popover bottom popover-public" style="font-size: 12px; width: 200px">
        <div class="popover-content">
            <p>内容内容内容内容内容内容内容</p>
        </div>
    </div>
    <!--/整改提示框-->

    <div class="row">
        <div class="col-md-12">
            <!--<button class="yicizhenggai">一次整改</button>-->
            <button class="zhenggaiDefault">整改默认</button>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2" style="background-color: #f0ad4e; height: 1000px">
            <div class="rubberBand animated" style="width: 20px; height: 20px; background-color: #0057f0"></div>

        </div>
        <div class="col-md-10 procedure" style="position: relative">


            <svg id="procedureSvg">
                <path id="jixian" class="line-jixian line"/>
                <path id="hongxian" class="line-hongxian line"/>
                <path id="hongxian2" class="line-hongxian line hongxianJinduAnimat"/>
                <path id="lanxian" class="line-lanxian line"/>


                <!--一次复查-->
                <g id="huixian1-group">

                    <path id="huixian1" class="line-huixian" stroke="#B3B3B3"/>

                    <g id="huixian1-zuo-group" class="huixian-node">
                        <ellipse id="huixian1-zuo-dian" class="dian xuanze" fill="#999999"
                                 stroke="#FFFFFF"
                                 stroke-width="3" stroke-miterlimit="10" cx="1315.31" cy="146.135" rx="6" ry="5.7"/>
                        <path class="xian xuanze" fill="none" stroke="#B3B3B3" stroke-miterlimit="10"
                              stroke-dasharray="2,2"
                              d="M1332.906,189.753h-7.889   c-5.58,0-10.08-4.566-9.999-10.145l0.388-26.696"/>

                        <path class="juxing xuanze" fill="#E6E6E6"
                              d="M1372.718,198.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18   C1381.628,194.922,1377.638,198.911,1372.718,198.911z"/>
                        <text class="wenzi xuanze" transform="matrix(1 0 0 1 1350.3096 194.3765)"
                              fill="#333333" font-family="'SimHei'" font-size="12">整改
                        </text>
                        <circle class="yuan xuanze" fill="#999999" cx="1338.969" cy="189.977" r="9"/>
                        <text class=" xuanze" transform="matrix(1 0 0 1 1335.8433 193.7269)"
                              fill="#FFFFFF" font-family="'SimHei'" font-size="12">1
                        </text>

                    </g>

                    <g id="huixian1-you-group" class="huixian-node">
                        <ellipse class="dian xuanze" fill="#999999" stroke="#FFFFFF"
                                 stroke-width="3" stroke-miterlimit="10" cx="1622.31"
                                 cy="204.135" rx="6" ry="5.7"/>
                        <line class="xian xuanze" fill="none" stroke="#B3B3B3" stroke-miterlimit="10" stroke-dasharray="2,2"
                              x1="1629.659" y1="204.26"
                              x2="1682.659" y2="204.26"/>

                        <path class="juxing xuanze" fill="#E6E6E6"
                              d="M1722.718,213.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18     C1731.628,209.922,1727.638,213.911,1722.718,213.911z"/>

                        <text class="wenzi xuanze" transform="matrix(1 0 0 1 1700.3096 209.3765)" fill="#333333"
                              font-family="'SimHei'"
                              font-size="12">复查
                        </text>

                        <circle class="yuan xuanze" fill="#999999" cx="1688.969" cy="204.977" r="9"/>
                        <text class="xuanze" transform="matrix(1 0 0 1 1685.8433 208.7269)" fill="#FFFFFF" font-family="'SimHei'"
                              font-size="12">1
                        </text>

                    </g>

                </g>
                <!--/一次复查-->

                <!--二次复查-->
                <g id="huixian2-group">
                    <path id="huixian2" class="line-huixian" stroke="#B3B3B3"/>
                    <g id="huixian2-zuo-group" class="huixian-node">
                        <ellipse class="dian xuanze" xmlns="http://www.w3.org/2000/svg" fill="#999999" stroke="#FFFFFF"
                                 stroke-width="3" stroke-miterlimit="10" cx="1283.31" cy="146.135" rx="6" ry="5.7"/>
                        <path class="xian xuanze" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#B3B3B3"
                              stroke-miterlimit="10" stroke-dasharray="2,2"
                              d="M1300.906,225.753h-7.889    c-5.58,0-10.08-4.566-9.999-10.145l0.388-62.696"/>
                        <path class="xuanze" xmlns="http://www.w3.org/2000/svg" fill="#E6E6E6"
                              d="M1339.718,234.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18    C1348.628,230.922,1344.638,234.911,1339.718,234.911z"/>
                        <text class="wenzi xuanze" xmlns="http://www.w3.org/2000/svg"
                              transform="matrix(1 0 0 1 1317.3096 230.3765)" fill="#333333" font-family="'SimHei'"
                              font-size="12">整改
                        </text>
                        <circle class="yuan xuanze" xmlns="http://www.w3.org/2000/svg" fill="#999999" cx="1305.969"
                                cy="225.977" r="9"/>
                        <text class="xuanze" xmlns="http://www.w3.org/2000/svg" transform="matrix(1 0 0 1 1302.8433 229.7269)"
                              fill="#FFFFFF" font-family="'SimHei'" font-size="12">2
                        </text>
                    </g>
                    <g id="huixian2-you-group" class="huixian-node">
                        <ellipse class="dian xuanze" xmlns="http://www.w3.org/2000/svg" fill="#999999" stroke="#FFFFFF"
                                 stroke-width="3" stroke-miterlimit="10" cx="1643.31" cy="174.135" rx="6" ry="5.7"/>
                        <line class="xian xuanze" xmlns="http://www.w3.org/2000/svg" fill="none" stroke="#B3B3B3"
                              stroke-miterlimit="10" stroke-dasharray="2,2" x1="1649.659" y1="175.26" x2="1702.659"
                              y2="175.26"/>
                        <path class="xuanze" xmlns="http://www.w3.org/2000/svg" fill="#E6E6E6"
                              d="M1745.718,183.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18     C1754.628,179.922,1750.638,183.911,1745.718,183.911z"/>
                        <text class="wenzi xuanze" xmlns="http://www.w3.org/2000/svg"
                              transform="matrix(1 0 0 1 1723.3096 179.3765)" fill="#333333" font-family="'SimHei'"
                              font-size="12">复查
                        </text>
                        <circle class="yuan xuanze" xmlns="http://www.w3.org/2000/svg" fill="#999999" cx="1711.969"
                                cy="174.977" r="9"/>
                        <text class="xuanze" xmlns="http://www.w3.org/2000/svg" transform="matrix(1 0 0 1 1708.8433 178.7269)"
                              fill="#FFFFFF" font-family="'SimHei'" font-size="12">2
                        </text>
                    </g>
                </g>
                <!--/二次复查-->

                <!--三次复查-->
                <g id="huixian3-group">

                    <path id="huixian3" class="line-huixian" stroke="#B3B3B3"/>

                    <g id="huixian1-zuo-group" class="huixian-node">
                        <ellipse class="dian" xmlns="http://www.w3.org/2000/svg" fill="#999999" stroke="#FFFFFF"
                                 stroke-width="3" stroke-miterlimit="10" cx="1249.31" cy="146.135" rx="6" ry="5.7"/>
                        <path class="xian" fill="none" stroke="#B3B3B3" stroke-miterlimit="10"
                              stroke-dasharray="2,2"
                              d="M1267.906,262.753h-7.889    c-5.58,0-10.08-4.566-9.999-10.145l0.388-99.696"/>

                        <path class="juxing" fill="#E6E6E6"
                              d="M1306.718,271.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18    C1315.628,267.922,1311.638,271.911,1306.718,271.911z"/>
                        <text class="wenzi" transform="matrix(1 0 0 1 1284.3096 267.3766)"
                              fill="#333333" font-family="'SimHei'" font-size="12">整改
                        </text>
                        <circle class="yuan" fill="#999999" cx="1272.969" cy="262.977" r="9"/>
                        <text transform="matrix(1 0 0 1 1269.8433 266.7269)"
                              fill="#FFFFFF" font-family="'SimHei'" font-size="12">1
                        </text>

                    </g>

                    <g id="huixian1-you-group" class="huixian-node">
                        <ellipse class="dian" fill="#999999" stroke="#FFFFFF" stroke-width="3" stroke-miterlimit="10"
                                 cx="1664.31" cy="144.135" rx="6" ry="5.7"/>
                        <line class="xian" fill="none" stroke="#B3B3B3" stroke-miterlimit="10" stroke-dasharray="2,2"
                              x1="1670.659" y1="143.26" x2="1733.659" y2="143.26"/>

                        <path class="juxing" fill="#E6E6E6"
                              d="M1774.718,152.911h-34.09v-18h34.09c4.921,0,8.91,3.989,8.91,8.91v0.18     C1783.628,148.922,1779.638,152.911,1774.718,152.911z"/>

                        <text class="wenzi" transform="matrix(1 0 0 1 1752.3096 148.3765)" fill="#333333"
                              font-family="'SimHei'"
                              font-size="12">复查
                        </text>

                        <circle class="yuan" fill="#999999" cx="1740.969" cy="143.977" r="9"/>
                        <text transform="matrix(1 0 0 1 1737.8433 147.7269)" fill="#FFFFFF" font-family="'SimHei'"
                              font-size="12">3
                        </text>

                    </g>

                </g>
                <!--/三次复查-->


            </svg>


            <!--隐患-->
            <svg version="1.1" id="yinhuan" class="jueduidingwei">
                <g>
                    <g>
                        <circle class="jiedian" fill="#FFFFFF" stroke="#FDB247" stroke-width="5" stroke-miterlimit="10"
                                cx="95.628"
                                cy="73.99" r="7.5"/>
                        <g>
                            <line fill="none" stroke="#FDB247" stroke-width="2" stroke-miterlimit="10" x1="96.287"
                                  y1="81.054" x2="96.287" y2="109.054"/>
                            <g>
                                <circle fill="#FDB247" cx="95.254" cy="139.998" r="33.033"/>
                                <text transform="matrix(1 0 0 1 77.4231 138.3576)">
                                    <tspan x="0" y="0" fill="#FFFFFF" font-family="'SimHei'" font-size="17.5216">发现
                                    </tspan>
                                    <tspan x="0" y="18.69" fill="#FFFFFF" font-family="'SimHei'" font-size="17.5216">
                                        隐患
                                    </tspan>
                                </text>
                            </g>
                        </g>
                    </g>
                    <path fill="none" stroke="#FDB247" stroke-miterlimit="10"
                          d="M97.034,63.966V15.768c0-3.316-2.689-6.003-6.005-6L79.222,9.778"/>
                    <text transform="matrix(1 0 0 1 13.3206 14.6806)" fill="#FDB247" font-family="'SimHei'"
                          font-size="12">发现23个隐患
                    </text>
                </g>
            </svg>
            <!--/隐患-->


            <!--整改-->
            <svg version="1.1" id="zhenggai" class="jueduidingwei">
                <g>
                    <circle class="jiedian" fill="#FFFFFF" stroke="#E94B65" stroke-width="5" stroke-miterlimit="10"
                            cx="52.889"
                            cy="104.514" r="7.5"/>
                    <line fill="none" stroke="#E94B65" stroke-width="2" stroke-miterlimit="10" x1="52.295" y1="94.537"
                          x2="52.295" y2="74.537"/>
                    <g>
                        <circle fill="#E94B65" cx="53.263" cy="41.505" r="33.033"/>
                        <text transform="matrix(1 0 0 1 36.0536 36.7751)">
                            <tspan x="0" y="0" fill="#FFFFFF" font-family="'SimHei'" font-size="17.5216">下达</tspan>
                            <tspan x="0" y="18.69" fill="#FFFFFF" font-family="'SimHei'" font-size="17.5216">整改</tspan>
                        </text>
                    </g>
                </g>
            </svg>
            <!--/整改-->


            <!--计划-->
            <svg version="1.1" id="jihua" class="jueduidingwei">
                <g>
                    <g>
                        <circle class="jiedian" fill="#FFFFFF" stroke="#2E97DE" stroke-width="5" stroke-miterlimit="10"
                                cx="107.619"
                                cy="62.967" r="7.5"/>
                        <line fill="none" stroke="#2E97DE" stroke-width="2" stroke-miterlimit="10" x1="108.278"
                              y1="72.032" x2="108.278" y2="92.032"/>
                        <g>
                            <circle fill="#4A96C9" cx="107.245" cy="110.976" r="17.612"/>
                            <text transform="matrix(1 0 0 1 97.7382 110.1012)">
                                <tspan x="0" y="0" fill="#FFFFFF" font-family="'SimHei'" font-size="9.342">执行</tspan>
                                <tspan x="0" y="9.965" fill="#FFFFFF" font-family="'SimHei'" font-size="9.342">计划
                                </tspan>
                            </text>
                        </g>
                    </g>
                    <path fill="none" stroke="#2E97DE" stroke-miterlimit="10" d="M108.054,55.943V36.011c0-3.906-3.196-7.056-7.102-6.999
		l-10.333,0.432"/>
                    <text transform="matrix(1 0 0 1 17.163 33.4084)" fill="#2E97DE" font-family="'SimHei'"
                          font-size="12">2016巡检计划
                    </text>
                </g>
            </svg>
            <!--/计划-->


            <!--完成-->
            <svg version="1.1" id="wancheng" class="jueduidingwei">
                <g>
                    <circle fill="#FFFFFF" stroke="#00989C" stroke-width="5" stroke-miterlimit="10" cx="21.374"
                            cy="23.967" r="7.5"/>
                    <line fill="none" stroke="#00989C" stroke-width="2" stroke-miterlimit="10" x1="22.033" y1="33.032"
                          x2="22.033" y2="53.032"/>
                    <g>
                        <circle fill="#00A99D" cx="21" cy="71.443" r="17.5"/>
                        <g>
                            <text transform="matrix(1 0 0 1 13.2025 75.3712)" fill="#FFFFFF" font-family="'SimHei'"
                                  font-size="9.342">完成
                            </text>
                        </g>
                    </g>
                </g>
            </svg>
            <!--/完成-->

            <!--整改计划提示框-->
            <div class="popover bottom popover-jihua">
                <div class="arrow"></div>
                <div class="list-group">
                    <a href="#" class="list-group-item ">
                        Cras justo odio
                    </a>
                    <a href="#" class="list-group-item">Dapibus ac facilisis in</a>
                    <a href="#" class="list-group-item active">Morbi leo risus</a>
                    <a href="#" class="list-group-item">Porta ac consectetur ac</a>
                    <a href="#" class="list-group-item">Vestibulum at eros</a>
                </div>
            </div>
            <!--/整改计划提示框-->

            <!--发现隐患提示框-->
            <div class="popover bottom popover-yinhuan">
                <div class="arrow"></div>
                <div class="list-group">
                    <a href="#" class="list-group-item ">
                        隐患
                    </a>
                    <a href="#" class="list-group-item">Dapibus ac facilisis in</a>
                    <a href="#" class="list-group-item active">Morbi leo risus</a>
                    <a href="#" class="list-group-item">Porta ac consectetur ac</a>
                    <a href="#" class="list-group-item">Vestibulum at eros</a>
                </div>
            </div>
            <!--/发现隐患提示框-->



        </div>

    </div>

</div>


<script src="../../pagePublic/metronic/assets/plugins/jquery-1.10.2.min.js" type="text/javascript"></script>

<script src="../../pagePublic/metronic/assets/plugins/jquery-ui/jquery-ui-1.10.3.custom.min.js"
        type="text/javascript"></script>
<script src="../../pagePublic/metronic/assets/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

<script src="../../../bower_components/animejs/anime.min.js"></script>
<script src="../../../bower_components/Snap.svg/dist/snap.svg-min.js"></script>
<script src="../../pagePublic/d3/d3.js"></script>


<script>
    $(function () {

        liuchengtu()
        function liuchengtu(){

            var procedureWidth = $(".procedure").width(); //页面的宽度
            var svgWidth = 3000; //svg图形默认宽度
            var svgHeight = 300; //svg 默认高度
            var svgZhongjian = 567; //svg中间流程部分的宽度

            //确定svg图形的最小宽度是 1000.如果页面宽度低于1000 则按照1000
            if (procedureWidth < 1000) {
                procedureWidth = 1000;
            } else {
                procedureWidth = $(".procedure").width();
            }


            var pianyiWidth = (procedureWidth - svgZhongjian) / 2; //向左向右偏移的宽度


            var leftMargin = (svgWidth - procedureWidth) / 2;// 获取svg图形 向左的起始位置坐标

            //计算百分比
            function baifenbi(d, a) {
                return (a * d) / 100;
            }


            //选择svg
            var svg = Snap("#procedureSvg")
            svg.attr({
                height: svgHeight,
                viewBox: leftMargin + " 0 " + procedureWidth + " " + svgHeight
            });


            //计算各个节点偏移的距离

            //计划
            $("#jihua").css({left: baifenbi(0, pianyiWidth), top: 60, height: 148, width: 134});
            //隐患
            $("#yinhuan").css({left: baifenbi(33, pianyiWidth), top: 50, height: 180, width: 142});
            //整改
            $("#zhenggai").css({left: pianyiWidth - 60, top: 20, height: 180, width: 100});
            //完成
            $("#wancheng").css({left: baifenbi(85, procedureWidth), top: 98, height: 93});

            //计划提示框
            $("#jihua .jiedian , .popover-jihua").hover(
                    function () {
                        $(".popover-jihua").css({left: baifenbi(0, pianyiWidth) + 16, top: 130}).show()
                    }, function () {
                        $(".popover-jihua").hide()
                    }
            )


            //隐患提示框
            $("#yinhuan .jiedian , .popover-yinhuan").hover(
                    function () {
                        $(".popover-yinhuan").css({left: baifenbi(33, pianyiWidth) + 5, top: 130}).show()
                    }, function () {
                        $(".popover-yinhuan").hide()
                    }
            )


            //基线
            var j2 = "M0,122.944l1227.043-0.033   c2.732,0,4.959,2.193,5,4.926l0.196,13.149c0.041,2.732,2.267,4.926,5,4.926h90.731c2.761,0,5-2.239,5-5l0-13c0-2.761,2.239-5,5-5   h292.713c3.308,0,6.402-1.636,8.264-4.369l57.072-84.256c1.859-2.745,5.592-3.462,8.335-1.601l0.729,0.494   c2.738,1.857,3.456,5.579,1.607,8.321l-109.296,162.021c-1.85,2.742-1.131,6.465,1.607,8.321l7.907,5.362   c2.729,1.851,6.44,1.152,8.31-1.564l61.109-88.787c1.869-2.715,4.954-4.335,8.25-4.33L3000,122.911"
            var jixianPath = svg.select("#jixian").attr({
                d: j2
            });

            //红线
            var hongxianPathD = "M1204.996,122.911h22.047   c2.732,0,4.959,2.193,5,4.926l0.196,13.149c0.041,2.732,2.267,4.926,5,4.926h90.731c2.761,0,5-2.239,5-5l0-13c0-2.761,2.239-5,5-5   h292.713c3.308,0,6.402-1.636,8.264-4.369l58.755-86.742c0.93-1.372,2.796-1.731,4.168-0.8l5.69,3.859   c1.369,0.928,1.728,2.789,0.803,4.161l-110.97,164.502c-1.85,2.742-1.131,6.465,1.607,8.321l7.907,5.362   c2.729,1.851,6.44,1.152,8.31-1.564l7.216-10.784l-7.216,10.784l61.109-88.787c1.869-2.715,4.954-4.335,8.25-4.33L3000,122.911"
            var hongxianPath = svg.select("#hongxian").attr({
                d: hongxianPathD
            });
            var hongxian2Path = svg.select("#hongxian2").attr({
                d: hongxianPathD
            });

            //蓝线
            var lanxianPathD = "M1615.215,215.64l61.109-88.787 c1.869-2.715,4.954-4.335,8.25-4.33l99.053,0.389";
            var lanxianPath = svg.select("#lanxian").attr({
                d: lanxianPathD
            });

            //一次整改
            var huixian1D = "M1315.31,146.75l-0.1-24.882   c-0.013-3.323,2.677-6.024,6-6.024h306.07c3.323,0,6.429-1.651,8.288-4.405l58.747-87.02c1.857-2.75,5.594-3.471,8.34-1.609   l11.757,7.973c2.739,1.857,3.457,5.582,1.604,8.325l-102.794,152.269c-2.314,3.428-1.996,6.499,1.605,8.323l7.603,5.156";
            var huixian1Path = svg.select("#huixian1").attr({
                d: huixian1D
            });

            //二次整改
            var huixian2D = "M1283.31,146.75v-30.125   c0-3.314,2.686-6,6-6h335.432c3.323,0,6.429-1.651,8.288-4.405l59.976-88.84c1.857-2.75,5.594-3.471,8.34-1.609l20.167,13.675   c2.739,1.857,3.457,5.581,1.605,8.323l-86.338,127.889c-0.926,1.371-0.567,3.233,0.803,4.162l5.83,3.954"
            var huixian2Path = svg.select("#huixian2").attr({
                d: huixian2D
            });

            //三次整改
            var huixian3D = "M1249.31,144.75v-33.375   c0-3.314,2.686-6,6-6h366.78c3.323,0,6.429-1.651,8.288-4.405l61.303-90.806c1.857-2.75,5.594-3.471,8.34-1.609l28.574,19.377   c2.739,1.857,3.457,5.581,1.605,8.323l-70.756,104.809l4.174,2.781"
            var huixian3Path = svg.select("#huixian3").attr({
                d: huixian3D
            });


//        $(".yicizhenggai").click(function () {
//            zhenggaiXuanzhong("#huixian1-group", "#2E97DE")
//            zhenggaiXuanzhong("#huixian2-group", "#F15A24")
//            zhenggaiXuanzhong("#huixian3-group", "#9E005D")
//        });
//        $(".zhenggaiDefault").click(function () {
//            zhenggaiDefault("#huixian1-group")
//            zhenggaiDefault("#huixian2-group")
//            zhenggaiDefault("#huixian3-group")
//        });


            //整改选中状态
            function zhenggaiXuanzhong(id, color) {
                var huixianGroup = svg.select(id);

                huixianGroup.selectAll(".line-huixian")
                        .animate({
                            stroke: color,
                            strokeDasharray: 0
                        }, 1000)
                huixianGroup.selectAll(".dian")
                        .animate({
                            stroke: color,
                            fill: "#fff"
                        }, 500, mina.bounce);
                huixianGroup.selectAll(".xian")
                        .animate({
                            stroke: color,
                            strokeDasharray: 0
                        }, 500, mina.bounce);
                huixianGroup.selectAll(".wenzi")
                        .animate({
                            fill: color
                        }, 500, mina.bounce);
                huixianGroup.selectAll(".yuan")
                        .animate({
                            fill: color
                        }, 500, mina.bounce);
            }

            //整改默认状态
            function zhenggaiDefault(id) {
                var huixianGroup = svg.select(id);

                huixianGroup.selectAll(".line-huixian")
                        .animate({
                            stroke: "#B3B3B3",
                            strokeDasharray: "5, 2"
                        }, 1000)
                huixianGroup.selectAll(".dian")
                        .animate({
                            stroke: "#FFFFFF",
                            fill: "#999999"
                        }, 500, mina.bounce);
                huixianGroup.selectAll(".xian")
                        .animate({
                            stroke: "#B3B3B3",
                            strokeDasharray: "2,2"
                        }, 500);
                huixianGroup.selectAll(".wenzi")
                        .animate({
                            fill: "#333333"
                        }, 500);
                huixianGroup.selectAll(".yuan")
                        .animate({
                            fill: "#999999"
                        }, 500);
            }


            //动画部分

            var jixianTime = 4000; //基线入场时间


            //基线进入时间
            Snap.animate(0, 3000, function (x) {

                jixianPath.attr({
                    d: Snap.path.getSubpath(j2, 0, x)

                });


            }, jixianTime);


            //大节点进入时间
            setTimeout(function () {
                Snap.select("#jihua").attr({
                    class: "jueduidingwei show fadeInLeftBig animated"
                })
            }, jixianTime);

            setTimeout(function () {

                Snap.select("#yinhuan").attr({
                    class: "jueduidingwei show fadeInUpBig animated"
                })
            }, jixianTime + 200);

            setTimeout(function () {

                Snap.select("#zhenggai").attr({
                    class: "jueduidingwei show fadeInDownBig animated"
                })
            }, jixianTime + 300);

            setTimeout(function () {

                Snap.select("#wancheng").attr({
                    class: "jueduidingwei show fadeInRightBig animated"
                })
            }, jixianTime + 400);


            var huixianTime = jixianTime + 400;

            //整改动画
            function huixianAnimate(id, time, color) {

                setTimeout(function () {
                    Snap.selectAll(id + " .huixian-node")
                            .attr({class: "huixian-node show fadeInUpBig animated"});

                    Snap.selectAll(id + " .line-huixian")
                            .attr({class: "line-huixian show fadeInDownBig animated"});

                    zhenggaiXuanzhong(id, color);

                    setTimeout(function () {
                        zhenggaiDefault(id)
                    }, 1000);

                }, time)
            }

            //整改次数进入时间
            huixianAnimate("#huixian1-group", huixianTime + 1000, "#2E97DE");
            huixianAnimate("#huixian2-group", huixianTime + 1700, "#F15A24");
            huixianAnimate("#huixian3-group", huixianTime + 2300, "#9E005D");


            //第一次整改就通过的 红线
            var hongxianTime = huixianTime + 3000;
            setTimeout(function () {
                Snap.select("#hongxian")
                        .attr({class: "line-hongxian line show hongxianAnimat"});
                setTimeout(function () {

                    $("#hongxian2").show(2000)
                }, 3000);

            }, hongxianTime + 1000);




            $(".procedure .dian").hover(
                    function(d){
                        console.log("procedure"+ $(".procedure").width())
                        console.log(d.clientX)
                        $(".popover-public").css({top: this.getBBox().y+30, left: d.clientX+5}).show()
                    },
                    function(){
                        $(".popover-public").hide()
                    }
            )

        }



    });


</script>
</body>
</html>