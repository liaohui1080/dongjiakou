!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return Rn.apply(null,arguments)}function t(e){Rn=e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function a(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t){for(var n in t)r(t,n)&&(e[n]=t[n]);return r(t,"toString")&&(e.toString=t.toString),r(t,"valueOf")&&(e.valueOf=t.valueOf),e}function s(e,t,n,i){return Te(e,t,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function u(e){if(null==e._isValid){var t=c(e);e._isValid=!(isNaN(e._d.getTime())||!(t.overflow<0)||t.empty||t.invalidMonth||t.invalidWeekday||t.nullInput||t.invalidFormat||t.userInvalidated),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=s(NaN);return null!=e?o(c(t),e):c(t).userInvalidated=!0,t}function f(e,t){var n,i,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=c(t)),"undefined"!=typeof t._locale&&(e._locale=t._locale),On.length>0)for(n in On)i=On[n],a=t[i],"undefined"!=typeof a&&(e[i]=a);return e}function p(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),Ln===!1&&(Ln=!0,e.updateOffset(this),Ln=!1)}function g(e){return e instanceof p||null!=e&&null!=e._isAMomentObject}function h(e){return 0>e?Math.ceil(e):Math.floor(e)}function m(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=h(t)),n}function v(e,t,n){var i,a=Math.min(e.length,t.length),r=Math.abs(e.length-t.length),o=0;for(i=0;a>i;i++)(n&&e[i]!==t[i]||!n&&m(e[i])!==m(t[i]))&&o++;return o+r}function y(){}function b(e){return e?e.toLowerCase().replace("_","-"):e}function w(e){for(var t,n,i,a,r=0;r<e.length;){for(a=b(e[r]).split("-"),t=a.length,n=b(e[r+1]),n=n?n.split("-"):null;t>0;){if(i=$(a.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(a,n,!0)>=t-1)break;t--}r++}return null}function $(e){var t=null;if(!Hn[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=In._abbr,require("./locale/"+e),k(t)}catch(n){}return Hn[e]}function k(e,t){var n;return e&&(n="undefined"==typeof t?S(e):x(e,t),n&&(In=n)),In._abbr}function x(e,t){return null!==t?(t.abbr=e,Hn[e]=Hn[e]||new y,Hn[e].set(t),k(e),Hn[e]):(delete Hn[e],null)}function S(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return In;if(!n(e)){if(t=$(e))return t;e=[e]}return w(e)}function C(e,t){var n=e.toLowerCase();Bn[n]=Bn[n+"s"]=Bn[t]=e}function D(e){return"string"==typeof e?Bn[e]||Bn[e.toLowerCase()]:void 0}function M(e){var t,n,i={};for(n in e)r(e,n)&&(t=D(n),t&&(i[t]=e[n]));return i}function T(t,n){return function(i){return null!=i?(_(this,t,i),e.updateOffset(this,n),this):E(this,t)}}function E(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function _(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function F(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=D(e),"function"==typeof this[e])return this[e](t);return this}function A(e,t,n){var i=""+Math.abs(e),a=t-i.length,r=e>=0;return(r?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+i}function P(e,t,n,i){var a=i;"string"==typeof i&&(a=function(){return this[i]()}),e&&(Wn[e]=a),t&&(Wn[t[0]]=function(){return A(a.apply(this,arguments),t[1],t[2])}),n&&(Wn[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function R(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,i=e.match(zn);for(t=0,n=i.length;n>t;t++)Wn[i[t]]?i[t]=Wn[i[t]]:i[t]=R(i[t]);return function(a){var r="";for(t=0;n>t;t++)r+=i[t]instanceof Function?i[t].call(a,e):i[t];return r}}function O(e,t){return e.isValid()?(t=L(t,e.localeData()),Vn[t]=Vn[t]||I(t),Vn[t](e)):e.localeData().invalidDate()}function L(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(Un.lastIndex=0;i>=0&&Un.test(e);)e=e.replace(Un,n),Un.lastIndex=0,i-=1;return e}function H(e){return"function"==typeof e&&"[object Function]"===Object.prototype.toString.call(e)}function B(e,t,n){ai[e]=H(t)?t:function(e){return e&&n?n:t}}function z(e,t){return r(ai,e)?ai[e](t._strict,t._locale):new RegExp(U(e))}function U(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,a){return t||n||i||a}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function V(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=m(e)}),n=0;n<e.length;n++)ri[e[n]]=i}function W(e,t){V(e,function(e,n,i,a){i._w=i._w||{},t(e,i._w,i,a)})}function Y(e,t,n){null!=t&&r(ri,e)&&ri[e](t,n._a,n,e)}function G(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function N(e){return this._months[e.month()]}function j(e){return this._monthsShort[e.month()]}function q(e,t,n){var i,a,r;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(a=s([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(r="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[i]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function K(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),G(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function X(t){return null!=t?(K(this,t),e.updateOffset(this,!0),this):E(this,"Month")}function Z(){return G(this.year(),this.month())}function Q(e){var t,n=e._a;return n&&-2===c(e).overflow&&(t=n[si]<0||n[si]>11?si:n[li]<1||n[li]>G(n[oi],n[si])?li:n[ci]<0||n[ci]>24||24===n[ci]&&(0!==n[ui]||0!==n[di]||0!==n[fi])?ci:n[ui]<0||n[ui]>59?ui:n[di]<0||n[di]>59?di:n[fi]<0||n[fi]>999?fi:-1,c(e)._overflowDayOfYear&&(oi>t||t>li)&&(t=li),c(e).overflow=t),e}function J(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function ee(e,t){var n=!0;return o(function(){return n&&(J(e+"\n"+(new Error).stack),n=!1),t.apply(this,arguments)},t)}function te(e,t){hi[e]||(J(t),hi[e]=!0)}function ne(e){var t,n,i=e._i,a=mi.exec(i);if(a){for(c(e).iso=!0,t=0,n=vi.length;n>t;t++)if(vi[t][1].exec(i)){e._f=vi[t][0];break}for(t=0,n=yi.length;n>t;t++)if(yi[t][1].exec(i)){e._f+=(a[6]||" ")+yi[t][0];break}i.match(ti)&&(e._f+="Z"),$e(e)}else e._isValid=!1}function ie(t){var n=bi.exec(t._i);return null!==n?void(t._d=new Date(+n[1])):(ne(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function ae(e,t,n,i,a,r,o){var s=new Date(e,t,n,i,a,r,o);return 1970>e&&s.setFullYear(e),s}function re(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e){return se(e)?366:365}function se(e){return e%4===0&&e%100!==0||e%400===0}function le(){return se(this.year())}function ce(e,t,n){var i,a=n-t,r=n-e.day();return r>a&&(r-=7),a-7>r&&(r+=7),i=Ee(e).add(r,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function ue(e){return ce(e,this._week.dow,this._week.doy).week}function de(){return this._week.dow}function fe(){return this._week.doy}function pe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function ge(e){var t=ce(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function he(e,t,n,i,a){var r,o=6+a-i,s=re(e,0,1+o),l=s.getUTCDay();return a>l&&(l+=7),n=null!=n?1*n:a,r=1+o+7*(t-1)-l+n,{year:r>0?e:e-1,dayOfYear:r>0?r:oe(e-1)+r}}function me(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function ve(e,t,n){return null!=e?e:null!=t?t:n}function ye(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function be(e){var t,n,i,a,r=[];if(!e._d){for(i=ye(e),e._w&&null==e._a[li]&&null==e._a[si]&&we(e),e._dayOfYear&&(a=ve(e._a[oi],i[oi]),e._dayOfYear>oe(a)&&(c(e)._overflowDayOfYear=!0),n=re(a,0,e._dayOfYear),e._a[si]=n.getUTCMonth(),e._a[li]=n.getUTCDate()),t=0;3>t&&null==e._a[t];++t)e._a[t]=r[t]=i[t];for(;7>t;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ci]&&0===e._a[ui]&&0===e._a[di]&&0===e._a[fi]&&(e._nextDay=!0,e._a[ci]=0),e._d=(e._useUTC?re:ae).apply(null,r),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ci]=24)}}function we(e){var t,n,i,a,r,o,s;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(r=1,o=4,n=ve(t.GG,e._a[oi],ce(Ee(),1,4).year),i=ve(t.W,1),a=ve(t.E,1)):(r=e._locale._week.dow,o=e._locale._week.doy,n=ve(t.gg,e._a[oi],ce(Ee(),r,o).year),i=ve(t.w,1),null!=t.d?(a=t.d,r>a&&++i):a=null!=t.e?t.e+r:r),s=he(n,i,a,o,r),e._a[oi]=s.year,e._dayOfYear=s.dayOfYear}function $e(t){if(t._f===e.ISO_8601)return void ne(t);t._a=[],c(t).empty=!0;var n,i,a,r,o,s=""+t._i,l=s.length,u=0;for(a=L(t._f,t._locale).match(zn)||[],n=0;n<a.length;n++)r=a[n],i=(s.match(z(r,t))||[])[0],i&&(o=s.substr(0,s.indexOf(i)),o.length>0&&c(t).unusedInput.push(o),s=s.slice(s.indexOf(i)+i.length),u+=i.length),Wn[r]?(i?c(t).empty=!1:c(t).unusedTokens.push(r),Y(r,i,t)):t._strict&&!i&&c(t).unusedTokens.push(r);c(t).charsLeftOver=l-u,s.length>0&&c(t).unusedInput.push(s),c(t).bigHour===!0&&t._a[ci]<=12&&t._a[ci]>0&&(c(t).bigHour=void 0),t._a[ci]=ke(t._locale,t._a[ci],t._meridiem),be(t),Q(t)}function ke(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&12>t&&(t+=12),i||12!==t||(t=0),t):t}function xe(e){var t,n,i,a,r;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(a=0;a<e._f.length;a++)r=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[a],$e(t),u(t)&&(r+=c(t).charsLeftOver,r+=10*c(t).unusedTokens.length,c(t).score=r,(null==i||i>r)&&(i=r,n=t));o(e,n||t)}function Se(e){if(!e._d){var t=M(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],be(e)}}function Ce(e){var t=new p(Q(De(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function De(e){var t=e._i,a=e._f;return e._locale=e._locale||S(e._l),null===t||void 0===a&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),g(t)?new p(Q(t)):(n(a)?xe(e):a?$e(e):i(t)?e._d=t:Me(e),e))}function Me(t){var r=t._i;void 0===r?t._d=new Date:i(r)?t._d=new Date(+r):"string"==typeof r?ie(t):n(r)?(t._a=a(r.slice(0),function(e){return parseInt(e,10)}),be(t)):"object"==typeof r?Se(t):"number"==typeof r?t._d=new Date(r):e.createFromInputFallback(t)}function Te(e,t,n,i,a){var r={};return"boolean"==typeof n&&(i=n,n=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=a,r._l=n,r._i=e,r._f=t,r._strict=i,Ce(r)}function Ee(e,t,n,i){return Te(e,t,n,i,!1)}function _e(e,t){var i,a;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Ee();for(i=t[0],a=1;a<t.length;++a)t[a].isValid()&&!t[a][e](i)||(i=t[a]);return i}function Fe(){var e=[].slice.call(arguments,0);return _e("isBefore",e)}function Ae(){var e=[].slice.call(arguments,0);return _e("isAfter",e)}function Pe(e){var t=M(e),n=t.year||0,i=t.quarter||0,a=t.month||0,r=t.week||0,o=t.day||0,s=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+o+7*r,this._months=+a+3*i+12*n,this._data={},this._locale=S(),this._bubble()}function Re(e){return e instanceof Pe}function Ie(e,t){P(e,0,0,function(){var e=this.utcOffset(),n="+";return 0>e&&(e=-e,n="-"),n+A(~~(e/60),2)+t+A(~~e%60,2)})}function Oe(e){var t=(e||"").match(ti)||[],n=t[t.length-1]||[],i=(n+"").match(Si)||["-",0,0],a=+(60*i[1])+m(i[2]);return"+"===i[0]?a:-a}function Le(t,n){var a,r;return n._isUTC?(a=n.clone(),r=(g(t)||i(t)?+t:+Ee(t))-+a,a._d.setTime(+a._d+r),e.updateOffset(a,!1),a):Ee(t).local()}function He(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Be(t,n){var i,a=this._offset||0;return null!=t?("string"==typeof t&&(t=Oe(t)),Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=He(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),a!==t&&(!n||this._changeInProgress?tt(this,Xe(t-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?a:He(this)}function ze(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ue(e){return this.utcOffset(0,e)}function Ve(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(He(this),"m")),this}function We(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Oe(this._i)),this}function Ye(e){return e=e?Ee(e).utcOffset():0,(this.utcOffset()-e)%60===0}function Ge(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ne(){if("undefined"!=typeof this._isDSTShifted)return this._isDSTShifted;var e={};if(f(e,this),e=De(e),e._a){var t=e._isUTC?s(e._a):Ee(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function je(){return!this._isUTC}function qe(){return this._isUTC}function Ke(){return this._isUTC&&0===this._offset}function Xe(e,t){var n,i,a,o=e,s=null;return Re(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(o={},t?o[t]=e:o.milliseconds=e):(s=Ci.exec(e))?(n="-"===s[1]?-1:1,o={y:0,d:m(s[li])*n,h:m(s[ci])*n,m:m(s[ui])*n,s:m(s[di])*n,ms:m(s[fi])*n}):(s=Di.exec(e))?(n="-"===s[1]?-1:1,o={y:Ze(s[2],n),M:Ze(s[3],n),d:Ze(s[4],n),h:Ze(s[5],n),m:Ze(s[6],n),s:Ze(s[7],n),w:Ze(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(a=Je(Ee(o.from),Ee(o.to)),o={},o.ms=a.milliseconds,o.M=a.months),i=new Pe(o),Re(e)&&r(e,"_locale")&&(i._locale=e._locale),i}function Ze(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qe(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function Je(e,t){var n;return t=Le(t,e),e.isBefore(t)?n=Qe(e,t):(n=Qe(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function et(e,t){return function(n,i){var a,r;return null===i||isNaN(+i)||(te(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=n,n=i,i=r),n="string"==typeof n?+n:n,a=Xe(n,i),tt(this,a,e),this}}function tt(t,n,i,a){var r=n._milliseconds,o=n._days,s=n._months;a=null==a?!0:a,r&&t._d.setTime(+t._d+r*i),o&&_(t,"Date",E(t,"Date")+o*i),s&&K(t,E(t,"Month")+s*i),a&&e.updateOffset(t,o||s)}function nt(e,t){var n=e||Ee(),i=Le(n,this).startOf("day"),a=this.diff(i,"days",!0),r=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(t&&t[r]||this.localeData().calendar(r,this,Ee(n)))}function it(){return new p(this)}function at(e,t){var n;return t=D("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Ee(e),+this>+e):(n=g(e)?+e:+Ee(e),n<+this.clone().startOf(t))}function rt(e,t){var n;return t=D("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=g(e)?e:Ee(e),+e>+this):(n=g(e)?+e:+Ee(e),+this.clone().endOf(t)<n)}function ot(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function st(e,t){var n;return t=D(t||"millisecond"),"millisecond"===t?(e=g(e)?e:Ee(e),+this===+e):(n=+Ee(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function lt(e,t,n){var i,a,r=Le(e,this),o=6e4*(r.utcOffset()-this.utcOffset());return t=D(t),"year"===t||"month"===t||"quarter"===t?(a=ct(this,r),"quarter"===t?a/=3:"year"===t&&(a/=12)):(i=this-r,a="second"===t?i/1e3:"minute"===t?i/6e4:"hour"===t?i/36e5:"day"===t?(i-o)/864e5:"week"===t?(i-o)/6048e5:i),n?a:h(a)}function ct(e,t){var n,i,a=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(a,"months");return 0>t-r?(n=e.clone().add(a-1,"months"),i=(t-r)/(r-n)):(n=e.clone().add(a+1,"months"),i=(t-r)/(n-r)),-(a+i)}function ut(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function dt(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():O(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ft(t){var n=O(this,t||e.defaultFormat);return this.localeData().postformat(n)}function pt(e,t){return this.isValid()?Xe({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function gt(e){return this.from(Ee(),e)}function ht(e,t){return this.isValid()?Xe({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function mt(e){return this.to(Ee(),e)}function vt(e){var t;return void 0===e?this._locale._abbr:(t=S(e),null!=t&&(this._locale=t),this)}function yt(){return this._locale}function bt(e){switch(e=D(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wt(e){return e=D(e),void 0===e||"millisecond"===e?this:this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")}function $t(){return+this._d-6e4*(this._offset||0)}function kt(){return Math.floor(+this/1e3)}function xt(){return this._offset?new Date(+this):this._d}function St(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Ct(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Dt(){return u(this)}function Mt(){return o({},c(this))}function Tt(){return c(this).overflow}function Et(e,t){P(0,[e,e.length],0,t)}function _t(e,t,n){return ce(Ee([e,11,31+t-n]),t,n).week}function Ft(e){var t=ce(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")}function At(e){var t=ce(this,1,4).year;return null==e?t:this.add(e-t,"y")}function Pt(){return _t(this.year(),1,4)}function Rt(){var e=this.localeData()._week;return _t(this.year(),e.dow,e.doy)}function It(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Ot(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function Lt(e){return this._weekdays[e.day()]}function Ht(e){return this._weekdaysShort[e.day()]}function Bt(e){return this._weekdaysMin[e.day()]}function zt(e){var t,n,i;for(this._weekdaysParse=this._weekdaysParse||[],t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Ee([2e3,1]).day(t),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t}function Ut(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Ot(e,this.localeData()),this.add(e-t,"d")):t}function Vt(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Wt(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)}function Yt(e,t){P(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Gt(e,t){return t._meridiemParse}function Nt(e){return"p"===(e+"").toLowerCase().charAt(0)}function jt(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function qt(e,t){t[fi]=m(1e3*("0."+e))}function Kt(){return this._isUTC?"UTC":""}function Xt(){return this._isUTC?"Coordinated Universal Time":""}function Zt(e){return Ee(1e3*e)}function Qt(){return Ee.apply(null,arguments).parseZone()}function Jt(e,t,n){var i=this._calendar[e];return"function"==typeof i?i.call(t,n):i}function en(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function tn(){return this._invalidDate}function nn(e){return this._ordinal.replace("%d",e)}function an(e){return e}function rn(e,t,n,i){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,i):a.replace(/%d/i,e)}function on(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)}function sn(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ln(e,t,n,i){var a=S(),r=s().set(i,t);return a[n](r,e)}function cn(e,t,n,i,a){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return ln(e,t,n,a);var r,o=[];for(r=0;i>r;r++)o[r]=ln(e,r,n,a);return o}function un(e,t){return cn(e,t,"months",12,"month")}function dn(e,t){return cn(e,t,"monthsShort",12,"month")}function fn(e,t){return cn(e,t,"weekdays",7,"day")}function pn(e,t){return cn(e,t,"weekdaysShort",7,"day")}function gn(e,t){return cn(e,t,"weekdaysMin",7,"day")}function hn(){var e=this._data;return this._milliseconds=Ki(this._milliseconds),this._days=Ki(this._days),this._months=Ki(this._months),e.milliseconds=Ki(e.milliseconds),e.seconds=Ki(e.seconds),e.minutes=Ki(e.minutes),e.hours=Ki(e.hours),e.months=Ki(e.months),e.years=Ki(e.years),this}function mn(e,t,n,i){var a=Xe(t,n);return e._milliseconds+=i*a._milliseconds,e._days+=i*a._days,e._months+=i*a._months,e._bubble()}function vn(e,t){return mn(this,e,t,1)}function yn(e,t){return mn(this,e,t,-1)}function bn(e){return 0>e?Math.floor(e):Math.ceil(e)}function wn(){var e,t,n,i,a,r=this._milliseconds,o=this._days,s=this._months,l=this._data;return r>=0&&o>=0&&s>=0||0>=r&&0>=o&&0>=s||(r+=864e5*bn(kn(s)+o),o=0,s=0),l.milliseconds=r%1e3,e=h(r/1e3),l.seconds=e%60,t=h(e/60),l.minutes=t%60,n=h(t/60),l.hours=n%24,o+=h(n/24),a=h($n(o)),s+=a,o-=bn(kn(a)),i=h(s/12),s%=12,l.days=o,l.months=s,l.years=i,this}function $n(e){return 4800*e/146097}function kn(e){return 146097*e/4800}function xn(e){var t,n,i=this._milliseconds;if(e=D(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+$n(t),"month"===e?n:n/12;switch(t=this._days+Math.round(kn(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Sn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*m(this._months/12)}function Cn(e){return function(){return this.as(e)}}function Dn(e){return e=D(e),this[e+"s"]()}function Mn(e){return function(){return this._data[e]}}function Tn(){return h(this.days()/7)}function En(e,t,n,i,a){return a.relativeTime(t||1,!!n,e,i)}function _n(e,t,n){var i=Xe(e).abs(),a=da(i.as("s")),r=da(i.as("m")),o=da(i.as("h")),s=da(i.as("d")),l=da(i.as("M")),c=da(i.as("y")),u=a<fa.s&&["s",a]||1===r&&["m"]||r<fa.m&&["mm",r]||1===o&&["h"]||o<fa.h&&["hh",o]||1===s&&["d"]||s<fa.d&&["dd",s]||1===l&&["M"]||l<fa.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,En.apply(null,u)}function Fn(e,t){return void 0===fa[e]?!1:void 0===t?fa[e]:(fa[e]=t,!0)}function An(e){var t=this.localeData(),n=_n(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function Pn(){var e,t,n,i=pa(this._milliseconds)/1e3,a=pa(this._days),r=pa(this._months);e=h(i/60),t=h(e/60),i%=60,e%=60,n=h(r/12),r%=12;var o=n,s=r,l=a,c=t,u=e,d=i,f=this.asSeconds();return f?(0>f?"-":"")+"P"+(o?o+"Y":"")+(s?s+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var Rn,In,On=e.momentProperties=[],Ln=!1,Hn={},Bn={},zn=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Un=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Vn={},Wn={},Yn=/\d/,Gn=/\d\d/,Nn=/\d{3}/,jn=/\d{4}/,qn=/[+-]?\d{6}/,Kn=/\d\d?/,Xn=/\d{1,3}/,Zn=/\d{1,4}/,Qn=/[+-]?\d{1,6}/,Jn=/\d+/,ei=/[+-]?\d+/,ti=/Z|[+-]\d\d:?\d\d/gi,ni=/[+-]?\d+(\.\d{1,3})?/,ii=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ai={},ri={},oi=0,si=1,li=2,ci=3,ui=4,di=5,fi=6;P("M",["MM",2],"Mo",function(){return this.month()+1}),P("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),P("MMMM",0,0,function(e){return this.localeData().months(this,e)}),C("month","M"),B("M",Kn),B("MM",Kn,Gn),B("MMM",ii),B("MMMM",ii),V(["M","MM"],function(e,t){t[si]=m(e)-1}),V(["MMM","MMMM"],function(e,t,n,i){var a=n._locale.monthsParse(e,i,n._strict);null!=a?t[si]=a:c(n).invalidMonth=e});var pi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),hi={};e.suppressDeprecationWarnings=!1;var mi=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vi=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],yi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],bi=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=ee("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),P(0,["YY",2],0,function(){return this.year()%100}),P(0,["YYYY",4],0,"year"),P(0,["YYYYY",5],0,"year"),P(0,["YYYYYY",6,!0],0,"year"),C("year","y"),B("Y",ei),B("YY",Kn,Gn),B("YYYY",Zn,jn),B("YYYYY",Qn,qn),B("YYYYYY",Qn,qn),V(["YYYYY","YYYYYY"],oi),V("YYYY",function(t,n){n[oi]=2===t.length?e.parseTwoDigitYear(t):m(t)}),V("YY",function(t,n){n[oi]=e.parseTwoDigitYear(t)}),e.parseTwoDigitYear=function(e){return m(e)+(m(e)>68?1900:2e3)};var wi=T("FullYear",!1);P("w",["ww",2],"wo","week"),P("W",["WW",2],"Wo","isoWeek"),C("week","w"),C("isoWeek","W"),B("w",Kn),B("ww",Kn,Gn),B("W",Kn),B("WW",Kn,Gn),W(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=m(e)});var $i={dow:0,doy:6};P("DDD",["DDDD",3],"DDDo","dayOfYear"),C("dayOfYear","DDD"),B("DDD",Xn),B("DDDD",Nn),V(["DDD","DDDD"],function(e,t,n){n._dayOfYear=m(e)}),e.ISO_8601=function(){};var ki=ee("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return this>e?this:e}),xi=ee("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Ee.apply(null,arguments);return e>this?this:e});Ie("Z",":"),Ie("ZZ",""),B("Z",ti),B("ZZ",ti),V(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Oe(e)});var Si=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var Ci=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Di=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Xe.fn=Pe.prototype;var Mi=et(1,"add"),Ti=et(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ei=ee("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});P(0,["gg",2],0,function(){return this.weekYear()%100}),P(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Et("gggg","weekYear"),Et("ggggg","weekYear"),Et("GGGG","isoWeekYear"),Et("GGGGG","isoWeekYear"),C("weekYear","gg"),C("isoWeekYear","GG"),B("G",ei),B("g",ei),B("GG",Kn,Gn),B("gg",Kn,Gn),B("GGGG",Zn,jn),B("gggg",Zn,jn),B("GGGGG",Qn,qn),B("ggggg",Qn,qn),W(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=m(e)}),W(["gg","GG"],function(t,n,i,a){n[a]=e.parseTwoDigitYear(t)}),P("Q",0,0,"quarter"),C("quarter","Q"),B("Q",Yn),V("Q",function(e,t){t[si]=3*(m(e)-1)}),P("D",["DD",2],"Do","date"),C("date","D"),B("D",Kn),B("DD",Kn,Gn),B("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),V(["D","DD"],li),V("Do",function(e,t){t[li]=m(e.match(Kn)[0],10)});var _i=T("Date",!0);P("d",0,"do","day"),P("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),P("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),P("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),P("e",0,0,"weekday"),P("E",0,0,"isoWeekday"),C("day","d"),C("weekday","e"),C("isoWeekday","E"),B("d",Kn),B("e",Kn),B("E",Kn),B("dd",ii),B("ddd",ii),B("dddd",ii),W(["dd","ddd","dddd"],function(e,t,n){var i=n._locale.weekdaysParse(e);null!=i?t.d=i:c(n).invalidWeekday=e}),W(["d","e","E"],function(e,t,n,i){t[i]=m(e)});var Fi="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Ai="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Pi="Su_Mo_Tu_We_Th_Fr_Sa".split("_");P("H",["HH",2],0,"hour"),P("h",["hh",2],0,function(){return this.hours()%12||12}),Yt("a",!0),Yt("A",!1),C("hour","h"),B("a",Gt),B("A",Gt),B("H",Kn),B("h",Kn),B("HH",Kn,Gn),B("hh",Kn,Gn),V(["H","HH"],ci),V(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),V(["h","hh"],function(e,t,n){t[ci]=m(e),c(n).bigHour=!0});var Ri=/[ap]\.?m?\.?/i,Ii=T("Hours",!0);P("m",["mm",2],0,"minute"),C("minute","m"),B("m",Kn),B("mm",Kn,Gn),V(["m","mm"],ui);var Oi=T("Minutes",!1);P("s",["ss",2],0,"second"),C("second","s"),B("s",Kn),B("ss",Kn,Gn),V(["s","ss"],di);var Li=T("Seconds",!1);P("S",0,0,function(){return~~(this.millisecond()/100)}),P(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),P(0,["SSS",3],0,"millisecond"),P(0,["SSSS",4],0,function(){return 10*this.millisecond()}),P(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),P(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),P(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),P(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),P(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),C("millisecond","ms"),B("S",Xn,Yn),B("SS",Xn,Gn),B("SSS",Xn,Nn);var Hi;for(Hi="SSSS";Hi.length<=9;Hi+="S")B(Hi,Jn);for(Hi="S";Hi.length<=9;Hi+="S")V(Hi,qt);var Bi=T("Milliseconds",!1);P("z",0,0,"zoneAbbr"),P("zz",0,0,"zoneName");var zi=p.prototype;zi.add=Mi,zi.calendar=nt,zi.clone=it,zi.diff=lt,zi.endOf=wt,zi.format=ft,zi.from=pt,zi.fromNow=gt,zi.to=ht,zi.toNow=mt,zi.get=F,zi.invalidAt=Tt,zi.isAfter=at,zi.isBefore=rt,zi.isBetween=ot,zi.isSame=st,zi.isValid=Dt,zi.lang=Ei,zi.locale=vt,zi.localeData=yt,zi.max=xi,zi.min=ki,zi.parsingFlags=Mt,zi.set=F,zi.startOf=bt,zi.subtract=Ti,zi.toArray=St,zi.toObject=Ct,zi.toDate=xt,zi.toISOString=dt,zi.toJSON=dt,zi.toString=ut,zi.unix=kt,zi.valueOf=$t,zi.year=wi,zi.isLeapYear=le,zi.weekYear=Ft,zi.isoWeekYear=At,zi.quarter=zi.quarters=It,zi.month=X,zi.daysInMonth=Z,zi.week=zi.weeks=pe,zi.isoWeek=zi.isoWeeks=ge,zi.weeksInYear=Rt,zi.isoWeeksInYear=Pt,zi.date=_i,zi.day=zi.days=Ut,zi.weekday=Vt,zi.isoWeekday=Wt,zi.dayOfYear=me,zi.hour=zi.hours=Ii,zi.minute=zi.minutes=Oi,zi.second=zi.seconds=Li,
zi.millisecond=zi.milliseconds=Bi,zi.utcOffset=Be,zi.utc=Ue,zi.local=Ve,zi.parseZone=We,zi.hasAlignedHourOffset=Ye,zi.isDST=Ge,zi.isDSTShifted=Ne,zi.isLocal=je,zi.isUtcOffset=qe,zi.isUtc=Ke,zi.isUTC=Ke,zi.zoneAbbr=Kt,zi.zoneName=Xt,zi.dates=ee("dates accessor is deprecated. Use date instead.",_i),zi.months=ee("months accessor is deprecated. Use month instead",X),zi.years=ee("years accessor is deprecated. Use year instead",wi),zi.zone=ee("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",ze);var Ui=zi,Vi={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Wi={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Yi="Invalid date",Gi="%d",Ni=/\d{1,2}/,ji={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},qi=y.prototype;qi._calendar=Vi,qi.calendar=Jt,qi._longDateFormat=Wi,qi.longDateFormat=en,qi._invalidDate=Yi,qi.invalidDate=tn,qi._ordinal=Gi,qi.ordinal=nn,qi._ordinalParse=Ni,qi.preparse=an,qi.postformat=an,qi._relativeTime=ji,qi.relativeTime=rn,qi.pastFuture=on,qi.set=sn,qi.months=N,qi._months=pi,qi.monthsShort=j,qi._monthsShort=gi,qi.monthsParse=q,qi.week=ue,qi._week=$i,qi.firstDayOfYear=fe,qi.firstDayOfWeek=de,qi.weekdays=Lt,qi._weekdays=Fi,qi.weekdaysMin=Bt,qi._weekdaysMin=Pi,qi.weekdaysShort=Ht,qi._weekdaysShort=Ai,qi.weekdaysParse=zt,qi.isPM=Nt,qi._meridiemParse=Ri,qi.meridiem=jt,k("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===m(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=ee("moment.lang is deprecated. Use moment.locale instead.",k),e.langData=ee("moment.langData is deprecated. Use moment.localeData instead.",S);var Ki=Math.abs,Xi=Cn("ms"),Zi=Cn("s"),Qi=Cn("m"),Ji=Cn("h"),ea=Cn("d"),ta=Cn("w"),na=Cn("M"),ia=Cn("y"),aa=Mn("milliseconds"),ra=Mn("seconds"),oa=Mn("minutes"),sa=Mn("hours"),la=Mn("days"),ca=Mn("months"),ua=Mn("years"),da=Math.round,fa={s:45,m:45,h:22,d:26,M:11},pa=Math.abs,ga=Pe.prototype;ga.abs=hn,ga.add=vn,ga.subtract=yn,ga.as=xn,ga.asMilliseconds=Xi,ga.asSeconds=Zi,ga.asMinutes=Qi,ga.asHours=Ji,ga.asDays=ea,ga.asWeeks=ta,ga.asMonths=na,ga.asYears=ia,ga.valueOf=Sn,ga._bubble=wn,ga.get=Dn,ga.milliseconds=aa,ga.seconds=ra,ga.minutes=oa,ga.hours=sa,ga.days=la,ga.weeks=Tn,ga.months=ca,ga.years=ua,ga.humanize=An,ga.toISOString=Pn,ga.toString=Pn,ga.toJSON=Pn,ga.locale=vt,ga.localeData=yt,ga.toIsoString=ee("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Pn),ga.lang=Ei,P("X",0,0,"unix"),P("x",0,0,"valueOf"),B("x",ei),B("X",ni),V("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),V("x",function(e,t,n){n._d=new Date(m(e))}),e.version="2.10.6",t(Ee),e.fn=Ui,e.min=Fe,e.max=Ae,e.utc=s,e.unix=Zt,e.months=un,e.isDate=i,e.locale=k,e.invalid=d,e.duration=Xe,e.isMoment=g,e.weekdays=fn,e.parseZone=Qt,e.localeData=S,e.isDuration=Re,e.monthsShort=dn,e.weekdaysMin=gn,e.defineLocale=x,e.weekdaysShort=pn,e.normalizeUnits=D,e.relativeTimeThreshold=Fn;var ha=e;return ha}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("../moment")):"function"==typeof define&&define.amd?define(["moment"],t):t(e.moment)}(this,function(e){"use strict";var t=e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm分",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日Ah点mm分",LLLL:"YYYY年MMMD日ddddAh点mm分",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日Ah点mm分",llll:"YYYY年MMMD日ddddAh点mm分"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var i=100*e+t;return 600>i?"凌晨":900>i?"早上":1130>i?"上午":1230>i?"中午":1800>i?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}});return t}),!function(){function e(){}function t(e){return e}function n(e){return!!e}function i(e){return!e}function a(e){return function(){if(null===e)throw new Error("Callback was already called.");e.apply(this,arguments),e=null}}function r(e){return function(){null!==e&&(e.apply(this,arguments),e=null)}}function o(e){return O(e)||"number"==typeof e.length&&e.length>=0&&e.length%1===0}function s(e,t){for(var n=-1,i=e.length;++n<i;)t(e[n],n,e)}function l(e,t){for(var n=-1,i=e.length,a=Array(i);++n<i;)a[n]=t(e[n],n,e);return a}function c(e){return l(Array(e),function(e,t){return t})}function u(e,t,n){return s(e,function(e,i,a){n=t(n,e,i,a)}),n}function d(e,t){s(H(e),function(n){t(e[n],n)})}function f(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}function p(e){var t,n,i=-1;return o(e)?(t=e.length,function(){return i++,t>i?i:null}):(n=H(e),t=n.length,function(){return i++,t>i?n[i]:null})}function g(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),a=0;n>a;a++)i[a]=arguments[a+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i)}}}function h(e){return function(t,n,i){return e(t,i)}}function m(t){return function(n,i,o){o=r(o||e),n=n||[];var s=p(n);if(0>=t)return o(null);var l=!1,c=0,u=!1;!function d(){if(l&&0>=c)return o(null);for(;t>c&&!u;){var e=s();if(null===e)return l=!0,void(0>=c&&o(null));c+=1,i(n[e],e,a(function(e){c-=1,e?(o(e),u=!0):d()}))}}()}}function v(e){return function(t,n,i){return e(P.eachOf,t,n,i)}}function y(e){return function(t,n,i,a){return e(m(n),t,i,a)}}function b(e){return function(t,n,i){return e(P.eachOfSeries,t,n,i)}}function w(t,n,i,a){a=r(a||e),n=n||[];var s=o(n)?[]:{};t(n,function(e,t,n){i(e,function(e,i){s[t]=i,n(e)})},function(e){a(e,s)})}function $(e,t,n,i){var a=[];e(t,function(e,t,i){n(e,function(n){n&&a.push({index:t,value:e}),i()})},function(){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}function k(e,t,n,i){$(e,t,function(e,t){n(e,function(e){t(!e)})},i)}function x(e,t,n){return function(i,a,r,o){function s(){o&&o(n(!1,void 0))}function l(e,i,a){return o?void r(e,function(i){o&&t(i)&&(o(n(!0,e)),o=r=!1),a()}):a()}arguments.length>3?e(i,a,l,s):(o=r,r=a,e(i,l,s))}}function S(e,t){return t}function C(t,n,i){i=i||e;var a=o(n)?[]:{};t(n,function(e,t,n){e(g(function(e,i){i.length<=1&&(i=i[0]),a[t]=i,n(e)}))},function(e){i(e,a)})}function D(e,t,n,i){var a=[];e(t,function(e,t,i){n(e,function(e,t){a=a.concat(t||[]),i(e)})},function(e){i(e,a)})}function M(t,n,i){function r(t,n,i,a){if(null!=a&&"function"!=typeof a)throw new Error("task callback must be a function");return t.started=!0,O(n)||(n=[n]),0===n.length&&t.idle()?P.setImmediate(function(){t.drain()}):(s(n,function(n){var r={data:n,callback:a||e};i?t.tasks.unshift(r):t.tasks.push(r),t.tasks.length===t.concurrency&&t.saturated()}),void P.setImmediate(t.process))}function o(e,t){return function(){c-=1;var n=!1,i=arguments;s(t,function(e){s(u,function(t,i){t!==e||n||(u.splice(i,1),n=!0)}),e.callback.apply(e,i)}),e.tasks.length+c===0&&e.drain(),e.process()}}if(null==n)n=1;else if(0===n)throw new Error("Concurrency must not be zero");var c=0,u=[],d={tasks:[],concurrency:n,payload:i,saturated:e,empty:e,drain:e,started:!1,paused:!1,push:function(e,t){r(d,e,!1,t)},kill:function(){d.drain=e,d.tasks=[]},unshift:function(e,t){r(d,e,!0,t)},process:function(){for(;!d.paused&&c<d.concurrency&&d.tasks.length;){var e=d.payload?d.tasks.splice(0,d.payload):d.tasks.splice(0,d.tasks.length),n=l(e,function(e){return e.data});0===d.tasks.length&&d.empty(),c+=1,u.push(e[0]);var i=a(o(d,e));t(n,i)}},length:function(){return d.tasks.length},running:function(){return c},workersList:function(){return u},idle:function(){return d.tasks.length+c===0},pause:function(){d.paused=!0},resume:function(){if(d.paused!==!1){d.paused=!1;for(var e=Math.min(d.concurrency,d.tasks.length),t=1;e>=t;t++)P.setImmediate(d.process)}}};return d}function T(e){return g(function(t,n){t.apply(null,n.concat([g(function(t,n){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))})]))})}function E(e){return function(t,n,i){e(c(t),n,i)}}function _(e){return g(function(t,n){var i=g(function(n){var i=this,a=n.pop();return e(t,function(e,t,a){e.apply(i,n.concat([a]))},a)});return n.length?i.apply(this,n):i})}function F(e){return g(function(t){var n=t.pop();t.push(function(){var e=arguments;i?P.setImmediate(function(){n.apply(null,e)}):n.apply(null,e)});var i=!0;e.apply(this,t),i=!1})}var A,P={},R="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this;null!=R&&(A=R.async),P.noConflict=function(){return R.async=A,P};var I=Object.prototype.toString,O=Array.isArray||function(e){return"[object Array]"===I.call(e)},L=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},H=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},B="function"==typeof setImmediate&&setImmediate,z=B?function(e){B(e)}:function(e){setTimeout(e,0)};"object"==typeof process&&"function"==typeof process.nextTick?P.nextTick=process.nextTick:P.nextTick=z,P.setImmediate=B?z:P.nextTick,P.forEach=P.each=function(e,t,n){return P.eachOf(e,h(t),n)},P.forEachSeries=P.eachSeries=function(e,t,n){return P.eachOfSeries(e,h(t),n)},P.forEachLimit=P.eachLimit=function(e,t,n,i){return m(t)(e,h(n),i)},P.forEachOf=P.eachOf=function(t,n,i){function o(e){c--,e?i(e):null===s&&0>=c&&i(null)}i=r(i||e),t=t||[];for(var s,l=p(t),c=0;null!=(s=l());)c+=1,n(t[s],s,a(o));0===c&&i(null)},P.forEachOfSeries=P.eachOfSeries=function(t,n,i){function o(){var e=!0;return null===l?i(null):(n(t[l],l,a(function(t){if(t)i(t);else{if(l=s(),null===l)return i(null);e?P.setImmediate(o):o()}})),void(e=!1))}i=r(i||e),t=t||[];var s=p(t),l=s();o()},P.forEachOfLimit=P.eachOfLimit=function(e,t,n,i){m(t)(e,n,i)},P.map=v(w),P.mapSeries=b(w),P.mapLimit=y(w),P.inject=P.foldl=P.reduce=function(e,t,n,i){P.eachOfSeries(e,function(e,i,a){n(t,e,function(e,n){t=n,a(e)})},function(e){i(e,t)})},P.foldr=P.reduceRight=function(e,n,i,a){var r=l(e,t).reverse();P.reduce(r,n,i,a)},P.transform=function(e,t,n,i){3===arguments.length&&(i=n,n=t,t=O(e)?[]:{}),P.eachOf(e,function(e,i,a){n(t,e,i,a)},function(e){i(e,t)})},P.select=P.filter=v($),P.selectLimit=P.filterLimit=y($),P.selectSeries=P.filterSeries=b($),P.reject=v(k),P.rejectLimit=y(k),P.rejectSeries=b(k),P.any=P.some=x(P.eachOf,n,t),P.someLimit=x(P.eachOfLimit,n,t),P.all=P.every=x(P.eachOf,i,i),P.everyLimit=x(P.eachOfLimit,i,i),P.detect=x(P.eachOf,t,S),P.detectSeries=x(P.eachOfSeries,t,S),P.detectLimit=x(P.eachOfLimit,t,S),P.sortBy=function(e,t,n){function i(e,t){var n=e.criteria,i=t.criteria;return i>n?-1:n>i?1:0}P.map(e,function(e,n){t(e,function(t,i){t?n(t):n(null,{value:e,criteria:i})})},function(e,t){return e?n(e):void n(null,l(t.sort(i),function(e){return e.value}))})},P.auto=function(t,n,i){function a(e){y.unshift(e)}function o(e){var t=f(y,e);t>=0&&y.splice(t,1)}function l(){p--,s(y.slice(0),function(e){e()})}"function"==typeof arguments[1]&&(i=n,n=null),i=r(i||e);var c=H(t),p=c.length;if(!p)return i(null);n||(n=p);var h={},m=0,v=!1,y=[];a(function(){p||i(null,h)}),s(c,function(e){function r(){return n>m&&u(b,function(e,t){return e&&h.hasOwnProperty(t)},!0)&&!h.hasOwnProperty(e)}function s(){r()&&(m++,o(s),p[p.length-1](y,h))}if(!v){for(var c,p=O(t[e])?t[e]:[t[e]],y=g(function(t,n){if(m--,n.length<=1&&(n=n[0]),t){var a={};d(h,function(e,t){a[t]=e}),a[e]=n,v=!0,i(t,a)}else h[e]=n,P.setImmediate(l)}),b=p.slice(0,p.length-1),w=b.length;w--;){if(!(c=t[b[w]]))throw new Error("Has nonexistent dependency in "+b.join(", "));if(O(c)&&f(c,e)>=0)throw new Error("Has cyclic dependencies")}r()?(m++,p[p.length-1](y,h)):a(s)}})},P.retry=function(e,t,n){function i(e,t){if("number"==typeof t)e.times=parseInt(t,10)||r;else{if("object"!=typeof t)throw new Error("Unsupported argument type for 'times': "+typeof t);e.times=parseInt(t.times,10)||r,e.interval=parseInt(t.interval,10)||o}}function a(e,t){function n(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}function i(e){return function(t){setTimeout(function(){t(null)},e)}}for(;l.times;){var a=!(l.times-=1);s.push(n(l.task,a)),!a&&l.interval>0&&s.push(i(l.interval))}P.series(s,function(t,n){n=n[n.length-1],(e||l.callback)(n.err,n.result)})}var r=5,o=0,s=[],l={times:r,interval:o},c=arguments.length;if(1>c||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=c&&"function"==typeof e&&(n=t,t=e),"function"!=typeof e&&i(l,e),l.callback=n,l.task=t,l.callback?a():a},P.waterfall=function(t,n){function i(e){return g(function(t,a){if(t)n.apply(null,[t].concat(a));else{var r=e.next();r?a.push(i(r)):a.push(n),F(e).apply(null,a)}})}if(n=r(n||e),!O(t)){var a=new Error("First argument to waterfall must be an array of functions");return n(a)}return t.length?void i(P.iterator(t))():n()},P.parallel=function(e,t){C(P.eachOf,e,t)},P.parallelLimit=function(e,t,n){C(m(t),e,n)},P.series=function(e,t){C(P.eachOfSeries,e,t)},P.iterator=function(e){function t(n){function i(){return e.length&&e[n].apply(null,arguments),i.next()}return i.next=function(){return n<e.length-1?t(n+1):null},i}return t(0)},P.apply=g(function(e,t){return g(function(n){return e.apply(null,t.concat(n))})}),P.concat=v(D),P.concatSeries=b(D),P.whilst=function(t,n,i){if(i=i||e,t()){var a=g(function(e,r){e?i(e):t.apply(this,r)?n(a):i.apply(null,[null].concat(r))});n(a)}else i(null)},P.doWhilst=function(e,t,n){var i=0;return P.whilst(function(){return++i<=1||t.apply(this,arguments)},e,n)},P.until=function(e,t,n){return P.whilst(function(){return!e.apply(this,arguments)},t,n)},P.doUntil=function(e,t,n){return P.doWhilst(e,function(){return!t.apply(this,arguments)},n)},P.during=function(t,n,i){i=i||e;var a=g(function(e,n){e?i(e):(n.push(r),t.apply(this,n))}),r=function(e,t){e?i(e):t?n(a):i(null)};t(r)},P.doDuring=function(e,t,n){var i=0;P.during(function(e){i++<1?e(null,!0):t.apply(this,arguments)},e,n)},P.queue=function(e,t){var n=M(function(t,n){e(t[0],n)},t,1);return n},P.priorityQueue=function(t,n){function i(e,t){return e.priority-t.priority}function a(e,t,n){for(var i=-1,a=e.length-1;a>i;){var r=i+(a-i+1>>>1);n(t,e[r])>=0?i=r:a=r-1}return i}function r(t,n,r,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,O(n)||(n=[n]),0===n.length?P.setImmediate(function(){t.drain()}):void s(n,function(n){var s={data:n,priority:r,callback:"function"==typeof o?o:e};t.tasks.splice(a(t.tasks,s,i)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),P.setImmediate(t.process)})}var o=P.queue(t,n);return o.push=function(e,t,n){r(o,e,t,n)},delete o.unshift,o},P.cargo=function(e,t){return M(e,1,t)},P.log=T("log"),P.dir=T("dir"),P.memoize=function(e,n){var i={},a={},r=Object.prototype.hasOwnProperty;n=n||t;var o=g(function(t){var o=t.pop(),s=n.apply(null,t);r.call(i,s)?P.setImmediate(function(){o.apply(null,i[s])}):r.call(a,s)?a[s].push(o):(a[s]=[o],e.apply(null,t.concat([g(function(e){i[s]=e;var t=a[s];delete a[s];for(var n=0,r=t.length;r>n;n++)t[n].apply(null,e)})])))});return o.memo=i,o.unmemoized=e,o},P.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},P.times=E(P.map),P.timesSeries=E(P.mapSeries),P.timesLimit=function(e,t,n,i){return P.mapLimit(c(e),t,n,i)},P.seq=function(){var t=arguments;return g(function(n){var i=this,a=n[n.length-1];"function"==typeof a?n.pop():a=e,P.reduce(t,n,function(e,t,n){t.apply(i,e.concat([g(function(e,t){n(e,t)})]))},function(e,t){a.apply(i,[e].concat(t))})})},P.compose=function(){return P.seq.apply(null,Array.prototype.reverse.call(arguments))},P.applyEach=_(P.eachOf),P.applyEachSeries=_(P.eachOfSeries),P.forever=function(t,n){function i(e){return e?r(e):void o(i)}var r=a(n||e),o=F(t);i()},P.ensureAsync=F,P.constant=g(function(e){var t=[null].concat(e);return function(e){return e.apply(this,t)}}),P.wrapSync=P.asyncify=function(e){return g(function(t){var n,i=t.pop();try{n=e.apply(this,t)}catch(a){return i(a)}L(n)&&"function"==typeof n.then?n.then(function(e){i(null,e)})["catch"](function(e){i(e.message?e:new Error(e))}):i(null,n)})},"object"==typeof module&&module.exports?module.exports=P:"function"==typeof define&&define.amd?define([],function(){return P}):R.async=P}(),!function(e,t){"use strict";var n,i,a={getPath:function(){var e=document.scripts,t=e[e.length-1],n=t.src;if(!t.getAttribute("merge"))return n.substring(0,n.lastIndexOf("/")+1)}(),enter:function(e){13===e.keyCode&&e.preventDefault()},config:{},end:{},btn:["&#x786E;&#x5B9A;","&#x53D6;&#x6D88;"],type:["dialog","page","iframe","loading","tips"]},r={v:"2.2",ie6:!!e.ActiveXObject&&!e.XMLHttpRequest,index:0,path:a.getPath,config:function(e,t){var i=0;return e=e||{},r.cache=a.config=n.extend(a.config,e),r.path=a.config.path||r.path,"string"==typeof e.extend&&(e.extend=[e.extend]),r.use("skin/layer.css",e.extend&&e.extend.length>0?function o(){var n=e.extend;r.use(n[n[i]?i:i-1],i<n.length?function(){return++i,o}():t)}():t),this},use:function(e,t,i){var a=n("head")[0],e=e.replace(/\s/g,""),o=/\.css$/.test(e),s=document.createElement(o?"link":"script"),l="layui_layer_"+e.replace(/\.|\//g,"");return r.path?(o&&(s.rel="stylesheet"),s[o?"href":"src"]=/^http:\/\//.test(e)?e:r.path+e,s.id=l,n("#"+l)[0]||a.appendChild(s),function c(){(o?1989===parseInt(n("#"+l).css("width")):r[i||l])?function(){t&&t();try{o||a.removeChild(s)}catch(e){}}():setTimeout(c,100)}(),this):void 0},ready:function(e,t){var i="function"==typeof e;return i&&(t=e),r.config(n.extend(a.config,function(){return i?{}:{path:e}}()),t),this},alert:function(e,t,i){var a="function"==typeof t;return a&&(i=t),r.open(n.extend({content:e,yes:i},a?{}:t))},confirm:function(e,t,i,o){var s="function"==typeof t;return s&&(o=i,i=t),r.open(n.extend({content:e,btn:a.btn,yes:i,cancel:o},s?{}:t))},msg:function(e,i,o){var l="function"==typeof i,c=a.config.skin,u=(c?c+" "+c+"-msg":"")||"layui-layer-msg",d=s.anim.length-1;return l&&(o=i),r.open(n.extend({content:e,time:3e3,shade:!1,skin:u,title:!1,closeBtn:!1,btn:!1,end:o},l&&!a.config.skin?{skin:u+" layui-layer-hui",shift:d}:function(){return i=i||{},(-1===i.icon||i.icon===t&&!a.config.skin)&&(i.skin=u+" "+(i.skin||"layui-layer-hui")),i}()))},load:function(e,t){return r.open(n.extend({type:3,icon:e||0,shade:.01},t))},tips:function(e,t,i){return r.open(n.extend({type:4,content:[e,t],closeBtn:!1,time:3e3,shade:!1,maxWidth:210},i))}},o=function(e){var t=this;t.index=++r.index,t.config=n.extend({},t.config,a.config,e),t.creat()};o.pt=o.prototype;var s=["layui-layer",".layui-layer-title",".layui-layer-main",".layui-layer-dialog","layui-layer-iframe","layui-layer-content","layui-layer-btn","layui-layer-close"];s.anim=["layui-anim","layui-anim-01","layui-anim-02","layui-anim-03","layui-anim-04","layui-anim-05","layui-anim-06"],o.pt.config={type:0,shade:.3,fix:!0,move:s[1],title:"&#x4FE1;&#x606F;",offset:"auto",area:"auto",closeBtn:1,time:0,zIndex:19891014,maxWidth:360,shift:0,icon:-1,scrollbar:!0,tips:2},o.pt.vessel=function(e,t){var n=this,i=n.index,r=n.config,o=r.zIndex+i,l="object"==typeof r.title,c=r.maxmin&&(1===r.type||2===r.type),u=r.title?'<div class="layui-layer-title" style="'+(l?r.title[1]:"")+'">'+(l?r.title[0]:r.title)+"</div>":"";return r.zIndex=o,t([r.shade?'<div class="layui-layer-shade" id="layui-layer-shade'+i+'" times="'+i+'" style="'+("z-index:"+(o-1)+"; background-color:"+(r.shade[1]||"#000")+"; opacity:"+(r.shade[0]||r.shade)+"; filter:alpha(opacity="+(100*r.shade[0]||100*r.shade)+");")+'"></div>':"",'<div class="'+s[0]+" "+(s.anim[r.shift]||"")+(" layui-layer-"+a.type[r.type])+(0!=r.type&&2!=r.type||r.shade?"":" layui-layer-border")+" "+(r.skin||"")+'" id="'+s[0]+i+'" type="'+a.type[r.type]+'" times="'+i+'" showtime="'+r.time+'" conType="'+(e?"object":"string")+'" style="z-index: '+o+"; width:"+r.area[0]+";height:"+r.area[1]+(r.fix?"":";position:absolute;")+'">'+(e&&2!=r.type?"":u)+'<div id="'+(r.id||"")+'" class="layui-layer-content'+(0==r.type&&-1!==r.icon?" layui-layer-padding":"")+(3==r.type?" layui-layer-loading"+r.icon:"")+'">'+(0==r.type&&-1!==r.icon?'<i class="layui-layer-ico layui-layer-ico'+r.icon+'"></i>':"")+(1==r.type&&e?"":r.content||"")+'</div><span class="layui-layer-setwin">'+function(){var e=c?'<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>':"";return r.closeBtn&&(e+='<a class="layui-layer-ico '+s[7]+" "+s[7]+(r.title?r.closeBtn:4==r.type?"1":"2")+'" href="javascript:;"></a>'),e}()+"</span>"+(r.btn?function(){var e="";"string"==typeof r.btn&&(r.btn=[r.btn]);for(var t=0,n=r.btn.length;n>t;t++)e+='<a class="'+s[6]+t+'">'+r.btn[t]+"</a>";return'<div class="'+s[6]+'">'+e+"</div>"}():"")+"</div>"],u),n},o.pt.creat=function(){var e=this,t=e.config,o=e.index,l=t.content,c="object"==typeof l;if(!n("#"+t.id)[0]){switch("string"==typeof t.area&&(t.area="auto"===t.area?["",""]:[t.area,""]),t.type){case 0:t.btn="btn"in t?t.btn:a.btn[0],r.closeAll("dialog");break;case 2:var l=t.content=c?t.content:[t.content||"http://layer.layui.com","auto"];t.content='<iframe scrolling="'+(t.content[1]||"auto")+'" allowtransparency="true" id="'+s[4]+o+'" name="'+s[4]+o+'" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="'+t.content[0]+'"></iframe>';break;case 3:t.title=!1,t.closeBtn=!1,-1===t.icon&&0===t.icon,r.closeAll("loading");break;case 4:c||(t.content=[t.content,"body"]),t.follow=t.content[1],t.content=t.content[0]+'<i class="layui-layer-TipsG"></i>',t.title=!1,t.fix=!1,t.tips="object"==typeof t.tips?t.tips:[t.tips,!0],t.tipsMore||r.closeAll("tips")}e.vessel(c,function(i,a){n("body").append(i[0]),c?function(){2==t.type||4==t.type?function(){n("body").append(i[1])}():function(){l.parents("."+s[0])[0]||(l.show().addClass("layui-layer-wrap").wrap(i[1]),n("#"+s[0]+o).find("."+s[5]).before(a))}()}():n("body").append(i[1]),e.layero=n("#"+s[0]+o),t.scrollbar||s.html.css("overflow","hidden").attr("layer-full",o)}).auto(o),2==t.type&&r.ie6&&e.layero.find("iframe").attr("src",l[0]),n(document).off("keydown",a.enter).on("keydown",a.enter),e.layero.on("keydown",function(e){n(document).off("keydown",a.enter)}),4==t.type?e.tips():e.offset(),t.fix&&i.on("resize",function(){e.offset(),(/^\d+%$/.test(t.area[0])||/^\d+%$/.test(t.area[1]))&&e.auto(o),4==t.type&&e.tips()}),t.time<=0||setTimeout(function(){r.close(e.index)},t.time),e.move().callback()}},o.pt.auto=function(e){function t(e){e=o.find(e),e.height(l[1]-c-u-2*(0|parseFloat(e.css("padding"))))}var a=this,r=a.config,o=n("#"+s[0]+e);""===r.area[0]&&r.maxWidth>0&&(/MSIE 7/.test(navigator.userAgent)&&r.btn&&o.width(o.innerWidth()),o.outerWidth()>r.maxWidth&&o.width(r.maxWidth));var l=[o.innerWidth(),o.innerHeight()],c=o.find(s[1]).outerHeight()||0,u=o.find("."+s[6]).outerHeight()||0;switch(r.type){case 2:t("iframe");break;default:""===r.area[1]?r.fix&&l[1]>=i.height()&&(l[1]=i.height(),t("."+s[5])):t("."+s[5])}return a},o.pt.offset=function(){var e=this,t=e.config,n=e.layero,a=[n.outerWidth(),n.outerHeight()],r="object"==typeof t.offset;e.offsetTop=(i.height()-a[1])/2,e.offsetLeft=(i.width()-a[0])/2,r?(e.offsetTop=t.offset[0],e.offsetLeft=t.offset[1]||e.offsetLeft):"auto"!==t.offset&&(e.offsetTop=t.offset,"rb"===t.offset&&(e.offsetTop=i.height()-a[1],e.offsetLeft=i.width()-a[0])),t.fix||(e.offsetTop=/%$/.test(e.offsetTop)?i.height()*parseFloat(e.offsetTop)/100:parseFloat(e.offsetTop),e.offsetLeft=/%$/.test(e.offsetLeft)?i.width()*parseFloat(e.offsetLeft)/100:parseFloat(e.offsetLeft),e.offsetTop+=i.scrollTop(),e.offsetLeft+=i.scrollLeft()),n.css({top:e.offsetTop,left:e.offsetLeft})},o.pt.tips=function(){var e=this,t=e.config,a=e.layero,r=[a.outerWidth(),a.outerHeight()],o=n(t.follow);o[0]||(o=n("body"));var l={width:o.outerWidth(),height:o.outerHeight(),top:o.offset().top,left:o.offset().left},c=a.find(".layui-layer-TipsG"),u=t.tips[0];t.tips[1]||c.remove(),l.autoLeft=function(){l.left+r[0]-i.width()>0?(l.tipLeft=l.left+l.width-r[0],c.css({right:12,left:"auto"})):l.tipLeft=l.left},l.where=[function(){l.autoLeft(),l.tipTop=l.top-r[1]-10,c.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color",t.tips[1])},function(){l.tipLeft=l.left+l.width+10,l.tipTop=l.top,c.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color",t.tips[1])},function(){l.autoLeft(),l.tipTop=l.top+l.height+10,c.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color",t.tips[1])},function(){l.tipLeft=l.left-r[0]-10,l.tipTop=l.top,c.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color",t.tips[1])}],l.where[u-1](),1===u?l.top-(i.scrollTop()+r[1]+16)<0&&l.where[2]():2===u?i.width()-(l.left+l.width+r[0]+16)>0||l.where[3]():3===u?l.top-i.scrollTop()+l.height+r[1]+16-i.height()>0&&l.where[0]():4===u&&r[0]+16-l.left>0&&l.where[1](),a.find("."+s[5]).css({"background-color":t.tips[1],"padding-right":t.closeBtn?"30px":""}),a.css({left:l.tipLeft,top:l.tipTop})},o.pt.move=function(){var e=this,t=e.config,a={setY:0,moveLayer:function(){var e=a.layero,t=parseInt(e.css("margin-left")),n=parseInt(a.move.css("left"));0===t||(n-=t),"fixed"!==e.css("position")&&(n-=e.parent().offset().left,a.setY=0),e.css({left:n,top:parseInt(a.move.css("top"))-a.setY})}},r=e.layero.find(t.move);return t.move&&r.attr("move","ok"),r.css({cursor:t.move?"move":"auto"}),n(t.move).on("mousedown",function(e){if(e.preventDefault(),"ok"===n(this).attr("move")){a.ismove=!0,a.layero=n(this).parents("."+s[0]);var r=a.layero.offset().left,o=a.layero.offset().top,l=a.layero.outerWidth()-6,c=a.layero.outerHeight()-6;n("#layui-layer-moves")[0]||n("body").append('<div id="layui-layer-moves" class="layui-layer-moves" style="left:'+r+"px; top:"+o+"px; width:"+l+"px; height:"+c+'px; z-index:2147483584"></div>'),a.move=n("#layui-layer-moves"),t.moveType&&a.move.css({visibility:"hidden"}),a.moveX=e.pageX-a.move.position().left,a.moveY=e.pageY-a.move.position().top,"fixed"!==a.layero.css("position")||(a.setY=i.scrollTop())}}),n(document).mousemove(function(e){if(a.ismove){var n=e.pageX-a.moveX,r=e.pageY-a.moveY;if(e.preventDefault(),!t.moveOut){a.setY=i.scrollTop();var o=i.width()-a.move.outerWidth(),s=a.setY;0>n&&(n=0),n>o&&(n=o),s>r&&(r=s),r>i.height()-a.move.outerHeight()+a.setY&&(r=i.height()-a.move.outerHeight()+a.setY)}a.move.css({left:n,top:r}),t.moveType&&a.moveLayer(),n=r=o=s=null}}).mouseup(function(){try{a.ismove&&(a.moveLayer(),a.move.remove(),t.moveEnd&&t.moveEnd()),a.ismove=!1}catch(e){a.ismove=!1}}),e},o.pt.callback=function(){function e(){var e=o.cancel&&o.cancel(t.index);e===!1||r.close(t.index)}var t=this,i=t.layero,o=t.config;t.openLayer(),o.success&&(2==o.type?i.find("iframe").on("load",function(){o.success(i,t.index)}):o.success(i,t.index)),r.ie6&&t.IE6(i),i.find("."+s[6]).children("a").on("click",function(){var a=n(this).index();o["btn"+(a+1)]&&o["btn"+(a+1)](t.index,i),0===a?o.yes?o.yes(t.index,i):r.close(t.index):1===a?e():o["btn"+(a+1)]||r.close(t.index)}),i.find("."+s[7]).on("click",e),o.shadeClose&&n("#layui-layer-shade"+t.index).on("click",function(){r.close(t.index)}),i.find(".layui-layer-min").on("click",function(){r.min(t.index,o),o.min&&o.min(i)}),i.find(".layui-layer-max").on("click",function(){n(this).hasClass("layui-layer-maxmin")?(r.restore(t.index),o.restore&&o.restore(i)):(r.full(t.index,o),o.full&&o.full(i))}),o.end&&(a.end[t.index]=o.end)},a.reselect=function(){n.each(n("select"),function(e,t){var i=n(this);i.parents("."+s[0])[0]||1==i.attr("layer")&&n("."+s[0]).length<1&&i.removeAttr("layer").show(),i=null})},o.pt.IE6=function(e){function t(){e.css({top:r+(a.config.fix?i.scrollTop():0)})}var a=this,r=e.offset().top;t(),i.scroll(t),n("select").each(function(e,t){var i=n(this);i.parents("."+s[0])[0]||"none"===i.css("display")||i.attr({layer:"1"}).hide(),i=null})},o.pt.openLayer=function(){var e=this;r.zIndex=e.config.zIndex,r.setTop=function(e){var t=function(){r.zIndex++,e.css("z-index",r.zIndex+1)};return r.zIndex=parseInt(e[0].style.zIndex),e.on("mousedown",t),r.zIndex}},a.record=function(e){var t=[e.outerWidth(),e.outerHeight(),e.position().top,e.position().left+parseFloat(e.css("margin-left"))];e.find(".layui-layer-max").addClass("layui-layer-maxmin"),e.attr({area:t})},a.rescollbar=function(e){s.html.attr("layer-full")==e&&(s.html[0].style.removeProperty?s.html[0].style.removeProperty("overflow"):s.html[0].style.removeAttribute("overflow"),s.html.removeAttr("layer-full"))},e.layer=r,r.getChildFrame=function(e,t){return t=t||n("."+s[4]).attr("times"),n("#"+s[0]+t).find("iframe").contents().find(e)},r.getFrameIndex=function(e){return n("#"+e).parents("."+s[4]).attr("times")},r.iframeAuto=function(e){if(e){var t=r.getChildFrame("html",e).outerHeight(),i=n("#"+s[0]+e),a=i.find(s[1]).outerHeight()||0,o=i.find("."+s[6]).outerHeight()||0;i.css({height:t+a+o}),i.find("iframe").css({height:t})}},r.iframeSrc=function(e,t){n("#"+s[0]+e).find("iframe").attr("src",t)},r.style=function(e,t){var i=n("#"+s[0]+e),r=i.attr("type"),o=i.find(s[1]).outerHeight()||0,l=i.find("."+s[6]).outerHeight()||0;r!==a.type[1]&&r!==a.type[2]||(i.css(t),r===a.type[2]&&i.find("iframe").css({height:parseFloat(t.height)-o-l}))},r.min=function(e,t){var i=n("#"+s[0]+e),o=i.find(s[1]).outerHeight()||0;a.record(i),r.style(e,{width:180,height:o,overflow:"hidden"}),i.find(".layui-layer-min").hide(),"page"===i.attr("type")&&i.find(s[4]).hide(),a.rescollbar(e)},r.restore=function(e){var t=n("#"+s[0]+e),i=t.attr("area").split(",");t.attr("type");r.style(e,{width:parseFloat(i[0]),height:parseFloat(i[1]),top:parseFloat(i[2]),left:parseFloat(i[3]),overflow:"visible"}),t.find(".layui-layer-max").removeClass("layui-layer-maxmin"),t.find(".layui-layer-min").show(),"page"===t.attr("type")&&t.find(s[4]).show(),a.rescollbar(e)},r.full=function(e){var t,o=n("#"+s[0]+e);a.record(o),s.html.attr("layer-full")||s.html.css("overflow","hidden").attr("layer-full",e),clearTimeout(t),t=setTimeout(function(){var t="fixed"===o.css("position");r.style(e,{top:t?0:i.scrollTop(),left:t?0:i.scrollLeft(),width:i.width(),height:i.height()}),o.find(".layui-layer-min").hide()},100)},r.title=function(e,t){var i=n("#"+s[0]+(t||r.index)).find(s[1]);i.html(e)},r.close=function(e){var t=n("#"+s[0]+e),i=t.attr("type");if(t[0]){if(i===a.type[1]&&"object"===t.attr("conType")){t.children(":not(."+s[5]+")").remove();for(var o=0;2>o;o++)t.find(".layui-layer-wrap").unwrap().hide()}else{if(i===a.type[2])try{var l=n("#"+s[4]+e)[0];l.contentWindow.document.write(""),l.contentWindow.close(),t.find("."+s[5])[0].removeChild(l)}catch(c){}t[0].innerHTML="",t.remove()}n("#layui-layer-moves, #layui-layer-shade"+e).remove(),r.ie6&&a.reselect(),a.rescollbar(e),n(document).off("keydown",a.enter),
"function"==typeof a.end[e]&&a.end[e](),delete a.end[e]}},r.closeAll=function(e){n.each(n("."+s[0]),function(){var t=n(this),i=e?t.attr("type")===e:1;i&&r.close(t.attr("times")),i=null})},a.run=function(){n=jQuery,i=n(e),s.html=n("html"),r.open=function(e){var t=new o(e);return t.index}},"function"==typeof define?define(function(){return a.run(),r}):function(){a.run(),r.use("skin/layer.css")}()}(window),!function(){"use strict";var e=angular.module("ngNotify",[]),t=!1;try{angular.module("ngSanitize")&&(angular.module("ngNotify").requires.push("ngSanitize"),t=!0)}catch(n){}var i='<div class="ngn" ng-class="ngNotify.notifyClass" ng-style="ngNotify.notifyStyle"><span ng-show="ngNotify.notifyButton" class="ngn-dismiss" ng-click="dismiss()">&times;</span><span ng-if="ngNotify.notifyHtml" ng-bind-html="ngNotify.notifyMessage"></span><span ng-if="!ngNotify.notifyHtml" ng-bind="ngNotify.notifyMessage"></span></div>';e.run(["$templateCache",function(e){e.put("templates/ng-notify/ng-notify.html",i)}]),e.provider("ngNotify",function(){this.$get=["$document","$compile","$log","$rootScope","$timeout","$interval","$templateCache",function(e,n,i,a,r,o,s){var l,c,u="",d=" ",f=3e3,p="ngn-sticky",g=1,h=-1,m=200,v=500,y=25,b=0,w=1,$={theme:"pure",position:"bottom",duration:f,type:"info",sticky:!1,button:!0,html:!1},k={notifyClass:"",notifyMessage:"",notifyStyle:{display:"none",opacity:b}},x={pure:u,prime:"ngn-prime",pastel:"ngn-pastel",pitchy:"ngn-pitchy"},S={info:"ngn-info",error:"ngn-error",success:"ngn-success",warn:"ngn-warn",grimace:"ngn-grimace"},C={bottom:"ngn-bottom",top:"ngn-top"},D=a.$new(),M=n(s.get("templates/ng-notify/ng-notify.html"))(D);D.ngNotify=angular.extend({},k),r(function(){e.find("body").append(M)});var T=function(e){var t=e.type||$.type;return(S[t]||S.info)+d},E=function(e){var t=e.theme||$.theme;return(x[t]||x.pure)+d},_=function(e){var t=e.position||$.position;return(C[t]||C.bottom)+d},F=function(e){var t=e.duration||$.duration;return angular.isNumber(t)?t:f},A=function(e){var t=void 0!==e.sticky?e.sticky:$.sticky;return!!t},P=function(e,t){var n=void 0!==e.button?e.button:$.button;return n&&t},R=function(e){if((e.html||$.html)&&!t)return i.debug("ngNotify warning: \ngSanitize couldn't be located.  In order to use the 'html' option, be sure the ngSanitize source is included in your project."),!1;var n=void 0!==e.html?e.html:$.html;return!!n},I=function(e,t){var n=T(e)+E(e)+_(e);return n+=t?p:u},O=function(){D.ngNotify=angular.extend({},k)},L=function(e,t,n,i){var a=y/n;D.ngNotify.notifyStyle={display:"block",opacity:t};var r=function(){t+=e*a,D.ngNotify.notifyStyle.opacity=t,(b>=t||t>=w)&&(o.cancel(c),c=!1,i())};c||(c=o(r,y))},H=function(e,t){L(h,w,e,t)},B=function(e,t){L(g,b,e,t)};return D.dismiss=function(){H(v,function(){O()})},{config:function(e){e=e||{},angular.extend($,e)},set:function(e,t){if(e){o.cancel(c),c=!1,r.cancel(l);var n={};"object"==typeof t?n=t:n.type=t;var i=A(n),a=F(n);angular.extend(D.ngNotify,{notifyHtml:R(n),notifyClass:I(n,i),notifyButton:P(n,i),notifyMessage:e}),B(m,function(){i||(l=r(function(){D.dismiss()},a))})}},dismiss:function(){D.dismiss()},addTheme:function(e,t){e&&t&&(x[e]=t)},addType:function(e,t){e&&t&&(S[e]=t)}}}]})}(),!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,n,i,a,r,o){function s(){i.cancel(c),o.complete(),d=0,u=0}function l(t){var i,a=n.get("$http"),r=e.defaults;!t.cache&&!r.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(i=angular.isObject(t.cache)?t.cache:angular.isObject(r.cache)?r.cache:a);var o=void 0!==i?void 0!==i.get(t.url):!1;return void 0!==t.cached&&o!==t.cached?t.cached:(t.cached=o,o)}var c,u=0,d=0,f=o.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||l(e)||(a.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===u&&(c=i(function(){o.start()},f)),u++,o.set(d/u)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(d++,a.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=u?s():o.set(d/u)),e):(r.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||l(e.config)||(d++,a.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=u?s():o.set(d/u)),t.reject(e)):(r.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,n,i){function a(){u||(u=e.get("$animate"));var a=t.find(p).eq(0);n.cancel(f),v||(i.$broadcast("cfpLoadingBar:started"),v=!0,$&&u.enter(g,a,angular.element(a[0].lastChild)),w&&u.enter(m,a,angular.element(a[0].lastChild)),r(k))}function r(e){if(v){var t=100*e+"%";h.css("width",t),y=e,b&&(n.cancel(d),d=n(function(){o()},250))}}function o(){if(!(s()>=1)){var e=0,t=s();e=t>=0&&.25>t?(3*Math.random()+3)/100:t>=.25&&.65>t?3*Math.random()/100:t>=.65&&.9>t?2*Math.random()/100:t>=.9&&.99>t?.005:0;var n=s()+e;r(n)}}function s(){return y}function l(){y=0,v=!1}function c(){u||(u=e.get("$animate")),i.$broadcast("cfpLoadingBar:completed"),r(1),n.cancel(f),f=n(function(){var e=u.leave(g,l);e&&e.then&&e.then(l),u.leave(m)},500)}var u,d,f,p=this.parentSelector,g=angular.element(this.loadingBarTemplate),h=g.find("div").eq(0),m=angular.element(this.spinnerTemplate),v=!1,y=0,b=this.autoIncrement,w=this.includeSpinner,$=this.includeBar,k=this.startSize;return{start:a,set:r,status:s,inc:o,complete:c,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(e,t,n){"use strict";function i(e){var n=[];return l(n,t.noop).chars(e),n.join("")}function a(e,n){var i,a={},r=e.split(",");for(i=0;i<r.length;i++)a[n?t.lowercase(r[i]):r[i]]=!0;return a}function r(e,t){null===e||e===n?e="":"string"!=typeof e&&(e=""+e),u.innerHTML=e;var i=5;do{if(0===i)throw d("uinput");i--,11>=document.documentMode&&c(u),e=u.innerHTML,u.innerHTML=e}while(e!==u.innerHTML);for(i=u.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),o(i.attributes));break;case 3:t.chars(i.textContent)}var a;if(!(a=i.firstChild)&&(1==i.nodeType&&t.end(i.nodeName.toLowerCase()),a=i.nextSibling,!a))for(;null==a&&(i=i.parentNode,i!==u);)a=i.nextSibling,1==i.nodeType&&t.end(i.nodeName.toLowerCase());i=a}for(;i=u.firstChild;)u.removeChild(i)}function o(e){for(var t={},n=0,i=e.length;i>n;n++){var a=e[n];t[a.name]=a.value}return t}function s(e){return e.replace(/&/g,"&amp;").replace(f,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(p,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function l(e,n){var i=!1,a=t.bind(e,e.push);return{start:function(e,r){e=t.lowercase(e),!i&&b[e]&&(i=e),i||!0!==w[e]||(a("<"),a(e),t.forEach(r,function(i,r){var o=t.lowercase(r),l="img"===e&&"src"===o||"background"===o;!0!==k[o]||!0===$[o]&&!n(i,l)||(a(" "),a(r),a('="'),a(s(i)),a('"'))}),a(">"))},end:function(e){e=t.lowercase(e),i||!0!==w[e]||!0===g[e]||(a("</"),a(e),a(">")),e==i&&(i=!1)},chars:function(e){i||a(s(e))}}}function c(e){if(e.nodeType===Node.ELEMENT_NODE)for(var t=e.attributes,n=0,i=t.length;i>n;n++){var a=t[n],r=a.name.toLowerCase();"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||(e.removeAttributeNode(a),n--,i--)}(t=e.firstChild)&&c(t),(t=e.nextSibling)&&c(t)}var u,d=t.$$minErr("$sanitize"),f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/([^\#-~ |!])/g,g=a("area,br,col,hr,img,wbr"),h=a("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=a("rp,rt"),v=t.extend({},m,h),h=t.extend({},h,a("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),m=t.extend({},m,a("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),y=a("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),b=a("script,style"),w=t.extend({},g,h,m,v),$=a("background,cite,href,longdesc,src,xlink:href"),v=a("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),m=a("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),k=t.extend({},$,m,v);!function(e){if(!e.document||!e.document.implementation)throw d("noinert");e=e.document.implementation.createHTMLDocument("inert");var t=(e.documentElement||e.getDocumentElement()).getElementsByTagName("body");1===t.length?u=t[0]:(t=e.createElement("html"),u=e.createElement("body"),t.appendChild(u),e.appendChild(t))}(e),t.module("ngSanitize",[]).provider("$sanitize",function(){var e=!1;this.$get=["$$sanitizeUri",function(n){return e&&t.extend(w,y),function(e){var t=[];return r(e,l(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(n){return t.isDefined(n)?(e=n,this):e}}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,a=/^mailto:/i,r=t.$$minErr("linky"),o=t.isString;return function(s,l,c){function u(e){e&&h.push(i(e))}function d(e,n){var i;if(h.push("<a "),t.isFunction(c)&&(c=c(e)),t.isObject(c))for(i in c)h.push(i+'="'+c[i]+'" ');else c={};!t.isDefined(l)||"target"in c||h.push('target="',l,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),u(n),h.push("</a>")}if(null==s||""===s)return s;if(!o(s))throw r("notstring",s);for(var f,p,g=s,h=[];s=g.match(n);)f=s[0],s[2]||s[4]||(f=(s[3]?"http://":"mailto:")+f),p=s.index,u(g.substr(0,p)),d(f,s[0].replace(a,"")),g=g.substring(p+s[0].length);return u(g),e(h.join(""))}}])}(window,window.angular),function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var n=t.which;switch(n){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return!!t.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)},toSeparator:function(t){var n={ENTER:"\n",TAB:"	",SPACE:" "}[t];return n?n:e[t]?void 0:t}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,n=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,dropdownPosition:"auto",generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,i,a){a(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?(""+t).replace(new RegExp(e(n),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);n.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,i,a){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var n=t.parent().attr("theme")||e.theme;return n+"/choices.tpl.html"},compile:function(r,o){if(!o.repeat)throw n("repeat","Expected 'repeat' expression.");return function(r,o,s,l,c){var u=s.groupBy,d=s.groupFilter;if(l.parseRepeatAttr(s.repeat,u,d),l.disableChoiceExpression=s.uiDisableChoice,l.onHighlightCallback=s.onHighlight,l.dropdownPosition=s.position?s.position.toLowerCase():e.dropdownPosition,u){var f=o.querySelectorAll(".ui-select-choices-group");if(1!==f.length)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",f.length);f.attr("ng-repeat",t.getGroupNgRepeatExpression())}var p=o.querySelectorAll(".ui-select-choices-row");if(1!==p.length)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",p.length);p.attr("ng-repeat",l.parserResult.repeatExpression(u)).attr("ng-if","$select.open"),a.document.addEventListener&&p.attr("ng-mouseenter","$select.setActiveItem("+l.parserResult.itemName+")").attr("ng-click","$select.select("+l.parserResult.itemName+",false,$event)");var g=o.querySelectorAll(".ui-select-choices-row-inner");if(1!==g.length)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",g.length);g.attr("uis-transclude-append",""),a.document.addEventListener||g.attr("ng-mouseenter","$select.setActiveItem("+l.parserResult.itemName+")").attr("ng-click","$select.select("+l.parserResult.itemName+",false,$event)"),i(o,c)(r),r.$watch("$select.search",function(e){e&&!l.open&&l.multiple&&l.activate(!1,!0),l.activeIndex=l.tagging.isActivated?-1:0,!s.minimumInputLength||l.search.length>=s.minimumInputLength?l.refresh(s.refresh):l.items=[]}),s.$observe("refreshDelay",function(){var t=r.$eval(s.refreshDelay);l.refreshDelay=void 0!==t?t:e.refreshDelay})}}}}]),n.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector",function(t,n,i,a,r,o,s,l,c){function u(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var i,a=Object(e),r=a.length>>>0,o=0;r>o;o++)if(i=a[o],t.call(n,i,o,a))return o;return-1}function d(){(h.resetSearchInput||void 0===h.resetSearchInput&&s.resetSearchInput)&&(h.search=m,h.selected&&h.items.length&&!h.multiple&&(h.activeIndex=u(h.items,function(e){return angular.equals(this,e)},h.selected)))}function f(e,t){var n,i,a=[];for(n=0;n<t.length;n++)for(i=0;i<e.length;i++)e[i].name==[t[n]]&&a.push(e[i]);return a}function p(t){var n=!0;switch(t){case e.DOWN:!h.open&&h.multiple?h.activate(!1,!0):h.activeIndex<h.items.length-1&&h.activeIndex++;break;case e.UP:!h.open&&h.multiple?h.activate(!1,!0):(h.activeIndex>0||0===h.search.length&&h.tagging.isActivated&&h.activeIndex>-1)&&h.activeIndex--;break;case e.TAB:h.multiple&&!h.open||h.select(h.items[h.activeIndex],!0);break;case e.ENTER:h.open&&(h.tagging.isActivated||h.activeIndex>=0)?h.select(h.items[h.activeIndex]):h.activate(!1,!0);break;case e.ESC:h.close();break;default:n=!1}return n}function g(){var e=n.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw o("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(h.activeIndex<0)){var i=t[h.activeIndex],a=i.offsetTop+i.clientHeight-e[0].scrollTop,r=e[0].offsetHeight;a>r?e[0].scrollTop+=a-r:a<i.clientHeight&&(h.isGrouped&&0===h.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=i.clientHeight-a)}}var h=this,m="";if(h.placeholder=s.placeholder,h.searchEnabled=s.searchEnabled,h.sortable=s.sortable,h.refreshDelay=s.refreshDelay,h.paste=s.paste,h.removeSelected=!1,h.closeOnSelect=!0,h.search=m,h.activeIndex=0,h.items=[],h.open=!1,h.focus=!1,h.disabled=!1,h.selected=void 0,h.dropdownPosition="auto",h.focusser=void 0,h.resetSearchInput=!0,h.multiple=void 0,h.disableChoiceExpression=void 0,h.tagging={isActivated:!1,fct:void 0},h.taggingTokens={isActivated:!1,tokens:void 0},h.lockChoiceExpression=void 0,h.clickTriggeredSelect=!1,h.$filter=a,h.$animate=function(){try{return c.get("$animate")}catch(e){return null}}(),h.searchInput=n.querySelectorAll("input.ui-select-search"),1!==h.searchInput.length)throw o("searchInput","Expected 1 input.ui-select-search but got '{0}'.",h.searchInput.length);h.isEmpty=function(){return angular.isUndefined(h.selected)||null===h.selected||""===h.selected||h.multiple&&0===h.selected.length},h.activate=function(e,a){if(!h.disabled&&!h.open){a||d(),t.$broadcast("uis:activate"),h.open=!0,h.activeIndex=h.activeIndex>=h.items.length?0:h.activeIndex,-1===h.activeIndex&&h.taggingLabel!==!1&&(h.activeIndex=0);var r=n.querySelectorAll(".ui-select-choices-content");h.$animate&&h.$animate.enabled(r[0])?h.$animate.on("enter",r[0],function(t,n){"close"===n&&i(function(){h.focusSearchInput(e)})}):i(function(){h.focusSearchInput(e)})}},h.focusSearchInput=function(e){h.search=e||h.search,h.searchInput[0].focus(),!h.tagging.isActivated&&h.items.length>1&&g()},h.findGroupByName=function(e){return h.groups&&h.groups.filter(function(t){return t.name===e})[0]},h.parseRepeatAttr=function(e,n,i){function a(e){var a=t.$eval(n);if(h.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(a)?a(e):e[a],n=h.findGroupByName(t);n?n.items.push(e):h.groups.push({name:t,items:[e]})}),i){var r=t.$eval(i);angular.isFunction(r)?h.groups=r(h.groups):angular.isArray(r)&&(h.groups=f(h.groups,r))}h.items=[],h.groups.forEach(function(e){h.items=h.items.concat(e.items)})}function s(e){h.items=e}h.setItemsFn=n?a:s,h.parserResult=r.parse(e),h.isGrouped=!!n,h.itemProperty=h.parserResult.itemName;var c=h.parserResult.source,u=function(){var e=c(t);t.$uisSource=Object.keys(e).map(function(t){var n={};return n[h.parserResult.keyName]=t,n.value=e[t],n})};h.parserResult.keyName&&(u(),h.parserResult.source=l("$uisSource"+h.parserResult.filters),t.$watch(c,function(e,t){e!==t&&u()},!0)),h.refreshItems=function(e){e=e||h.parserResult.source(t);var n=h.selected;if(h.isEmpty()||angular.isArray(n)&&!n.length||!h.removeSelected)h.setItemsFn(e);else if(void 0!==e){var i=e.filter(function(e){return n&&n.indexOf(e)<0});h.setItemsFn(i)}"auto"!==h.dropdownPosition&&"up"!==h.dropdownPosition||t.calculateDropdownPos()},t.$watchCollection(h.parserResult.source,function(e){if(void 0===e||null===e)h.items=[];else{if(!angular.isArray(e))throw o("items","Expected an array but got '{0}'.",e);h.refreshItems(e),h.ngModel.$modelValue=null}})};var v;h.refresh=function(e){void 0!==e&&(v&&i.cancel(v),v=i(function(){t.$eval(e)},h.refreshDelay))},h.isActive=function(e){if(!h.open)return!1;var t=h.items.indexOf(e[h.itemProperty]),n=t==h.activeIndex;return!n||0>t&&h.taggingLabel!==!1||0>t&&h.taggingLabel===!1?!1:(n&&!angular.isUndefined(h.onHighlightCallback)&&e.$eval(h.onHighlightCallback),n)},h.isDisabled=function(e){if(h.open){var t,n=h.items.indexOf(e[h.itemProperty]),i=!1;return n>=0&&!angular.isUndefined(h.disableChoiceExpression)&&(t=h.items[n],i=!!e.$eval(h.disableChoiceExpression),t._uiSelectChoiceDisabled=i),i}},h.select=function(e,n,a){if(void 0===e||!e._uiSelectChoiceDisabled){if(!h.items&&!h.search&&!h.tagging.isActivated)return;if(!e||!e._uiSelectChoiceDisabled){if(h.tagging.isActivated){if(h.taggingLabel===!1)if(h.activeIndex<0){if(e=void 0!==h.tagging.fct?h.tagging.fct(h.search):h.search,!e||angular.equals(h.items[0],e))return}else e=h.items[h.activeIndex];else if(0===h.activeIndex){if(void 0===e)return;if(void 0!==h.tagging.fct&&"string"==typeof e){if(e=h.tagging.fct(e),!e)return}else"string"==typeof e&&(e=e.replace(h.taggingLabel,"").trim())}if(h.selected&&angular.isArray(h.selected)&&h.selected.filter(function(t){return angular.equals(t,e)}).length>0)return void h.close(n)}t.$broadcast("uis:select",e);var r={};r[h.parserResult.itemName]=e,i(function(){h.onSelectCallback(t,{$item:e,$model:h.parserResult.modelMapper(t,r)})}),h.closeOnSelect&&h.close(n),a&&"click"===a.type&&(h.clickTriggeredSelect=!0)}}},h.close=function(e){h.open&&(h.ngModel&&h.ngModel.$setTouched&&h.ngModel.$setTouched(),d(),h.open=!1,t.$broadcast("uis:close",e))},h.setFocus=function(){h.focus||h.focusInput[0].focus()},h.clear=function(e){h.select(void 0),e.stopPropagation(),i(function(){h.focusser[0].focus()},0,!1)},h.toggle=function(e){h.open?(h.close(),e.preventDefault(),e.stopPropagation()):h.activate()},h.isLocked=function(e,t){var n,i=h.selected[t];return i&&!angular.isUndefined(h.lockChoiceExpression)&&(n=!!e.$eval(h.lockChoiceExpression),i._uiSelectChoiceLocked=n),n};var y=null;h.sizeSearchInput=function(){var e=h.searchInput[0],n=h.searchInput.parent().parent()[0],a=function(){return n.clientWidth*!!e.offsetParent},r=function(t){if(0===t)return!1;var n=t-e.offsetLeft-10;return 50>n&&(n=t),h.searchInput.css("width",n+"px"),!0};h.searchInput.css("width","10px"),i(function(){null!==y||r(a())||(y=t.$watch(a,function(e){r(e)&&(y(),y=null)}))})},h.searchInput.on("keydown",function(n){var a=n.which;~[e.ENTER,e.ESC].indexOf(a)&&(n.preventDefault(),n.stopPropagation()),t.$apply(function(){var t=!1;if((h.items.length>0||h.tagging.isActivated)&&(p(a),h.taggingTokens.isActivated)){for(var r=0;r<h.taggingTokens.tokens.length;r++)h.taggingTokens.tokens[r]===e.MAP[n.keyCode]&&h.search.length>0&&(t=!0);t&&i(function(){h.searchInput.triggerHandler("tagged");var t=h.search.replace(e.MAP[n.keyCode],"").trim();h.tagging.fct&&(t=h.tagging.fct(t)),t&&h.select(t,!0)})}}),e.isVerticalMovement(a)&&h.items.length>0&&g(),a!==e.ENTER&&a!==e.ESC||(n.preventDefault(),n.stopPropagation())}),h.searchInput.on("paste",function(t){var n;if(n=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),n=h.search+n,n&&n.length>0)if(h.taggingTokens.isActivated){var i=e.toSeparator(h.taggingTokens.tokens[0]),a=n.split(i||h.taggingTokens.tokens[0]);if(a&&a.length>0){var r=h.search;angular.forEach(a,function(e){var t=h.tagging.fct?h.tagging.fct(e):e;t&&h.select(t,!0)}),h.search=r||m,t.preventDefault(),t.stopPropagation()}}else h.paste&&(h.paste(n),h.search=m,t.preventDefault(),t.stopPropagation())}),h.searchInput.on("tagged",function(){i(function(){d()})}),t.$on("$destroy",function(){h.searchInput.off("keyup keydown tagged blur paste")})}]),n.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,i,a,r,o){return{restrict:"EA",templateUrl:function(e,n){var i=n.theme||t.theme;return i+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(a,s){var l=/{(.*)}\s*{(.*)}/.exec(s.ngClass);if(l){var c="{"+l[1]+", "+l[2]+"}";s.ngClass=c,a.attr("ng-class",c)}return angular.isDefined(s.multiple)?a.append("<ui-select-multiple/>").removeAttr("multiple"):a.append("<ui-select-single/>"),s.inputId&&(a.querySelectorAll("input.ui-select-search")[0].id=s.inputId),function(a,s,l,c,u){function d(e){if(g.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(s[0],e.target):s[0].contains(e.target),!t&&!g.clickTriggeredSelect){var n=["input","button","textarea","select"],i=angular.element(e.target).controller("uiSelect"),r=i&&i!==g;r||(r=~n.indexOf(e.target.tagName.toLowerCase())),g.close(r),a.$digest()}g.clickTriggeredSelect=!1}}function f(){var t=i(s);v=angular.element('<div class="ui-select-placeholder"></div>'),v[0].style.width=t.width+"px",v[0].style.height=t.height+"px",s.after(v),y=s[0].style.width,e.find("body").append(s),s[0].style.position="absolute",s[0].style.left=t.left+"px",s[0].style.top=t.top+"px",s[0].style.width=t.width+"px"}function p(){null!==v&&(v.replaceWith(s),v=null,s[0].style.position="",s[0].style.left="",s[0].style.top="",s[0].style.width=y,g.setFocus())}var g=c[0],h=c[1];g.generatedId=t.generateId(),g.baseTitle=l.title||"Select box",g.focusserTitle=g.baseTitle+" focus",g.focusserId="focusser-"+g.generatedId,g.closeOnSelect=function(){return angular.isDefined(l.closeOnSelect)?r(l.closeOnSelect)():t.closeOnSelect}(),g.onSelectCallback=r(l.onSelect),g.onRemoveCallback=r(l.onRemove),g.limit=angular.isDefined(l.limit)?parseInt(l.limit,10):void 0,g.ngModel=h,g.choiceGrouped=function(e){return g.isGrouped&&e&&e.name},l.tabindex&&l.$observe("tabindex",function(e){g.focusInput.attr("tabindex",e),s.removeAttr("tabindex")}),a.$watch("searchEnabled",function(){var e=a.$eval(l.searchEnabled);g.searchEnabled=void 0!==e?e:t.searchEnabled}),a.$watch("sortable",function(){var e=a.$eval(l.sortable);g.sortable=void 0!==e?e:t.sortable}),l.$observe("disabled",function(){g.disabled=void 0!==l.disabled?l.disabled:!1}),l.$observe("resetSearchInput",function(){var e=a.$eval(l.resetSearchInput);g.resetSearchInput=void 0!==e?e:!0}),l.$observe("paste",function(){g.paste=a.$eval(l.paste)}),l.$observe("tagging",function(){if(void 0!==l.tagging){var e=a.$eval(l.tagging);g.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else g.tagging={isActivated:!1,fct:void 0}}),l.$observe("taggingLabel",function(){void 0!==l.tagging&&("false"===l.taggingLabel?g.taggingLabel=!1:g.taggingLabel=void 0!==l.taggingLabel?l.taggingLabel:"(new)")}),l.$observe("taggingTokens",function(){if(void 0!==l.tagging){var e=void 0!==l.taggingTokens?l.taggingTokens.split("|"):[",","ENTER"];g.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(l.autofocus)&&o(function(){g.setFocus()}),angular.isDefined(l.focusOn)&&a.$on(l.focusOn,function(){o(function(){g.setFocus()})}),e.on("click",d),a.$on("$destroy",function(){e.off("click",d)}),u(a,function(e){var t=angular.element("<div>").append(e),i=t.querySelectorAll(".ui-select-match");if(i.removeAttr("ui-select-match"),i.removeAttr("data-ui-select-match"),1!==i.length)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",i.length);s.querySelectorAll(".ui-select-match").replaceWith(i);var a=t.querySelectorAll(".ui-select-choices");if(a.removeAttr("ui-select-choices"),a.removeAttr("data-ui-select-choices"),1!==a.length)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",a.length);s.querySelectorAll(".ui-select-choices").replaceWith(a)});var m=a.$eval(l.appendToBody);(void 0!==m?m:t.appendToBody)&&(a.$watch("$select.open",function(e){e?f():p()}),a.$on("$destroy",function(){p()}));var v=null,y="",b=null,w="direction-up";a.$watch("$select.open",function(){"auto"!==g.dropdownPosition&&"up"!==g.dropdownPosition||a.calculateDropdownPos()});var $=function(e,t){e=e||i(s),t=t||i(b),b[0].style.position="absolute",b[0].style.top=-1*t.height+"px",s.addClass(w)},k=function(e,t){s.removeClass(w),e=e||i(s),t=t||i(b),b[0].style.position="",b[0].style.top=""};a.calculateDropdownPos=function(){if(g.open){if(b=angular.element(s).querySelectorAll(".ui-select-dropdown"),0===b.length)return;b[0].style.opacity=0,o(function(){if("up"===g.dropdownPosition)$();else{s.removeClass(w);var t=i(s),n=i(b),a=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+n.height>a+e[0].documentElement.clientHeight?$(t,n):k(t,n)}b[0].style.opacity=1})}else{if(null===b||0===b.length)return;b[0].style.position="",b[0].style.top="",s.removeClass(w)}}}}}}]),n.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-match");var n=t.parent().attr("theme")||e.theme,i=t.parent().attr("multiple");return n+(i?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,i,a){function r(e){a.allowClear=angular.isDefined(e)?""===e?!0:"true"===e.toLowerCase():!1}a.lockChoiceExpression=i.uiLockChoice,i.$observe("placeholder",function(t){a.placeholder=void 0!==t?t:e.placeholder}),i.$observe("allowClear",r),r(i.allowClear),a.multiple&&a.sizeSearchInput()}}}]),n.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,i=this,a=e.$select;angular.isUndefined(a.selected)&&(a.selected=[]),e.$evalAsync(function(){n=e.ngModel}),i.activeMatchIndex=-1,i.updateModel=function(){n.$setViewValue(Date.now()),i.refreshComponent()},i.refreshComponent=function(){a.refreshItems(),a.sizeSearchInput()},i.removeChoice=function(n){var r=a.selected[n];if(!r._uiSelectChoiceLocked){var o={};o[a.parserResult.itemName]=r,a.selected.splice(n,1),i.activeMatchIndex=-1,a.sizeSearchInput(),t(function(){a.onRemoveCallback(e,{$item:r,$model:a.parserResult.modelMapper(e,o)})}),i.updateModel()}},i.getPlaceholder=function(){return a.selected&&a.selected.length?void 0:a.placeholder}}],controllerAs:"$selectMultiple",link:function(i,a,r,o){function s(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length;
}function l(t){function n(){switch(t){case e.LEFT:return~p.activeMatchIndex?u:o;case e.RIGHT:return~p.activeMatchIndex&&l!==o?c:(d.activate(),!1);case e.BACKSPACE:return~p.activeMatchIndex?(p.removeChoice(l),u):o;case e.DELETE:return~p.activeMatchIndex?(p.removeChoice(p.activeMatchIndex),l):!1}}var i=s(d.searchInput[0]),a=d.selected.length,r=0,o=a-1,l=p.activeMatchIndex,c=p.activeMatchIndex+1,u=p.activeMatchIndex-1,f=l;return i>0||d.search.length&&t==e.RIGHT?!1:(d.close(),f=n(),d.selected.length&&f!==!1?p.activeMatchIndex=Math.min(o,Math.max(r,f)):p.activeMatchIndex=-1,!0)}function c(e){if(void 0===e||void 0===d.search)return!1;var t=e.filter(function(e){return void 0===d.search.toUpperCase()||void 0===e?!1:e.toUpperCase()===d.search.toUpperCase()}).length>0;return t}function u(e,t){var n=-1;if(angular.isArray(e))for(var i=angular.copy(e),a=0;a<i.length;a++)if(void 0===d.tagging.fct)i[a]+" "+d.taggingLabel===t&&(n=a);else{var r=i[a];angular.isObject(r)&&(r.isTag=!0),angular.equals(r,t)&&(n=a)}return n}var d=o[0],f=i.ngModel=o[1],p=i.$selectMultiple;d.multiple=!0,d.removeSelected=!0,d.focusInput=d.searchInput,f.$parsers.unshift(function(){for(var e,t={},n=[],a=d.selected.length-1;a>=0;a--)t={},t[d.parserResult.itemName]=d.selected[a],e=d.parserResult.modelMapper(i,t),n.unshift(e);return n}),f.$formatters.unshift(function(e){var t,n=d.parserResult.source(i,{$select:{search:""}}),a={};if(!n)return e;var r=[],o=function(e,n){if(e&&e.length){for(var o=e.length-1;o>=0;o--){if(a[d.parserResult.itemName]=e[o],t=d.parserResult.modelMapper(i,a),d.parserResult.trackByExp){var s=/(\w*)\./.exec(d.parserResult.trackByExp),l=/\.([^\s]+)/.exec(d.parserResult.trackByExp);if(s&&s.length>0&&s[1]==d.parserResult.itemName&&l&&l.length>0&&t[l[1]]==n[l[1]])return r.unshift(e[o]),!0}if(angular.equals(t,n))return r.unshift(e[o]),!0}return!1}};if(!e)return r;for(var s=e.length-1;s>=0;s--)o(d.selected,e[s])||o(n,e[s])||r.unshift(e[s]);return r}),i.$watchCollection(function(){return f.$modelValue},function(e,t){t!=e&&(f.$modelValue=null,p.refreshComponent())}),f.$render=function(){if(!angular.isArray(f.$viewValue)){if(!angular.isUndefined(f.$viewValue)&&null!==f.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",f.$viewValue);d.selected=[]}d.selected=f.$viewValue,i.$evalAsync()},i.$on("uis:select",function(e,t){d.selected.length>=d.limit||(d.selected.push(t),p.updateModel())}),i.$on("uis:activate",function(){p.activeMatchIndex=-1}),i.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(t){var n=t.which;i.$apply(function(){var i=!1;e.isHorizontalMovement(n)&&(i=l(n)),i&&n!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),d.searchInput.on("keyup",function(t){if(e.isVerticalMovement(t.which)||i.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var n,a,r,o,s=angular.copy(d.items),l=angular.copy(d.items),f=!1,p=-1;if(void 0!==d.tagging.fct){if(r=d.$filter("filter")(s,{isTag:!0}),r.length>0&&(o=r[0]),s.length>0&&o&&(f=!0,s=s.slice(1,s.length),l=l.slice(1,l.length)),n=d.tagging.fct(d.search),n.isTag=!0,l.filter(function(e){return angular.equals(e,d.tagging.fct(d.search))}).length>0)return;n.isTag=!0}else{if(r=d.$filter("filter")(s,function(e){return e.match(d.taggingLabel)}),r.length>0&&(o=r[0]),a=s[0],void 0!==a&&s.length>0&&o&&(f=!0,s=s.slice(1,s.length),l=l.slice(1,l.length)),n=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(c(l.concat(d.selected)))return void(f&&(s=l,i.$evalAsync(function(){d.activeIndex=0,d.items=s})));if(c(l))return void(f&&(d.items=l.slice(1,l.length)))}f&&(p=u(d.selected,n)),p>-1?s=s.slice(p+1,s.length-1):(s=[],s.push(n),s=s.concat(l)),i.$evalAsync(function(){d.activeIndex=0,d.items=s})}}),d.searchInput.on("blur",function(){n(function(){p.activeMatchIndex=-1})})}}}]),n.directive("uiSelectSingle",["$timeout","$compile",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(i,a,r,o){var s=o[0],l=o[1];l.$parsers.unshift(function(e){var t,n={};return n[s.parserResult.itemName]=e,t=s.parserResult.modelMapper(i,n)}),l.$formatters.unshift(function(e){var t,n=s.parserResult.source(i,{$select:{search:""}}),a={};if(n){var r=function(n){return a[s.parserResult.itemName]=n,t=s.parserResult.modelMapper(i,a),t==e};if(s.selected&&r(s.selected))return s.selected;for(var o=n.length-1;o>=0;o--)if(r(n[o]))return n[o]}return e}),i.$watch("$select.selected",function(e){l.$viewValue!==e&&l.$setViewValue(e)}),l.$render=function(){s.selected=l.$viewValue},i.$on("uis:select",function(e,t){s.selected=t}),i.$on("uis:close",function(e,n){t(function(){s.focusser.prop("disabled",!1),n||s.focusser[0].focus()},0,!1)}),i.$on("uis:activate",function(){c.prop("disabled",!0)});var c=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");n(c)(i),s.focusser=c,s.focusInput=c,a.parent().append(c),c.bind("focus",function(){i.$evalAsync(function(){s.focus=!0})}),c.bind("blur",function(){i.$evalAsync(function(){s.focus=!1})}),c.bind("keydown",function(t){return t.which===e.BACKSPACE?(t.preventDefault(),t.stopPropagation(),s.select(void 0),void i.$apply()):void(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||(t.which!=e.DOWN&&t.which!=e.UP&&t.which!=e.ENTER&&t.which!=e.SPACE||(t.preventDefault(),t.stopPropagation(),s.activate()),i.$digest()))}),c.bind("keyup input",function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(s.activate(c.val()),c.val(""),i.$digest())})}}}]),n.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:"^^uiSelect",link:function(t,i,a,r){if(null===t[a.uiSelectSort])throw n("sort","Expected a list to sort");var o=angular.extend({axis:"horizontal"},t.$eval(a.uiSelectSortOptions)),s=o.axis,l="dragging",c="dropping",u="dropping-before",d="dropping-after";t.$watch(function(){return r.sortable},function(e){e?i.attr("draggable",!0):i.removeAttr("draggable")}),i.on("dragstart",function(e){i.addClass(l),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),i.on("dragend",function(){i.removeClass(l)});var f,p=function(e,t){this.splice(t,0,this.splice(e,1)[0])},g=function(e){e.preventDefault();var t="vertical"===s?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===s?"offsetHeight":"offsetWidth"]/2?(i.removeClass(d),i.addClass(u)):(i.removeClass(u),i.addClass(d))},h=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(f),f=e(function(){m(n)},20)},m=function(e){var n=t.$eval(a.uiSelectSort),r=n[e],o=null;o=i.hasClass(u)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,p.apply(n,[e,o]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:n,item:r,from:e,to:o})}),i.removeClass(c),i.removeClass(u),i.removeClass(d),i.off("drop",h)};i.on("dragenter",function(){i.hasClass(l)||(i.addClass(c),i.on("dragover",g),i.on("drop",h))}),i.on("dragleave",function(e){e.target==i&&(i.removeClass(c),i.removeClass(u),i.removeClass(d),i.off("dragover",g),i.off("drop",h))})}}}]),n.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var i,a=/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(n);if(i=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!i)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);if(!i[6]&&a)throw e("iexp","Expected expression in form of '_item_ as (_key_, _item_) in _ObjCollection_ [ track by _id_]' but got '{0}'.",n);return{itemName:i[4]||i[2],keyName:i[3],source:t(i[3]?i[6]:i[5]),sourceName:i[6],filters:i[7],trackByExp:i[8],modelMapper:t(i[1]||i[4]||i[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="" class="ui-select-choices-row-inner"></a></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="false" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="false" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),e.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="false" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="false" autocorrect="false" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="false" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),angular.module("w5c.validator",["ng"]).provider("w5cValidator",[function(){var e={required:"该选项不能为空",maxlength:"该选项输入值长度不能大于{maxlength}",minlength:"该选项输入值长度不能小于{minlength}",email:"输入邮件的格式不正确",repeat:"两次输入不一致",pattern:"该选项输入格式不正确",number:"必须输入数字",w5cuniquecheck:"该输入值已经存在，请重新输入",url:"输入URL格式不正确",max:"该选项输入值不能大于{max}",min:"该选项输入值不能小于{min}",customizer:"自定义验证不通过"},t=["text","password","email","number","url","tel","hidden",["textarea"],["select"],["select-multiple"],["select-one"],"radio","checkbox"],n=function(e){return"FORM"===e[0].tagName||11==e[0].nodeType?null:e&&e.hasClass("form-group")?e:n(e.parent())},i=function(){this.elemTypes=t,this.rules={},this.isEmpty=function(e){return e?e instanceof Array&&0===e.length:!0},this.defaultShowError=function(e,t){var i=angular.element(e),a=n(i);this.isEmpty(a)||a.hasClass("has-error")||a.addClass("has-error");var r=i.next();r&&r.hasClass("w5c-error")||i.after('<span class="w5c-error">'+t[0]+"</span>")},this.defaultRemoveError=function(e){var t=angular.element(e),i=n(t);!this.isEmpty(i)&&i.hasClass("has-error")&&i.removeClass("has-error");var a=t.next();a.hasClass&&a.hasClass("w5c-error")&&a.remove()},this.options={blurTrig:!1,showError:!0,removeError:!0}};i.prototype={constructor:i,config:function(e){this.options=angular.extend(this.options,e)},setRules:function(e){this.rules=angular.extend(this.rules,e)},getErrorMessage:function(t,n){var i=null;switch(this.isEmpty(this.rules[n.name])||this.isEmpty(this.rules[n.name][t])||(i=this.rules[n.name][t]),t){case"maxlength":return null!==i?i.replace("{maxlength}",n.getAttribute("ng-maxlength")):e.maxlength.replace("{maxlength}",n.getAttribute("ng-maxlength"));case"minlength":return null!==i?i.replace("{minlength}",n.getAttribute("ng-minlength")):e.minlength.replace("{minlength}",n.getAttribute("ng-minlength"));case"max":return null!==i?i.replace("{max}",n.getAttribute("max")):e.max.replace("{max}",n.getAttribute("max"));case"min":return null!==i?i.replace("{min}",n.getAttribute("min")):e.min.replace("{min}",n.getAttribute("min"));default:if(null!==i)return i;if(null===e[t])throw new Error("该验证规则("+t+")默认错误信息没有设置！");return e[t]}},getErrorMessages:function(e,t){var n=[];for(var i in t)if(t[i]){var a=this.getErrorMessage(i,e);n.push(a)}return n},showError:function(e,t,n){var i=angular.extend({},this.options,n);return angular.element(e).removeClass("valid").addClass("error"),i.showError!==!1?angular.isFunction(i.showError)?i.showError(e,t):i.showError===!0?this.defaultShowError(e,t):void 0:void 0},removeError:function(e,t){var n=angular.extend({},this.options,t);return angular.element(e).removeClass("error").addClass("valid"),n.removeError!==!1?angular.isFunction(n.removeError)?n.removeError(e):n.removeError===!0?this.defaultRemoveError(e):void 0:void 0}};var a=new i;this.config=function(e){a.config(e)},this.setRules=function(e){a.setRules(e)},this.setDefaultRules=function(t){e=angular.extend(e,t)},this.$get=function(){return a}}]),function(){angular.module("w5c.validator").directive("w5cFormValidate",["$parse","w5cValidator","$timeout",function(e,t,n){return{require:["w5cFormValidate","^?form"],controller:["$scope",function(e){this.needBindKeydown=!1,this.form=null,this.formElement=null,this.submitSuccessFn=null,this.validElements=[],this.init=function(e,t){this.form=e,this.formElement=t,this.formName=t.attr("name")},this.doValidate=function(t,n){angular.isFunction(this.form.doValidate)&&this.form.doValidate(),this.form.$valid&&angular.isFunction(t)&&e.$apply(function(){t(e,{$event:n})})},this.removeElementValidation=function(e){var n=this.validElements.indexOf(e);n>=0&&(this.validElements.splice(n,1),t.isEmpty(this.form.$errors)||this.doValidate(angular.noop))},this.removeError=function(e){this.form.$errors=[],t.removeError(e,this.options)},this.initElement=function(i){var a=angular.element(i),r=this;if(t.elemTypes.toString().indexOf(i.type)>-1&&!t.isEmpty(i.name)&&!/^\d/.test(i.name)){var o=a.attr("disabled");if(o&&("true"===o||"disabled"===o))return;if(!(this.validElements.indexOf(i.name)<0))return;this.validElements.push(i.name);var s=this.formName+"."+i.name+".$viewValue";e.$watch(s,function(){r.removeError(a)},!0),r.options.blurTrig&&a.bind("blur",function(){if(r.options.blurTrig){var e=this,i=angular.element(this);n(function(){if(r.form[e.name].$valid)t.removeError(i,r.options);else{var n=t.getErrorMessages(e,r.form[e.name].$error);t.showError(i,n,r.options)}},50)}})}}}],link:function(i,a,r,o){var s=o[0],l=o[1],c=a[0],u=e(r.w5cSubmit),d=i.$eval(r.w5cFormValidate);if(!r.name)throw Error("form must has name when use w5cFormValidate");s.init(l,a,r),r.w5cFormValidate&&i.$watch(r.w5cFormValidate,function(e){e&&(s.options=d=angular.extend({},t.options,e))},!0),s.options=d=angular.extend({},t.options,d);for(var f=0;f<c.length;f++){var p=c[f];s.initElement(p)}var g=function(){for(var e=[],n=0;n<c.length;n++){var a=c[n].name;if(a&&s.validElements.indexOf(a)>=0){var r=c[a];if(l[a]&&r&&t.elemTypes.toString().indexOf(r.type)>-1&&!t.isEmpty(r.name)){if(l[a].$valid){angular.element(r).removeClass("error").addClass("valid");continue}var o=t.getErrorMessages(r,l[r.name].$error);e.push(o[0]),t.removeError(r,d),t.showError(r,o,d)}}}l.$errors=!t.isEmpty(e)&&e.length>0?e:[],i.$$phase||i.$apply(l.$errors)};l&&(l.doValidate=g,l.reset=function(){n(function(){l.$setPristine();for(var e=0;e<c.length;e++){var n=c[e],i=angular.element(n);t.removeError(i,d)}})}),r.w5cSubmit&&angular.isFunction(u)&&(a.bind("submit",function(e){g(),l.$valid&&angular.isFunction(u)&&i.$apply(function(){u(i,{$event:e})})}),s.needBindKeydown=!0),s.needBindKeydown&&a.bind("keydown keypress",function(e){if(13===e.which){var t=document.activeElement;if(t.type&&"textarea"!==t.type){var n=a.find("button");n&&n[0]&&n[0].focus(),t.focus(),g(),e.preventDefault(),l.$valid&&angular.isFunction(s.submitSuccessFn)&&i.$apply(function(){s.submitSuccessFn(i,{$event:e})})}}})}}}]).directive("w5cFormSubmit",["$parse",function(e){return{require:"^w5cFormValidate",link:function(t,n,i,a){var r=e(i.w5cFormSubmit);n.bind("click",function(e){a.doValidate(r,e)}),a.needBindKeydown=!0,a.submitSuccessFn=r}}}]).directive("w5cRepeat",[function(){"use strict";return{require:["ngModel","^w5cFormValidate"],link:function(e,t,n,i){var a=t.inheritedData("$formController")[n.w5cRepeat],r=i[0],o=i[1];r.$parsers.push(function(e){return e===a.$viewValue?r.$setValidity("repeat",!0):r.$setValidity("repeat",!1),e}),a.$parsers.push(function(e){return r.$setValidity("repeat",e===r.$viewValue),e===r.$viewValue&&o.removeError(t),e})}}}]).directive("w5cCustomizer",["$timeout",function(){"use strict";return{require:["^form","ngModel"],link:function(e,t,n,i){var a=i[1],r=function(){var t=e.$eval(n.w5cCustomizer);t===!0?a.$setValidity("customizer",!0):a.$setValidity("customizer",!1)},o=i[0][n.associate];o&&o.$viewChangeListeners.push(r),a.$viewChangeListeners.push(r)}}}]).directive("w5cUniqueCheck",["$timeout","$http","w5cValidator",function(e,t,n){return{require:["ngModel","?^w5cFormValidate","?^form"],link:function(e,i,a,r){var o=r[0],s=r[1],l=r[2],c=function(){var r=e.$eval(a.w5cUniqueCheck),c=r.url,u=r.isExists;t.get(c).success(function(e){var t=u===!1?"true"==e||1==e:!("true"==e||1==e);if(o.$setValidity("w5cuniquecheck",t),!t){var a=n.getErrorMessage("w5cuniquecheck",i[0]);n.showError(i[0],[a],s.options),l.$errors?l.$errors.unshift(a):l.$errors=[a]}})};o.$viewChangeListeners.push(function(){l.$errors=[],o.$setValidity("w5cuniquecheck",!0),(!o.$invalid||o.$error.w5cuniquecheck)&&o.$dirty&&c()});var u=e.$eval(a.ngModel);if(u){if(o.$invalid&&!o.$error.w5cuniquecheck)return;c()}}}}]).directive("w5cDynamicName",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,i){i.$name=e.$eval(n.w5cDynamicName),t.attr("name",e.$eval(n.w5cDynamicName));var a=t.controller("form")||{$addControl:angular.noop};a.$addControl(i)}}}]).directive("w5cDynamicElement",["$timeout",function(e){return{restrict:"A",require:["ngModel","?^w5cFormValidate","?^form"],link:function(t,n,i,a){var r=n[0].name,o=a[2];if(r){n.on("$destroy",function(){a[1].removeElementValidation(r)}),o[r]||o.$addControl(a[0]);var s=!1;a[2].$errors&&a[2].$errors.length>0&&(s=!0),a[1].initElement(n[0]),s&&e(function(){a[1].doValidate(angular.noop)})}}}}])}(),!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(i){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,i){e.__listeners[n]=i,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,i,a){n(this),this.__url=i;try{e.apply(this,[t,i,a])}catch(r){r.message.indexOf("Access is denied")>-1&&(this.__origError=r,e.apply(this,[t,"_fix_for_ie_crossdomain__",a]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,i){if("__setXHR_"===t){n(this);var a=i(this);a instanceof Function&&a(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=i,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],a={url:n.__url,jsonp:!1,cache:!0,complete:function(e,i){e&&angular.isString(e)&&-1!==e.indexOf("#2174")&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&t(n,"status",function(){return 0===i.status&&e&&"abort"!==e?500:i.status}),void 0!==i.statusText&&t(n,"statusText",function(){return i.statusText}),t(n,"readyState",function(){return 4}),void 0!==i.response&&t(n,"response",function(){return i.response});var a=i.responseText||(e&&0===i.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return a}),t(n,"response",function(){return a}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};a.data={},a.files={};for(var r=0;r<i.data.length;r++){var o=i.data[r];null!=o.val&&null!=o.val.name&&null!=o.val.size&&null!=o.val.type?a.files[o.key]=o.val:a.data[o.key]=o.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(a)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function t(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var i,a,r,o,s,l=document.createElement("script"),c=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)i=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)a=window.FileAPI.jsPath;else for(r=0;r<c.length;r++)if(s=c[r].src,o=s.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),o>-1){a=s.substring(0,o+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=a),l.setAttribute("src",i||a+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(l)}FileAPI.ngfFixIE=function(i,a,r){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var o=function(){var t=a.parent();i.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(a.attr("__ngf_flash_")||(a.unbind("change"),a.unbind("click"),a.bind("change",function(e){s.apply(this,[e]),r.apply(this,[e])}),a.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),e(i)||(t.css("position","absolute").css("top",n(i[0]).top+"px").css("left",n(i[0]).left+"px").css("width",i[0].offsetWidth+"px").css("height",i[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",i.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),a.css("width",i[0].offsetWidth+"px").css("height",i[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))};i.bind("mouseenter",o);var s=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),
void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var i=0;i<n.length;i++)n[i].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var i={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",i)));var a;"load"===i.type?(e.onloadend&&e.onloadend(n("loadend",i)),a=n("load",i),e.onload&&e.onload(a),e.dispatchEvent(a)):"progress"===i.type?(a=n("progress",i),e.onprogress&&e.onprogress(a),e.dispatchEvent(a)):(a=n("error",i),e.onerror&&e.onerror(a),e.dispatchEvent(a))};this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,i)},this.readAsText=function(e){FileAPI.readAsText(e,i)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var i=n(this);i instanceof Function&&i(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function i(i){function a(e){c.notify&&c.notify(e),u.progressFunc&&n(function(){u.progressFunc(e)})}function s(e){return null!=i._start&&o?{loaded:e.loaded+i._start,total:i._file&&i._file.size||e.total,type:e.type,config:i,lengthComputable:!0,target:e.target}:e}function l(){e(i).then(function(e){o&&i._chunkSize&&!i._finished&&i._file?(a({loaded:i._end,total:i._file&&i._file.size,config:i,type:"progress"}),r.upload(i,!0)):(i._finished&&delete i._finished,c.resolve(e))},function(e){c.reject(e)},function(e){c.notify(e)})}i.method=i.method||"POST",i.headers=i.headers||{};var c=i._deferred=i._deferred||t.defer(),u=c.promise;return i.disableProgress||(i.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(i.__XHR=e,i.xhrFn&&i.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=i,a(s(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=i,a(s(e)))},!1))}}),o?i._chunkSize&&i._end&&!i._finished?(i._start=i._end,i._end+=i._chunkSize,l()):i.resumeSizeUrl?e.get(i.resumeSizeUrl).then(function(e){i._start=i.resumeSizeResponseReader?i.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),i._chunkSize&&(i._end=i._start+i._chunkSize),l()},function(e){throw e}):i.resumeSize?i.resumeSize().then(function(e){i._start=e,l()},function(e){throw e}):(i._chunkSize&&(i._start=0,i._end=i._start+i._chunkSize),l()):l(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,i)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,i)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),u},u.xhr=function(e){return i.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(i.xhrFn),u},r.promisesCount++,u["finally"](function(){r.promisesCount--}),u}function a(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var r=this;r.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var o=this.isResumeSupported();this.isUploadInProgress=function(){return r.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&o){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var i=t.slice(e._start,e._end||t.size);return i.name=t.name,i.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),i}return t}function s(t,i,a){if(void 0!==i)if(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i))t.append(a,i);else if(r.isFile(i)){var o=n(i,t),l=a.split(",");l[1]&&(o.ngfName=l[1].replace(/^\s+|\s+$/g,""),a=l[0]),e._fileKey=e._fileKey||a,t.append(a,o,o.ngfName||o.name)}else if(angular.isObject(i)){if(i.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+a;i.$$ngfCircularDetection=!0;try{for(var c in i)if(i.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==e.objectKey?"[i]":e.objectKey;i.length&&parseInt(c)>-1&&(u=null==e.arrayKey?u:e.arrayKey),s(t,i[c],a+u.replace(/[ik]/g,c))}}finally{delete i.$$ngfCircularDetection}}else t.append(a,i)}function l(){e._chunkSize=r.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,i=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var a=t[n];e.formDataAppender?e.formDataAppender(i,n,a):s(i,a,n)}return i})}return t||(e=a(e)),e._isDigested||(e._isDigested=!0,l()),i(e)},this.http=function(t){return t=a(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=r.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,i(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var i=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",a=new window.Blob([t],{type:n});i.resolve(a)},function(e){i.reject(e)}),i.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,i,a){function r(e,t,n){var a=[l.emptyPromise()];return angular.forEach(e,function(i,r){0===i.type.indexOf("image/jpeg")&&l.attrGetter("ngfFixOrientation",t,n,{$file:i})&&a.push(l.happyPromise(l.applyExifRotation(i),i).then(function(t){e.splice(r,1,t)}))}),i.all(a)}function o(e,t,n){var a=l.attrGetter("ngfResize",t,n);if(!a||!l.isResizeSupported()||!e.length)return l.emptyPromise();if(!(a instanceof Function))return s(a,e,t,n);var r=i.defer();a(e).then(function(i){s(i,e,t,n).then(function(e){r.resolve(e)},function(e){r.reject(e)})},function(e){r.reject(e)})}function s(e,t,n,a){function r(i,r){if(0===i.type.indexOf("image")){if(e.pattern&&!l.validatePattern(i,e.pattern))return;var s=l.resize(i,e.width,e.height,e.quality,e.type,e.ratio,e.centerCrop,function(e,t){return l.attrGetter("ngfResizeIf",n,a,{$width:e,$height:t,$file:i})},e.restoreExif!==!1);o.push(s),s.then(function(e){t.splice(r,1,e)},function(e){i.$error="resize",i.$errorParam=(e?(e.message?e.message:e)+": ":"")+(i&&i.name)})}}for(var o=[l.emptyPromise()],s=0;s<t.length;s++)r(t[s],s);return i.all(o)}var l=a;return l.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=l.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},l.attrGetter=function(t,n,i,a){var r=this.getAttrWithDefaults(n,t);if(!i)return r;try{return a?e(r)(i,a):e(r)(i)}catch(o){if(t.search(/min|max|pattern/i))return r;throw o}},l.shouldUpdateOn=function(e,t,n){var i=l.attrGetter("ngModelOptions",t,n);return i&&i.updateOn?i.updateOn.split(" ").indexOf(e)>-1:!0},l.emptyPromise=function(){var e=i.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},l.rejectPromise=function(){var e=i.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},l.happyPromise=function(e,n){var a=i.defer();return e.then(function(e){a.resolve(e)},function(e){t(function(){throw e}),a.resolve(n)}),a.promise},l.updateModel=function(n,i,a,s,c,u,d){function f(r,o,c,d,f){i.$$ngfPrevValidFiles=r,i.$$ngfPrevInvalidFiles=o;var p=r&&r.length?r[0]:null,g=o&&o.length?o[0]:null;n&&(l.applyModelValidation(n,r),n.$setViewValue(f?p:r)),s&&e(s)(a,{$files:r,$file:p,$newFiles:c,$duplicateFiles:d,$invalidFiles:o,$invalidFile:g,$event:u});var h=l.attrGetter("ngfModelInvalid",i);h&&t(function(){e(h).assign(a,f?g:o)}),t(function(){})}function p(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<y.length;n++)if(e(t,y[n]))return!0;for(n=0;n<b.length;n++)if(e(t,b[n]))return!0;return!1}if(c){v=[],w=[];for(var n=0;n<c.length;n++)t(c[n])?w.push(c[n]):v.push(c[n])}}function g(e){return angular.isArray(e)?e:[e]}function h(){k=[],$=[],angular.forEach(v,function(e){e.$error?$.push(e):k.push(e)})}function m(){function e(){t(function(){f(x?y.concat(k):k,x?b.concat($):$,c,w,S)},D&&D.debounce?D.debounce.change||D.debounce:0)}o(C?v:k,i,a).then(function(){C?l.validate(v,y.length,n,i,a).then(function(){h(),e()}):e()},function(e){throw"Could not resize files "+e})}var v,y,b,w=[],$=[],k=[];y=i.$$ngfPrevValidFiles||[],b=i.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(y=g(n.$modelValue));var x=l.attrGetter("ngfKeep",i,a);v=(c||[]).slice(0),("distinct"===x||l.attrGetter("ngfKeepDistinct",i,a)===!0)&&p(i,a);var S=!x&&!l.attrGetter("ngfMultiple",i,a)&&!l.attrGetter("multiple",i);if(!x||v.length){l.attrGetter("ngfBeforeModelChange",i,a,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:v,$duplicateFiles:w,$event:u});var C=l.attrGetter("ngfValidateAfterResize",i,a),D=l.attrGetter("ngModelOptions",i,a);l.validate(v,y.length,n,i,a).then(function(){d?f(v,[],c,w,S):(D&&D.allowInvalid||C?k=v:h(),l.attrGetter("ngfFixOrientation",i,a)&&l.isExifSupported()?r(k,i,a).then(function(){m()}):m())})}},l}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,i){function a(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=i.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function r(e,t,n,i,r,s,l,c){function u(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return b("ngfChange")||b("ngfSelect")}function f(t){if(c.shouldUpdateOn("change",n,e)){for(var a=t.__files_||t.target&&t.target.files,r=[],o=0;o<a.length;o++)r.push(a[o]);c.updateModel(i,n,e,d(),r.length?r:null,t)}}function p(e){if(t!==e)for(var n=0;n<t[0].attributes.length;n++){var i=t[0].attributes[n];"type"!==i.name&&"class"!==i.name&&"style"!==i.name&&((null==i.value||""===i.value)&&("required"===i.name&&(i.value="required"),"multiple"===i.name&&(i.value="multiple")),e.attr(i.name,"id"===i.name?"ngf-"+i.value:i.value))}}function g(){if(u())return t;var e=angular.element('<input type="file">');p(e);var n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}function h(n){if(t.attr("disabled"))return!1;if(!b("ngfSelectDisabled",e)){var i=m(n);if(null!=i)return i;v(n);try{u()||document.body.contains(k[0])||(o.push({el:t,ref:k.parent()}),document.body.appendChild(k.parent()[0]),k.bind("change",f))}catch(r){}return a(navigator.userAgent)?setTimeout(function(){k[0].click()},0):k[0].click(),!1}}function m(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return $=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var n=t?t[0].clientY:0;if(Math.abs(n-$)>20)return!1}}function v(t){c.shouldUpdateOn("click",n,e)&&k.val()&&(k.val(null),c.updateModel(i,n,e,d(),null,t,!0))}function y(e){if(k&&!k.attr("__ngf_ie10_Fix_")){if(!k[0].parentNode)return void(k=null);e.preventDefault(),e.stopPropagation(),k.unbind("click");var t=k.clone();return k.replaceWith(t),k=t,k.attr("__ngf_ie10_Fix_","true"),k.bind("change",f),k.bind("click",y),k[0].click(),!1}k.removeAttr("__ngf_ie10_Fix_")}var b=function(e,t){return c.attrGetter(e,n,t)};c.registerModelChangeValidator(i,n,e);var w=[];w.push(e.$watch(b("ngfMultiple"),function(){k.attr("multiple",b("ngfMultiple",e))})),w.push(e.$watch(b("ngfCapture"),function(){k.attr("capture",b("ngfCapture",e))})),w.push(e.$watch(b("ngfAccept"),function(){k.attr("accept",b("ngfAccept",e))})),n.$observe("accept",function(){k.attr("accept",b("accept"))}),w.push(function(){n.$$observers&&delete n.$$observers.accept});var $=0,k=t;u()||(k=g()),k.bind("change",f),u()?t.bind("click",v):t.bind("click touchstart touchend",h),-1!==navigator.appVersion.indexOf("MSIE 10")&&k.bind("click",y),i&&i.$formatters.push(function(e){return(null==e||0===e.length)&&k.val()&&k.val(null),e}),e.$on("$destroy",function(){u()||k.parent().remove(),angular.forEach(w,function(e){e()})}),s(function(){for(var e=0;e<o.length;e++){var t=o[e];document.body.contains(t.el[0])||(o.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,k,f)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(a,o,s,l){r(a,o,s,l,e,t,n,i)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,i,a,r,o,s,l){function c(e){var o=t.attrGetter("ngfNoObjectUrl",r,i);t.dataUrl(e,o)["finally"](function(){n(function(){var t=(o?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;l?a.css("background-image","url('"+(t||"")+"')"):a.attr("src",t),t?a.removeClass("ng-hide"):a.addClass("ng-hide")})})}n(function(){var n=i.$watch(r[o],function(n){var i=s;if("ngfThumbnail"===o&&(i||(i={width:a[0].clientWidth,height:a[0].clientHeight}),0===i.width&&window.getComputedStyle)){var r=getComputedStyle(a[0]);i={width:parseInt(r.width.slice(0,-2)),height:parseInt(r.height.slice(0,-2))}}return angular.isString(n)?(a.removeClass("ng-hide"),l?a.css("background-image","url('"+n+"')"):a.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(a[0]))||l&&0!==n.type.indexOf("image")?a.addClass("ng-hide"):i&&t.isResizeSupported()?t.resize(n,i.width,i.height,i.quality).then(function(e){c(e)},function(e){throw e}):c(n))});i.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var i=e;return i.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),a=0;return angular.forEach(e,function(n){i.dataUrl(n,!0)["finally"](function(){if(a++,a===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return i.dataUrl(e,!0)},i.dataUrl=function(e,a){if(!e)return i.emptyPromise(e,e);if(a&&null!=e.$ngfDataUrl||!a&&null!=e.$ngfBlobUrl)return i.emptyPromise(a?e.$ngfDataUrl:e.$ngfBlobUrl,e);var r=a?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(r)return r;var o=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!a){var r;try{r=n.createObjectURL(e)}catch(s){return void t(function(){e.$ngfBlobUrl="",o.reject()})}t(function(){if(e.$ngfBlobUrl=r,r){o.resolve(r,e),i.blobUrls=i.blobUrls||[],i.blobUrlsTotalSize=i.blobUrlsTotalSize||0,i.blobUrls.push({url:r,size:e.size}),i.blobUrlsTotalSize+=e.size||0;for(var t=i.defaults.blobUrlsMaxMemory||268435456,a=i.defaults.blobUrlsMaxQueueSize||200;(i.blobUrlsTotalSize>t||i.blobUrls.length>a)&&i.blobUrls.length>1;){var s=i.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),i.blobUrlsTotalSize-=s.size}}})}else{var l=new FileReader;l.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,o.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},l.onerror=function(){t(function(){e.$ngfDataUrl="",o.reject()})},l.readAsDataURL(e)}}else t(function(){e[a?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),r=a?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise,r["finally"](function(){delete e[a?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),r},i}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,a,r){t(e,n,i,a,r,"ngfSrc",e.attrGetter("ngfResize",r,i),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,a,r){t(e,n,i,a,r,"ngfBackground",e.attrGetter("ngfResize",r,i),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(i,a,r){var o=e.attrGetter("ngfSize",r,i);t(e,n,i,a,r,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",r,i))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,i,a){if(angular.isString(n))return t.trustAsResourceUrl(n);var r=n&&((i?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!r?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,i)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&r?a?t.trustAsResourceUrl(r):r:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function i(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var a=e.split(",");if(a.length>1)for(var r=0;r<a.length;r++){var o=i(a[r]);o.regexp?(t+="("+o.regexp+")",r<a.length-1&&(t+="|")):n=n.concat(o.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+i(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function a(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var r=e;return r.validatePattern=function(e,t){if(!t)return!0;var n=i(t),a=!0;if(n.regexp&&n.regexp.length){var r=new RegExp(n.regexp,"i");a=null!=e.type&&r.test(e.type)||null!=e.name&&r.test(e.name)}for(var o=n.excludes.length;o--;){var s=new RegExp(n.excludes[o],"i");a=a&&(null==e.type||s.test(e.type))&&(null==e.name||s.test(e.name))}return a},r.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},r.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(i){e.$dirty&&(i&&!angular.isArray(i)&&(i=[i]),r.validate(i,0,e,t,n).then(function(){r.applyModelValidation(e,i)}))})},r.applyModelValidation=function(e,t){a(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},r.getValidationAttr=function(e,t,n,i,a){var o="ngf"+n[0].toUpperCase()+n.substr(1),s=r.attrGetter(o,e,t,{$file:a});if(null==s&&(s=r.attrGetter("ngfValidate",e,t,{$file:a}))){var l=(i||n).split(".");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},r.validate=function(e,n,i,a,o){function s(t,n,s){if(e){for(var l=e.length,c=null;l--;){var u=e[l];if(u){var d=r.getValidationAttr(a,o,t,n,u);null!=d&&(s(u,d,l)||(u.$error=t,(u.$errorMessages=u.$errorMessages||{})[t]=!0,u.$errorParam=d,e.splice(l,1),c=!1))}}null!==c&&i.$ngfValidations.push({name:t,valid:c})}}function l(n,s,l,u,d){function f(e,t,i){null!=i?u(t,i).then(function(a){d(a,i)?e.resolve():(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=i,e.reject())},function(){c("ngfValidateForce",{$file:t})?(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=i,e.reject()):e.resolve()}):e.resolve()}var p=[r.emptyPromise()];return e?(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var i=t.defer();return p.push(i.promise),!l||null!=e.type&&0===e.type.search(l)?void("dimensions"===n&&null!=r.attrGetter("ngfDimensions",a)?r.imageDimensions(e).then(function(t){f(i,e,c("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){i.reject()}):"duration"===n&&null!=r.attrGetter("ngfDuration",a)?r.mediaDuration(e).then(function(t){f(i,e,c("ngfDuration",{$file:e,$duration:t}))},function(){i.reject()}):f(i,e,r.getValidationAttr(a,o,n,s,e))):void i.resolve()}),t.all(p).then(function(){i.$ngfValidations.push({name:n,valid:!0})},function(){i.$ngfValidations.push({name:n,valid:!1})})):void 0}i=i||{},i.$ngfValidations=i.$ngfValidations||[],angular.forEach(i.$ngfValidations,function(e){e.valid=!0});var c=function(e,t){return r.attrGetter(e,a,o,t)};if(null==e||0===e.length)return r.emptyPromise(i);e=void 0===e.length?[e]:e.slice(0),s("maxFiles",null,function(e,t,i){return t>n+i}),s("pattern",null,r.validatePattern),s("minSize","size.min",function(e,t){return e.size+.1>=r.translateScalars(t)}),s("maxSize","size.max",function(e,t){return e.size-.1<=r.translateScalars(t)});var u=0;if(s("maxTotalSize",null,function(t,n){return u+=t.size,u>r.translateScalars(n)?(e.splice(0,e.length),!1):!0}),s("validateFn",null,function(e,t){return t===!0||null===t||""===t}),!e.length)return r.emptyPromise(i,i.$ngfValidations);var d=t.defer(),f=[];return f.push(r.happyPromise(l("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t}))),f.push(r.happyPromise(l("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t}))),f.push(r.happyPromise(l("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t}))),f.push(r.happyPromise(l("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t}))),f.push(r.happyPromise(l("dimensions",null,/image/,function(e,t){return r.emptyPromise(t)},function(e){return e}))),f.push(r.happyPromise(l("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),i=!1,a=0;a<n.length;a++)Math.abs(e.width/e.height-r.ratioToFloat(n[a]))<1e-4&&(i=!0);return i}))),f.push(r.happyPromise(l("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-r.ratioToFloat(t)<1e-4}))),f.push(r.happyPromise(l("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-r.ratioToFloat(t)>-1e-4}))),f.push(r.happyPromise(l("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=r.translateScalars(t)}))),f.push(r.happyPromise(l("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=r.translateScalars(t)}))),f.push(r.happyPromise(l("duration",null,/audio|video/,function(e,t){return r.emptyPromise(t)},function(e){return e}))),f.push(r.happyPromise(l("validateAsyncFn",null,null,function(e,t){return t},function(e){return e===!0||null===e||""===e}))),t.all(f).then(function(){d.resolve(i,i.$ngfValidations)})},r.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var i=t.defer();return n(function(){i.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),i.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var a=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void a.reject("not image"):void r.dataUrl(e).then(function(t){function i(){var t=s[0].clientWidth,n=s[0].clientHeight;s.remove(),e.$ngfWidth=t,e.$ngfHeight=n,a.resolve({width:t,height:n})}function r(){s.remove(),a.reject("load error")}function o(){n(function(){s[0].parentNode&&(s[0].clientWidth?i():l>10?r():o())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");s.on("load",i),s.on("error",r);var l=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){a.reject("load error")})}),e.$ngfDimensionPromise=a.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},r.mediaDuration=function(e){if(e.$ngfDuration){var i=t.defer();return n(function(){i.resolve(e.$ngfDuration)}),i.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var a=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void a.reject("not media"):void r.dataUrl(e).then(function(t){function i(){var t=s[0].duration;e.$ngfDuration=t,s.remove(),a.resolve(t)}function r(){s.remove(),a.reject("load error")}function o(){n(function(){s[0].parentNode&&(s[0].duration?i():l>10?r():o())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",i),s.on("error",r);var l=0;o(),angular.element(document.body).append(s)},function(){a.reject("load error")})}),e.$ngfDurationPromise=a.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},r}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,i=function(e,t,n,i,a){var r=a?Math.max(n/e,i/t):Math.min(n/e,i/t);return{width:e*r,height:t*r,marginX:e*r-n,marginY:t*r-i}},a=function(e,a,r,o,s,l,c,u){var d=t.defer(),f=document.createElement("canvas"),p=document.createElement("img");return p.onload=function(){if(null!=u&&u(p.width,p.height)===!1)return void d.reject("resizeIf");try{if(l){var e=n.ratioToFloat(l),t=p.width/p.height;e>t?(a=p.width,r=a/e):(r=p.height,a=r*e)}a||(a=p.width),r||(r=p.height);var g=i(p.width,p.height,a,r,c);f.width=Math.min(g.width,a),f.height=Math.min(g.height,r);var h=f.getContext("2d");h.drawImage(p,Math.min(0,-g.marginX/2),Math.min(0,-g.marginY/2),g.width,g.height),d.resolve(f.toDataURL(s||"image/WebP",o||.934))}catch(m){d.reject(m)}},p.onerror=function(){d.reject()},p.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var i=e.split(","),a=i[0].match(/:(.*?);/)[1],r=atob(i[1]),o=r.length,s=new Uint8Array(o);o--;)s[o]=r.charCodeAt(o);var l=new window.Blob([s],{type:a});return l.name=t,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,i,r,o,s,l,c,u,d){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var f=t.defer();return n.dataUrl(e,!0).then(function(t){a(t,i,r,o,s||e.type,l,c,u).then(function(i){if("image/jpeg"===e.type&&d)try{i=n.restoreExif(t,i)}catch(a){setTimeout(function(){throw a},1)}try{var r=n.dataUrltoBlob(i,e.name,e.size);f.resolve(r)}catch(a){f.reject(a)}},function(t){"resizeIf"===t&&f.resolve(e),f.reject(t)})},function(e){f.reject(e)}),f.promise},n}]),function(){function e(e,n,i,a,r,o,s,l,c,u){function d(){return n.attr("disabled")||v("ngfDropDisabled",e)}function f(t,n){l.updateModel(a,i,e,v("ngfChange")||v("ngfDrop"),t,n)}function p(t,n){if(!l.shouldUpdateOn(t,i,e)||!n)return l.rejectPromise([]);var a=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){a.push(n)});var r=[],o=[];if(a.length){angular.forEach(a,function(e){r.push(l.urlToBlob(e).then(function(e){o.push(e)}))});var s=u.defer();return u.all(r).then(function(){s.resolve(o)},function(e){s.reject(e)}),s.promise}return l.emptyPromise()}function g(e,t,n,i){var a=v("ngfDragOverClass",e,{$event:n}),r="dragover";if(angular.isString(a))r=a;else if(a&&(a.delay&&($=a.delay),a.accept||a.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var s=a.pattern||v("ngfPattern",e,{$event:n}),c=o.length;c--;){if(!l.validatePattern(o[c],s)){r=a.reject;break}r=a.accept}else r=a.accept}i(r)}function h(t,n,a,r){function o(e,t){var n=u.defer();if(null!=e)if(e.isDirectory){var i=[l.emptyPromise()];if(f){var a={type:"directory"};a.name=a.path=(t||"")+e.name+e.name,p.push(a)}var r=e.createReader(),s=[],h=function(){r.readEntries(function(a){try{a.length?(s=s.concat(Array.prototype.slice.call(a||[],0)),h()):(angular.forEach(s.slice(0),function(n){p.length<=c&&d>=g&&i.push(o(n,(t?t:"")+e.name+"/"))}),u.all(i).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(r){n.reject(r)}},function(e){n.reject(e)})};h()}else e.file(function(e){try{e.path=(t?t:"")+e.name,f&&(e=l.rename(e,e.path)),p.push(e),g+=e.size,n.resolve()}catch(i){n.reject(i)}},function(e){n.reject(e)});return n.promise}var c=l.getValidationAttr(i,e,"maxFiles")||Number.MAX_VALUE,d=l.getValidationAttr(i,e,"maxTotalSize")||Number.MAX_VALUE,f=v("ngfIncludeDir",e),p=[],g=0,h=[l.emptyPromise()];if(t&&t.length>0&&"file"!==s.protocol())for(var m=0;m<t.length;m++){if(t[m].webkitGetAsEntry&&t[m].webkitGetAsEntry()&&t[m].webkitGetAsEntry().isDirectory){var y=t[m].webkitGetAsEntry();if(y.isDirectory&&!a)continue;null!=y&&h.push(o(y))}else{var b=t[m].getAsFile();null!=b&&(p.push(b),g+=b.size)}if(p.length>c||g>d||!r&&p.length>0)break}else if(null!=n)for(var w=0;w<n.length;w++){var $=n.item(w);if(($.type||$.size>0)&&(p.push($),g+=$.size),p.length>c||g>d||!r&&p.length>0)break}var k=u.defer();return u.all(h).then(function(){if(r||f||!p.length)k.resolve(p);else{for(var e=0;p[e]&&"directory"===p[e].type;)e++;k.resolve([p[e]])}},function(e){k.reject(e)}),k.promise}var m=t(),v=function(e,t,n){return l.attrGetter(e,i,t,n)};if(v("dropAvailable")&&o(function(){e[v("dropAvailable")]?e[v("dropAvailable")].value=m:e[v("dropAvailable")]=m}),!m)return void(v("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));null==v("ngfSelect")&&l.registerModelChangeValidator(a,i,e);var y,b=null,w=r(v("ngfStopPropagation")),$=1;n[0].addEventListener("dragover",function(t){if(!d()&&l.shouldUpdateOn("drop",i,e)){if(t.preventDefault(),w(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var a=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===a||"linkMove"===a?"move":"copy"}o.cancel(b),y||(y="C",g(e,i,t,function(i){y=i,n.addClass(y),v("ngfDrag",e,{$isDragging:!0,$class:y,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),w(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&l.shouldUpdateOn("drop",i,e)&&(t.preventDefault(),
w(e)&&t.stopPropagation(),b=o(function(){y&&n.removeClass(y),y=null,v("ngfDrag",e,{$isDragging:!1,$event:t})},$||100))},!1),n[0].addEventListener("drop",function(t){if(!d()&&l.shouldUpdateOn("drop",i,e)){t.preventDefault(),w(e)&&t.stopPropagation(),y&&n.removeClass(y),y=null;var a,r=t.dataTransfer.items;try{a=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html")}catch(o){}h(r,t.dataTransfer.files,v("ngfAllowDir",e)!==!1,v("multiple")||v("ngfMultiple",e)).then(function(e){e.length?f(e,t):p("dropUrl",a).then(function(e){f(e,t)})})}},!1),n[0].addEventListener("paste",function(t){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&l.shouldUpdateOn("paste",i,e)){var n=[],a=t.clipboardData||t.originalEvent.clipboardData;if(a&&a.items)for(var r=0;r<a.items.length;r++)-1!==a.items[r].type.indexOf("image")&&n.push(a.items[r].getAsFile());n.length?f(n,t):p("pasteUrl",a).then(function(e){f(e,t)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(t,n,i,a,r,o){return{restrict:"AEC",require:"?ngModel",link:function(s,l,c,u){e(s,l,c,u,t,n,i,a,r,o)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,i){return function(a,r,o){if(t()){var s=e(i.attrGetter("ngfDropAvailable",o));n(function(){s(a),s.assign&&s.assign(a,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,i){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,i);case 4:return e.transform(1,0,0,-1,0,i);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,i,0);case 7:return e.transform(0,-1,-1,0,i,n);case 8:return e.transform(0,-1,1,0,0,n)}}function i(e){for(var t="",n=new Uint8Array(e),i=n.byteLength,a=0;i>a;a++)t+=String.fromCharCode(n[a]);return window.btoa(t)}var a=e;return a.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&a.isResizeSupported()},a.readOrientation=function(e){var n=t.defer(),i=new FileReader,a=e.slice?e.slice(0,65536):e;return i.readAsArrayBuffer(a),i.onerror=function(e){return n.reject(e)},i.onload=function(e){var t={orientation:1},i=new DataView(this.result);if(65496!==i.getUint16(0,!1))return n.resolve(t);for(var a=i.byteLength,r=2;a>r;){var o=i.getUint16(r,!1);if(r+=2,65505===o){if(1165519206!==i.getUint32(r+=2,!1))return n.resolve(t);var s=18761===i.getUint16(r+=6,!1);r+=i.getUint32(r+4,s);var l=i.getUint16(r,s);r+=2;for(var c=0;l>c;c++)if(274===i.getUint16(r+12*c,s)){var u=i.getUint16(r+12*c+8,s);return u>=2&&8>=u&&(i.setUint16(r+12*c+8,1,s),t.fixedArrayBuffer=e.target.result),t.orientation=u,n.resolve(t)}}else{if(65280!==(65280&o))break;r+=i.getUint16(r,!1)}}return n.resolve(t)},n.promise},a.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return a.emptyPromise(e);var r=t.defer();return a.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?r.resolve(e):void a.dataUrl(e,!0).then(function(o){var s=document.createElement("canvas"),l=document.createElement("img");l.onload=function(){try{s.width=t.orientation>4?l.height:l.width,s.height=t.orientation>4?l.width:l.height;var o=s.getContext("2d");n(o,t.orientation,l.width,l.height),o.drawImage(l,0,0);var c=s.toDataURL(e.type||"image/WebP",.934);c=a.restoreExif(i(t.fixedArrayBuffer),c);var u=a.dataUrltoBlob(c,e.name);r.resolve(u)}catch(d){return r.reject(d)}},l.onerror=function(){r.reject()},l.src=o},function(e){r.reject(e)})},function(e){r.reject(e)}),r.promise},a.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,i,a,r,o="",s="",l="",c=0;do t=e[c++],n=e[c++],s=e[c++],i=t>>2,a=(3&t)<<4|n>>4,r=(15&n)<<2|s>>6,l=63&s,isNaN(n)?r=l=64:isNaN(s)&&(l=64),o=o+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(l),t=n=s="",i=a=r=l="";while(c<e.length);return o},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),i=this.slice2Segments(n),a=this.exifManipulation(t,i);return"data:image/jpeg;base64,"+this.encode64(a)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),i=this.insertExif(e,n);return new Uint8Array(i)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255===t[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),i=this.decode64(n),a=i.indexOf(255,3),r=i.slice(0,a),o=i.slice(a),s=r;return s=s.concat(t),s=s.concat(o)},n.slice2Segments=function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var i=256*e[t+2]+e[t+3],a=t+i+2,r=e.slice(t,a);n.push(r),t=a}if(t>e.length)break}return n},n.decode64=function(e){var t,n,i,a,r,o="",s="",l=0,c=[],u=/[^A-Za-z0-9\+\/\=]/g;u.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=this.KEY_STR.indexOf(e.charAt(l++)),a=this.KEY_STR.indexOf(e.charAt(l++)),r=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=i<<2|a>>4,n=(15&a)<<4|r>>2,o=(3&r)<<6|s,c.push(t),64!==r&&c.push(n),64!==s&&c.push(o),t=n=o="",i=a=r=s="";while(l<e.length);return c},n.restore(e,t)},a}]),angular.module("objectTable",[]).directive("contenteditable",function(){return{restrict:"A",require:["ngModel","^objectTable"],link:function(e,t,n,i){var a=i[0],r=i[1];a.$render=function(){t.html(a.$viewValue||"")},t.bind("change blur",function(){var n=a.$viewValue.toString(),i=t.text();n!==i&&(e.$apply(function(){a.$setViewValue(i)}),r.onEdit&&"function"==typeof r.onEdit&&r.onEdit({$oldValue:n,$newValue:i}))})}}}),angular.module("objectTable").directive("objectTable",["$compile","$interpolate",function(e,t){return{restrict:"A",replace:!0,templateUrl:"/src/templates/common.html",controller:"objectTableCtrl",controllerAs:"ctrl",transclude:!0,scope:{data:"=",display:"=?",resize:"=?",paging:"=?",fromUrl:"@",sortingType:"@?sorting",editable:"&?",onEdit:"&?",select:"@?",selectedModel:"=?",dragColumns:"=?",addBtn:"="},compile:function(e,t){var n="",i="";return t.addFilter&&(n+=t.addFilter),"false"!==t.sorting&&(n+="| orderBy:sortingArray"),t.dragColumns&&e.find("th").attr("allow-drag",""),"separate"===t.search?t.fields.split(",").forEach(function(e,t){n+="| filter:{'"+e.trim()+"':columnSearch['"+e+"']}"}):"undefined"!=typeof t.search&&"true"!==t.search||(n+="| filter:globalSearch"),i+=" | offset: currentPage:display |limitTo: display",e[0].querySelector("#rowTr").setAttribute("ng-repeat","item in $parent.$filtered = (data"+n+")"+i),e.find("paging").attr("count","$filtered.length"),function(e,t,a,r,o){e.addBtn?(e.addBtnShow=!0,e.addClick=function(){e.addBtn()}):e.addBtnShow=!1,r._init(),o(e,function(t,a){e.$owner=a.$parent;for(var o in t)if(t.hasOwnProperty(o))switch(t[o].tagName){case"THEAD":r._addHeaderPattern(t[o]);break;case"TBODY":e.findBody=!0,r._addRowPattern(t[o],n,i);break;case"TFOOT":r._addFooterPattern(t[o])}})}}}}]),angular.module("objectTable").directive("allowDrag",function(){return{restrict:"A",controller:function(){},compile:function(e,t){function n(e,t){var n=e[0].parentNode.querySelector("."+t);n&&n.classList.remove(t)}return function(e,t,i,a){t.attr("draggable",!0),t.bind("dragstart",function(e){a.target=this,this.classList.add("dragged");var t=e.originalEvent||e;t.dataTransfer.setData("text",a.target.cellIndex)}),t.bind("dragover",function(e){e.preventDefault()}),t.bind("dragenter",function(e){a.toTarget=this,this.classList.contains("draggedOver")||this.classList.contains("dragged")||this.classList.add("draggedOver"),e.preventDefault(),e.stopPropagation()}),t.bind("dragend",function(e){this.classList.contains("dragged")&&this.classList.remove("dragged"),e.preventDefault()}),t.bind("dragleave",function(e){this.classList.remove("draggedOver")}),t.bind("drop",function(e){var i=a.toTarget.cellIndex,r=e.originalEvent||e,o=parseInt(r.dataTransfer.getData("text"),10);n(t,"dragged"),n(t,"draggedOver"),t.parent().controller("objectTable").changeColumnsOrder(i,o),e.preventDefault()})}}}}),angular.module("objectTable").controller("objectTableCtrl",["$scope","$timeout","$element","$attrs","$http","$compile","$controller","objectTableUtilService",function(e,t,n,i,a,r,o,s){o("objectTableSortingCtrl",{$scope:e});var l=this;this._init=function(){e.headers=[],e.fields=[],e.display=e.display||5,e.paging=angular.isDefined(e.paging)?e.paging:!0,e.sortingType=e.sortingType||"simple",e.currentPage=0,e.customHeader=!1,"separate"==i.search?(e.search="separate",e.columnSearch=[]):e.search="undefined"==typeof i.search||"true"===i.search,e.headers=s.getArrayFromParams(i.headers,"headers"),e.fields=s.getArrayFromParams(i.fields,"fields"),i.fromUrl&&this._loadExternalData(i.fromUrl),e.onEdit&&(this.onEdit=e.onEdit),e.selectedModel="multiply"===e.select?[]:{}},this.onEdit=e.onEdit,this._loadExternalData=function(t){e.dataIsLoading=!0,a.get(t).then(function(t){e.data=t.data,e.dataIsLoading=!1})},this._addHeaderPattern=function(t){e.customHeader=!0,Array.prototype.forEach.call(t.querySelectorAll("[allow-drag]"),function(e,t){e.setAttribute("index",t)}),t.removeAttribute("ng-non-bindable"),n.find("table").prepend(t)},this._addFooterPattern=function(e){n.find("table").prepend(e)},this._addRowPattern=function(t,i,a){this._checkEditableContent(t),this._addRepeatToRow(t,i,a),t.removeAttribute("ng-non-bindable"),n.find("table").append(t.outerHTML),this.bodyTemplate=t.innerHTML,r(n.find("tbody"))(e)},this._addRepeatToRow=function(e,t,n){var i=angular.element(e).find("tr");i.attr("ng-repeat","item in $filtered = (data"+t+")"+n),i.attr("ng-click")||i.attr("ng-click","setSelected(item)"),i.attr("ng-class","{'selected-row':ifSelected(item)}")},this._checkEditableContent=function(e){var t,n=/\{\{:*:*(.*?)\}\}/g;Array.prototype.forEach.call(e.querySelectorAll("[editable]"),function(e){t=e.innerHTML.replace(n,"$1"),e.innerHTML="<div contentEditable ng-model='"+t+"'>{{"+t+"}}</div>"})},this.setCurrentPage=function(t){e.currentPage=t},e.setSelected=function(t){"multiply"===e.select?l._containsInSelectArray(t)?e.selectedModel.splice(e.selectedModel.indexOf(t),1):e.selectedModel.push(t):e.selectedModel=t},this._containsInSelectArray=function(t){return e.selectedModel.length?e.selectedModel.filter(function(e){return angular.equals(e,t)}).length>0:void 0},e.ifSelected=function(t){return e.selectedModel&&"multiply"===e.select?l._containsInSelectArray(t):t.$$hashKey==e.selectedModel.$$hashKey},this.changeColumnsOrder=function(t,i){e.$apply(function(){if(e.fields.swap(t,i),e.headers.swap(t,i),e.columnSearch&&e.columnSearch.swap(t,i),l.bodyTemplate){var a=angular.element(l.bodyTemplate).children(),o=document.createElement("tr"),s=document.createElement("tbody"),c=n.find("tbody").find("tr")[0].attributes;Array.prototype.swap.apply(a,[t,i]),[].forEach.call(c,function(e,t){o.setAttribute(e.name,e.value)});for(var u=0,d=a.length;d>u;u++)o.appendChild(a[u]);s.appendChild(o),n.find("tbody").replaceWith(s),l.bodyTemplate=s.innerHTML,r(n.find("tbody"))(e)}if(e.customHeader){var f=n.find("th"),o=document.createElement("tr"),p=document.createElement("thead");Array.prototype.swap.apply(f,[t,i]);for(var u=0,d=f.length;d>u;u++)o.appendChild(f[u]);p.appendChild(o),n.find("thead").replaceWith(p)}l.pageCtrl&&l.pageCtrl.setPage(0)})},e.setCurrentPageForPageCtrl=function(e){l.pageCtrl&&l.pageCtrl.setPage(e)}}]),angular.module("objectTable").filter("offset",function(){return function(e,t,n){if(e){t=parseInt(t,10),n=parseInt(n,10);var i=t*n;return e.slice(i,i+n)}}}),angular.module("objectTable").controller("pagingTableCtrl",["$scope","$element","$attrs",function(e,t,n){e.currentPage=0,e.prevPage=function(){e.currentPage>0&&e.currentPage--,e.setCurrentPageToTable()},e.nextPage=function(){e.currentPage<e.pageCount()&&e.currentPage++,e.setCurrentPageToTable()},e.setCurrentPageToTable=function(){e.objectTableCtrl.setCurrentPage(e.currentPage)},e.prevPageDisabled=function(){return 0===e.currentPage?"disabled":""},e.pageCount=function(){return e.count>0?Math.ceil(e.count/e.display)-1:0},e.nextPageDisabled=function(){return e.currentPage===e.pageCount()?"disabled":""},e.setPage=function(t){e.currentPage=t,e.setCurrentPageToTable()},e.range=function(){var t=e.pageCount()+1<5?e.pageCount()+1:5,n=[],i=e.currentPage;i>e.pageCount()-t&&(i=e.pageCount()-t+1);for(var a=i;i+t>a;a++)n.push(a);return n}}]),angular.module("objectTable").controller("objectTableSortingCtrl",["$scope",function(e){function t(e){r&&(n.width=a+(e.pageX-i))}e.sort={fields:[],reverse:[]},e.sortingArray=[],e.sortBy=function(t){if(o)return void(o=!1);if(e.data.length){var n=e.headers[e.fields.indexOf(t)];"compound"==e.sortingType?-1==e.sort.fields.indexOf(n)?(e.sort.fields.push(n),e.sortingArray.push(t),e.sort.reverse.push(!1)):e.changeReversing(t,e.sort.fields.indexOf(n)):"simple"==e.sortingType&&(e.sort.fields=[n],e.changeReversing(t))}},e.changeReversing=function(t,n){"compound"==e.sortingType?(e.sort.reverse[n]=!e.sort.reverse[n],e.sortingArray[n]=e.sort.reverse[n]?"-"+t:t):"simple"==e.sortingType&&(e.sort.reverse[0]=!e.sort.reverse[0],e.sortingArray=e.sort.reverse[0]?[t]:["-"+t])},e.headerIsSortedClass=function(t){if(e.sortingArray.length)if("simple"==e.sortingType){if(t==e.sort.fields[0]||"-"+t==e.sort.fields[0])return e.sort.reverse[0]?"table-sort-down":"table-sort-up"}else if("compound"==e.sortingType){var n=e.sort.fields.indexOf(t);if(-1!=n)return e.sort.reverse[n]?"table-sort-down":"table-sort-up"}},e.removeSorting=function(){var t=e.sort.fields.indexOf(this.sortField);t>-1&&(e.sort.fields.splice(t,1),e.sort.reverse.splice(t,1),e.sortingArray.splice(t,1)),t=null};var n,i,a,r=!1,o=!1;e.resizeStart=function(e){var o=e.target?e.target:e.srcElement;o.classList.contains("resize")&&(n=o.parentNode,r=!0,i=e.pageX,a=o.parentNode.offsetWidth,document.addEventListener("mousemove",t),e.stopPropagation(),e.preventDefault())},e.resizeEnd=function(e){r&&(document.removeEventListener("mousemove",t),e.stopPropagation(),e.preventDefault(),r=!1,o=!0)}}]),angular.module("objectTable").service("objectTableUtilService",[function(){return Array.prototype.swap=function(e,t){if(e>=this.length)for(var n=e-this.length;n--+1;)this.push(void 0);return this.splice(e,0,this.splice(t,1)[0]),this},{getArrayFromParams:function(e,t){if(!e)throw"Required '"+t+"' attribute is not found!";for(var n=[],i=e.split(","),a=0,r=i.length;r>a;a++)n.push(i[a].trim());return n}}}]),angular.module("objectTable").directive("paging",["$compile","$interpolate",function(e,t){return{restrict:"E",replace:!0,templateUrl:"/src/templates/paging.html",controller:"pagingTableCtrl",require:"^objectTable",scope:{count:"=",display:"="},link:function(e,t,n,i){e.objectTableCtrl=i,e.objectTableCtrl.pageCtrl=e}}}]),angular.module("objectTable").run(["$templateCache",function(e){e.put("/src/templates/common.html",'<div class="object-table-module"><!--搜索框--><div class="form-group col-xs-12 col-sm-6 col-md-4" ng-if="search && \'separate\'!=search"><input type="text" placeholder="搜索内容" ng-model="$parent.globalSearch" class="row form-control search" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="setCurrentPageForPageCtrl(0)"></div><div class="col-xs-12 col-sm-6 col-md-8" ng-if="addBtnShow"><button ng-click="addClick()" class="row btn btn-primary pull-right"><i class="glyphicon glyphicon-plus"></i>&nbsp;新建</button></div><div class="col-xs-12 col-sm-6 col-md-8 sorting-container"><div ng-if="sortingType && sort.fields.length">Sorting:<div ng-repeat="sortField in sort.fields" class="sorting-badge"><span class="glyphicon" ng-class="{\'glyphicon-chevron-down\':sort.reverse[$index], \'glyphicon-chevron-up\':!sort.reverse[$index]}"></span> {{::sortField}} <span class="glyphicon glyphicon-remove close" ng-click="removeSorting()"></span></div></div></div><div class="back-cover"><table class="table table-responsive table-bordered object-table" ng-mousedown="resizeStart($event)" ng-mouseup="resizeEnd($event)"><thead ng-if="!customHeader"><tr><th ng-repeat="head in headers track by $index" ng-click="sortBy(fields[$index])" ng-class="headerIsSortedClass(head)" class="sortable">{{head}}<div ng-if="resize" class="resize"></div></th></tr></thead><thead ng-if="!customHeader&& \'separate\'===search"><tr><th ng-repeat="head in headers track by $index" class="separate"><i class="glyphicon glyphicon-search search_icon separate"></i> <input type="text" ng-model="columnSearch[fields[$index]]" placeholder="{{head}}..." class="form-control search separate" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="setCurrentPageForPageCtrl(0)"></th></tr></thead><tbody ng-if="!findBody"><tr id="rowTr" ng-click="setSelected(item)" ng-class="{\'selected-row\':ifSelected(item)}"><!-- <= will inject ng-repeat --><!-- params: headers and fields --><td ng-if="!editable" ng-repeat="field in fields">{{item[field]}}</td><td ng-if="editable" editable ng-repeat="field in fields"><div contenteditable ng-model="item[field]">{{item[field]}}</div></td></tr></tbody></table></div><div class="loading" ng-show="dataIsLoading"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading Data...</div><paging ng-if="paging" data-display="display" count="$filtered.length" class="row" ng-hide="dataIsLoading"></paging><div class="clearfix"></div></div>'),e.put("/src/templates/paging.html",'<div><div class="col-xs-12 text-center"><nav ng-hide="pageCount()==0"><ul class="pagination"><li ng-class="prevPageDisabled()"><a href ng-click="prevPage()">上一页</a></li><li ng-repeat="n in range()" ng-class="{active: n == currentPage}" ng-click="setPage(n)"><a href="javascript:void(0)">{{::n+1}}</a></li><li ng-class="nextPageDisabled()"><a href ng-click="nextPage()">下一页</a></li></ul></nav></div><!--<div class="col-xs-3">--><!--<span class="label count">{{count}} <span>条</span></span>--><!--</div>--></div>')}]),function(){angular.module("template/treeGrid/treeGrid.html",[]).run(["$templateCache",function(e){e.put("template/treeGrid/treeGrid.html",'<div class="table-responsive">\n <table class="table tree-grid">\n   <thead>\n     <tr>\n       <th><a abc=\'dddd\' ng-if="expandingProperty.sortable" ng-click="sortBy(expandingProperty)">{{expandingProperty.displayName || expandingProperty.field || expandingProperty}}</a><span ng-if="!expandingProperty.sortable">{{expandingProperty.displayName || expandingProperty.field || expandingProperty}}</span><i ng-if="expandingProperty.sorted" class="{{expandingProperty.sortingIcon}} pull-right"></i></th>\n       <th ng-repeat="col in colDefinitions"><a ng-if="col.sortable" ng-click="sortBy(col)">{{col.displayName || col.field}}</a><span ng-if="!col.sortable">{{col.displayName || col.field}}</span><i ng-if="col.sorted" class="{{col.sortingIcon}} pull-right"></i></th>\n     </tr>\n   </thead>\n   <tbody>\n     <tr ng-repeat="row in tree_rows | searchFor:$parent.filterString:expandingProperty:colDefinitions track by row.branch.uid"\n       ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\')" class="tree-grid-row">\n       <td><a ng-click="user_clicks_branch(row.branch)">           <i ng-class="row.tree_icon"\n              ng-click="row.branch.expanded = !row.branch.expanded"\n              class="indented tree-icon"></i>           </a><span class="indented tree-label" ng-click="on_user_click(row.branch)">\n             {{row.branch[expandingProperty.field] || row.branch[expandingProperty]}}</span>\n       </td>\n       <td ng-repeat="col in colDefinitions">\n         <div ng-if="col.cellTemplate" compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></div>\n         <div ng-if="!col.cellTemplate">{{row.branch[col.field]}}</div>\n       </td>\n     </tr>\n   </tbody>\n </table>\n</div>\n')}]),angular.module("treeGrid",["template/treeGrid/treeGrid.html"]).directive("compile",["$compile",function(e){return{restrict:"A",link:function(t,n,i){t.cellTemplateScope=t.$eval(i.cellTemplateScope),t.$watch(i.compile,function(i){var a=e(i),r=a(t);n.append(r)})}}}]).directive("treeGrid",["$timeout","treegridTemplate",function(e,t){return{restrict:"E",templateUrl:function(e,n){return n.templateUrl||t.getPath()},replace:!0,scope:{treeData:"=",colDefs:"=",expandOn:"=",onSelect:"&",onClick:"&",initialSelection:"@",treeControl:"="},link:function(t,n,i){var a,r,o,s,l,c,u,d,f,p,g,h;if(a=function(e){console.log("ERROR:"+e)},i.iconExpand=i.iconExpand?i.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus",i.iconCollapse=i.iconCollapse?i.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",i.iconLeaf=i.iconLeaf?i.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",i.sortedAsc=i.sortedAsc?i.sortedAsc:"icon-file  glyphicon glyphicon-chevron-up  fa angle-up",i.sortedDesc=i.sortedDesc?i.sortedDesc:"icon-file  glyphicon glyphicon-chevron-down  fa angle-down",i.expandLevel=i.expandLevel?i.expandLevel:"3",s=parseInt(i.expandLevel,10),!t.treeData)return void alert("No data was defined for the tree, please define treeData!");var m=function(){if(i.expandOn)r=t.expandOn,t.expandingProperty=t.expandOn;else if(t.treeData.length){for(var e=t.treeData[0],n=Object.keys(e),a=0,o=n.length;o>a;a++)if("string"==typeof e[n[a]]){r=n[a];break}r||(r=n[0]),t.expandingProperty=r}};if(m(),i.colDefs)t.colDefinitions=t.colDefs;else if(t.treeData.length){var v=[],y=t.treeData[0],b=["children","level","expanded",r];for(var w in y)-1===b.indexOf(w)&&v.push({field:w});t.colDefinitions=v}c=function(e){var n,i,a,r,o,s;for(n=function(t,i){var a,r,o,s,l;if(e(t,i),null!=t.children){for(s=t.children,l=[],r=0,o=s.length;o>r;r++)a=s[r],l.push(n(a,i+1));return l}},o=t.treeData,s=[],a=0,r=o.length;r>a;a++)i=o[a],s.push(n(i,1));return s},g=null,p=function(n){if(!n)return null!=g&&(g.selected=!1),void(g=null);if(n!==g){if(null!=g&&(g.selected=!1),n.selected=!0,g=n,o(n),null!=n.onSelect)return e(function(){return n.onSelect(n)});if(null!=t.onSelect)return e(function(){return t.onSelect({branch:n})})}},t.on_user_click=function(e){t.onClick&&t.onClick({branch:e})},t.user_clicks_branch=function(e){return e!==g?p(e):void 0},t.sortBy=function(e){"asc"===e.sortDirection?($(t.treeData,e,!0),e.sortDirection="desc",e.sortingIcon=i.sortedDesc):($(t.treeData,e,!1),e.sortDirection="asc",e.sortingIcon=i.sortedAsc),e.sorted=!0,x(e)};var $=function(e,t,n){e.sort(k(t,n));for(var i=0;i<e.length;i++)$(e[i].children,t,n)},k=function(e,t){var n=t?-1:1;if("custom"===e.sortingType&&"function"==typeof e.sortingFunc)return function(t,i){return e.sortingFunc(t,i)*n};var i=function(t){return null===t[e.field]?"":t[e.field].toLowerCase()};switch(e.sortingType){case"number":i=function(t){return parseFloat(t[e.field])};break;case"date":i=function(t){return new Date(t[e.field])}}return function(e,t){return e=i(e),t=i(t),n*((e>t)-(t>e))}},x=function(e){for(var n=t.colDefinitions.length,i=0;n>i;i++){var a=t.colDefinitions[i];a.field!=e.field&&(a.sorted=!1,a.sortDirection="none")}};return u=function(e){var t;return t=void 0,e.parent_uid&&c(function(n){return n.uid===e.parent_uid?t=n:void 0}),t},l=function(e,t){var n;return n=u(e),null!=n?(t(n),l(n,t)):void 0},o=function(e){return l(e,function(e){return e.expanded=!0})},t.tree_rows=[],f=function(){m();var e,n,a,o,s,l;for(c(function(e,t){return e.uid?void 0:e.uid=""+Math.random()}),c(function(e){var t,n,i,a,r;if(angular.isArray(e.children)){for(a=e.children,r=[],n=0,i=a.length;i>n;n++)t=a[n],r.push(t.parent_uid=e.uid);return r}}),t.tree_rows=[],c(function(e){var t,n;return e.children?e.children.length>0?(n=function(e){return"string"==typeof e?{label:e,children:[]}:e},e.children=function(){var i,a,r,o;for(r=e.children,o=[],i=0,a=r.length;a>i;i++)t=r[i],o.push(n(t));return o}()):void 0:e.children=[]}),e=function(n,a,o){var s,l,c,u,d,f,p;null==a.expanded&&(a.expanded=!1);var g=a.type;if("person"==g?a.children&&0!==a.children.length||(c="glyphicon glyphicon-user"):c=a.children&&0!==a.children.length?a.expanded?i.iconCollapse:i.iconExpand:i.iconLeaf,a.level=n,t.tree_rows.push({level:n,branch:a,label:a[r],tree_icon:c,visible:o}),null!=a.children){for(f=a.children,p=[],u=0,d=f.length;d>u;u++)s=f[u],l=o&&a.expanded,p.push(e(n+1,s,l));return p}},s=t.treeData,l=[],a=0,o=s.length;o>a;a++)n=s[a],l.push(e(1,n,!0));return l},t.$watch("treeData",f,!0),null!=i.initialSelection&&c(function(t){return t.label===i.initialSelection?e(function(){return p(t)}):void 0}),d=t.treeData.length,c(function(e,t){return e.level=t,e.expanded=e.level<s}),null!=t.treeControl&&angular.isObject(t.treeControl)?(h=t.treeControl,h.expand_all=function(){return c(function(e,t){return e.expanded=!0})},h.collapse_all=function(){return c(function(e,t){return e.expanded=!1})},h.get_first_branch=function(){return d=t.treeData.length,d>0?t.treeData[0]:void 0},h.select_first_branch=function(){var e;return e=h.get_first_branch(),h.select_branch(e)},h.get_selected_branch=function(){return g},h.get_parent_branch=function(e){return u(e)},h.select_branch=function(e){return p(e),e},h.get_children=function(e){return e.children},h.select_parent_branch=function(e){var t;return null==e&&(e=h.get_selected_branch()),null!=e&&(t=h.get_parent_branch(e),null!=t)?(h.select_branch(t),t):void 0},h.add_branch=function(e,n){return null!=e?(e.children.push(n),e.expanded=!0):t.treeData.push(n),n},h.add_root_branch=function(e){return h.add_branch(null,e),e},h.expand_branch=function(e){return null==e&&(e=h.get_selected_branch()),null!=e?(e.expanded=!0,e):void 0},h.collapse_branch=function(e){return null==e&&(e=g),null!=e?(e.expanded=!1,e):void 0},h.get_siblings=function(e){var n,i;return null==e&&(e=g),null!=e?(n=h.get_parent_branch(e),i=n?n.children:t.treeData):void 0},h.get_next_sibling=function(e){var t,n;return null==e&&(e=g),null!=e&&(n=h.get_siblings(e),d=n.length,t=n.indexOf(e),d>t)?n[t+1]:void 0},h.get_prev_sibling=function(e){var t,n;return null==e&&(e=g),n=h.get_siblings(e),d=n.length,t=n.indexOf(e),t>0?n[t-1]:void 0},h.select_next_sibling=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_next_sibling(e),null!=t)?h.select_branch(t):void 0},h.select_prev_sibling=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_prev_sibling(e),null!=t)?h.select_branch(t):void 0},h.get_first_child=function(e){var t;return null==e&&(e=g),null!=e&&(null!=(t=e.children)?t.length:void 0)>0?e.children[0]:void 0},h.get_closest_ancestor_next_sibling=function(e){var t,n;return t=h.get_next_sibling(e),null!=t?t:(n=h.get_parent_branch(e),h.get_closest_ancestor_next_sibling(n))},h.get_next_branch=function(e){var t;return null==e&&(e=g),null!=e?(t=h.get_first_child(e),null!=t?t:t=h.get_closest_ancestor_next_sibling(e)):void 0},h.select_next_branch=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_next_branch(e),null!=t)?(h.select_branch(t),t):void 0},h.last_descendant=function(e){var t;return d=e.children.length,0===d?e:(t=e.children[d-1],h.last_descendant(t))},h.get_prev_branch=function(e){var t,n;return null==e&&(e=g),null!=e?(n=h.get_prev_sibling(e),null!=n?h.last_descendant(n):t=h.get_parent_branch(e)):void 0},h.select_prev_branch=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_prev_branch(e),null!=t)?(h.select_branch(t),t):void 0}):void 0}}}]).provider("treegridTemplate",function(){var e="template/treeGrid/treeGrid.html";this.setPath=function(t){e=t},this.$get=function(){return{getPath:function(){return e}}}}).filter("searchFor",function(){function e(e,n,i,a){var r=!1,o=!1;i.filterable&&(o=!0,t(e,n,i)&&(r=!0));for(var s=a.length,l=0;s>l;l++){var c=a[l];c.filterable&&(o=!0,t(e,n,c)&&(r=!0))}return o?r:!0}function t(e,t,n){if("number"===n.sortingType){if(null!=e.branch[n.field]&&parseFloat(e.branch[n.field])===parseFloat(t))return!0}else if(null!=e.branch[n.field]&&-1!==e.branch[n.field].toLowerCase().indexOf(t.toLowerCase()))return!0}return function(t,n,i,a){var r=[];if(!n||n.length<3)for(var o=0;o<t.length;o++){var s=t[o];s.visible&&r.push(s)}else for(var l=[],c=0,o=0;o<t.length;o++){for(var s=t[o];c>=s.level;)throwAway=l.pop(),c--;if(l.push(s),c=s.level,e(s,n,i,a)){for(var u=0;u<l.length;u++)ancestor=l[u],ancestor.visible&&r.push(ancestor);l=[]}}return r}})}.call(window),angular.module("uiSwitch",[]).directive("switch",function(){return{restrict:"AE",replace:!0,transclude:!0,template:function(e,t){var n="";return n+="<span",n+=' class="switch'+(t["class"]?" "+t["class"]:"")+'"',n+=t.ngModel?' ng-click="'+t.disabled+" ? "+t.ngModel+" : "+t.ngModel+"=!"+t.ngModel+(t.ngChange?"; "+t.ngChange+'()"':'"'):"",n+=' ng-class="{ checked:'+t.ngModel+", disabled:"+t.disabled+' }"',n+=">",n+="<small></small>",n+='<input type="checkbox"',n+=t.id?' id="'+t.id+'"':"",n+=t.name?' name="'+t.name+'"':"",n+=t.ngModel?' ng-model="'+t.ngModel+'"':"",n+=' style="display:none" />',n+='<span class="switch-text">',n+=t.on?'<span class="on">'+t.on+"</span>":"",n+=t.off?'<span class="off">'+t.off+"</span>":" ",n+="</span>"}}}),angular.module("jp.ng-bs-animated-button",[]).directive("jpNgBsAnimatedButton",["$timeout",function(e){return{restrict:"AE",replace:!0,scope:{isSubmitting:"=",result:"=",options:"=?"},controller:["$scope",function(e){e.options=e.options||{},e.options={buttonDefaultClass:e.options.buttonDefaultClass||"btn-primary",buttonSubmittingClass:e.options.buttonSubmittingClass||"btn-primary",buttonSuccessClass:e.options.buttonSuccessClass||"btn-primary",buttonErrorClass:e.options.buttonErrorClass||"btn-danger",buttonSizeClass:e.options.buttonSizeClass||null,buttonDefaultText:e.options.buttonDefaultText||"Submit",buttonSubmittingText:e.options.buttonSubmittingText||"Submitting...",buttonSuccessText:e.options.buttonSuccessText||"Completed",buttonErrorText:e.options.buttonErrorText||"There was an error",buttonInitialIcon:e.options.buttonInitialIcon||"glyphicon glyphicon-plus",buttonSubmittingIcon:e.options.buttonSubmittingIcon||"glyphicon glyphicon-refresh",buttonSuccessIcon:e.options.buttonSuccessIcon||"glyphicon glyphicon-ok",buttonErrorIcon:e.options.buttonErrorIcon||"glyphicon glyphicon-remove",formIsInvalid:e.options.formIsInvalid||"",animationCompleteTime:e.options.animationCompleteTime||"2000",iconsPosition:e.options.iconsPosition||"left",onlyIcons:e.options.onlyIcons||!1}}],template:'<button type="submit" class="btn {{buttonClass}} {{buttonSize}} {{onlyIcons}} btn-ng-bs-animated clearfix" ng-disabled="{{formIsInvalid}}"><div class="icons pull-{{iconsPosition}}"><span class="{{buttonInitialIcon}} icon-initial"></span><span class="{{buttonSubmittingIcon}} icon-spinner icon-submit hidden"></span><span class="{{buttonSuccessIcon}} icon-result icon-success hidden"></span><span class="{{buttonErrorIcon}} icon-result icon-error hidden"></span></div><div class="text {{buttonTextFloatClass}}">{{buttonText}}</div></button>',link:function(t,n){var i=n,a={initial:angular.element(i[0].querySelector(".icon-initial")),submitting:angular.element(i[0].querySelector(".icon-submit")),result:angular.element(i[0].querySelectorAll(".icon-result")),success:angular.element(i[0].querySelector(".icon-success")),error:angular.element(i[0].querySelector(".icon-error"))},r=function(){t.result=null,t.buttonClass=t.options.buttonDefaultClass,t.buttonText=t.options.buttonDefaultText,i.removeClass("is-active").attr("disabled",!1),a.result.addClass("hidden")},o=function(){return"left"===t.iconsPosition?"pull-right":"pull-left";
};t.buttonClass=t.options.buttonDefaultClass,t.buttonSize=t.options.buttonSizeClass,t.formIsInvalid=t.options.formIsInvalid,t.iconsPosition=t.options.iconsPosition,t.buttonInitialIcon=t.options.buttonInitialIcon,t.buttonSubmittingIcon=t.options.buttonSubmittingIcon,t.buttonSuccessIcon=t.options.buttonSuccessIcon,t.buttonErrorIcon=t.options.buttonErrorIcon,t.iconsPosition=t.options.iconsPosition,t.buttonText=t.options.buttonDefaultText,t.buttonTextFloatClass=o(),t.options.onlyIcons&&(t.onlyIcons="icons-only"),t.$watch("isSubmitting",function(e){e&&(t.buttonClass=t.options.buttonSubmittingClass,t.buttonText=t.options.buttonSubmittingText,i.attr("disabled",!0).addClass("is-active"),a.submitting.removeClass("hidden"))},!0).bind(this),t.$watch("result",function(n){t.isSubmitting=null,"success"===n&&(t.buttonClass=t.options.buttonSuccessClass,t.buttonText=t.options.buttonSuccessText,a.submitting.addClass("hidden"),a.success.removeClass("hidden"),e(r,t.options.animationCompleteTime)),"error"===n&&(t.buttonClass=t.options.buttonErrorClass,t.buttonText=t.options.buttonErrorText,a.submitting.addClass("hidden"),a.error.removeClass("hidden"),e(r,t.options.animationCompleteTime))},!0).bind(this)}}}]),function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null,statefulFilters:!0}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null,fullDateThreshold:null,fullDateFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,i,a,r){return function(o,s,l){function c(){var e;if(h)e=h;else if(a.serverTime){var t=(new Date).getTime(),i=t-k+a.serverTime;e=n(i)}else e=n();return e}function u(){m&&(t.clearTimeout(m),m=null)}function d(e){var n=c().diff(e,"day"),i=w&&n>=w;if(i?s.text(e.format($)):s.text(e.from(c(),y)),b&&!s.attr("title")&&s.attr("title",e.local().format(b)),!i){var a=Math.abs(c().diff(e,"minute")),r=3600;1>a?r=1:60>a?r=30:180>a&&(r=300),m=t.setTimeout(function(){d(e)},1e3*r)}}function f(e){C&&s.attr("datetime",e)}function p(){if(u(),g){var e=i.preprocessDate(g,x,v);d(e),f(e.toISOString())}}var g,h,m=null,v=r.format,y=a.withoutSuffix,b=a.titleFormat,w=a.fullDateThreshold,$=a.fullDateFormat,k=(new Date).getTime(),x=r.preprocess,S=l.amTimeAgo,C="TIME"===s[0].nodeName.toUpperCase();o.$watch(S,function(e){return"undefined"==typeof e||null===e||""===e?(u(),void(g&&(s.text(""),f(""),g=null))):(g=e,void p())}),e.isDefined(l.amFrom)&&o.$watch(l.amFrom,function(e){h="undefined"==typeof e||null===e||""===e?null:n(e),p()}),e.isDefined(l.amWithoutSuffix)&&o.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(y=e,p()):y=a.withoutSuffix}),l.$observe("amFormat",function(e){"undefined"!=typeof e&&(v=e,p())}),l.$observe("amPreprocess",function(e){x=e,p()}),l.$observe("amFullDateThreshold",function(e){w=e,p()}),l.$observe("amFullDateFormat",function(e){$=e,p()}),o.$on("$destroy",function(){u()}),o.$on("amMoment:localeChanged",function(){p()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,i,a){this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(i,a){var r=t.locale(i,a);return e.isDefined(i)&&n.$broadcast("amMoment:localeChanged"),r},this.changeTimezone=function(e){a.timezone=e,n.$broadcast("amMoment:timezoneChanged")},this.preprocessDate=function(n,r,o){return e.isUndefined(r)&&(r=a.preprocess),this.preprocessors[r]?this.preprocessors[r](n,o):(r&&i.warn("angular-moment: Ignoring unsupported value for preprocess: "+r),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,o))},this.applyTimezone=function(e,t){return(t=t||a.timezone)?(t.match(/^Z|[+-]\d\d:?\d\d$/i)?e=e.utcOffset(t):e.tz?e=e.tz(t):i.warn("angular-moment: named timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?"),e):e}}]).filter("amCalendar",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,a){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,i);var r=e(n);return r.isValid()?t.applyTimezone(r,a).calendar():""}return i.$stateful=n.statefulFilters,i}]).filter("amDifference",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,a,r,o,s){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,o);var l=e(n);if(!l.isValid())return"";var c;if("undefined"==typeof i||null===i)c=e();else if(i=t.preprocessDate(i,s),c=e(i),!c.isValid())return"";return t.applyTimezone(l).diff(t.applyTimezone(c),a,r)}return i.$stateful=n.statefulFilters,i}]).filter("amDateFormat",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(i,a,r,o,s){var l=s||n.format;if("undefined"==typeof i||null===i)return"";i=t.preprocessDate(i,r,l);var c=e(i);return c.isValid()?t.applyTimezone(c,o).format(a):""}return i.$stateful=n.statefulFilters,i}]).filter("amDurationFormat",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e.duration(t,n).humanize(i)}return n.$stateful=t.statefulFilters,n}]).filter("amTimeAgo",["moment","amMoment","angularMomentConfig",function(e,t,n){function i(n,i,a,r){var o,s;return"undefined"==typeof n||null===n?"":(n=t.preprocessDate(n,i),o=e(n),o.isValid()?(s=e(r),"undefined"!=typeof r&&s.isValid()?t.applyTimezone(o).from(s,a):t.applyTimezone(o).fromNow(a)):"")}return i.$stateful=n.statefulFilters,i}]).filter("amSubtract",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e(t).subtract(parseInt(n,10),i)}return n.$stateful=t.statefulFilters,n}]).filter("amAdd",["moment","angularMomentConfig",function(e,t){function n(t,n,i){return"undefined"==typeof t||null===t?"":e(t).add(parseInt(n,10),i)}return n.$stateful=t.statefulFilters,n}])}"function"==typeof define&&define.amd?define(["angular","moment"],e):"undefined"!=typeof module&&module&&module.exports?(e(angular,require("moment")),module.exports="angularMoment"):e(angular,("undefined"!=typeof global?global:window).moment)}(),function(){"use strict";angular.module("gantt",["gantt.templates","angularMoment"]).directive("gantt",["Gantt","ganttEnableNgAnimate","$timeout","$templateCache",function(e,t,n,i){return{restrict:"A",transclude:!0,templateUrl:function(e,t){var n;return n=void 0===t.templateUrl?"template/gantt.tmpl.html":t.templateUrl,void 0!==t.template&&i.put(n,t.template),n},scope:{sortMode:"=?",filterTask:"=?",filterTaskComparator:"=?",filterRow:"=?",filterRowComparator:"=?",viewScale:"=?",columnWidth:"=?",expandToFit:"=?",shrinkToFit:"=?",showSide:"=?",allowSideResizing:"=?",fromDate:"=?",toDate:"=?",currentDateValue:"=?",currentDate:"=?",daily:"=?",autoExpand:"=?",taskOutOfRange:"=?",taskContent:"=?",rowContent:"=?",maxHeight:"=?",sideWidth:"=?",headers:"=?",headersFormats:"=?",timeFrames:"=?",dateFrames:"=?",timeFramesWorkingMode:"=?",timeFramesNonWorkingMode:"=?",timespans:"=?",columnMagnet:"=?",shiftColumnMagnet:"=?",timeFramesMagnet:"=?",data:"=?",api:"=?",options:"=?"},controller:["$scope","$element",function(n,i){for(var a in n.options)n[a]=n.options[a];t(i,!1),n.gantt=new e(n,i),this.gantt=n.gantt}],link:function(e,t){e.gantt.api.directives.raise["new"]("gantt",e,t),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("gantt",e,t)}),n(function(){e.gantt.initialized()})}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttApi",["$q","$rootScope","ganttUtils",function(e,t,n){function i(e,n,i,a){return t.$on(e,function(){var e=Array.prototype.slice.call(arguments);e.splice(0,1),n.apply(a?a:i.api,e)})}var a=function(e){this.gantt=e,this.listeners=[],this.apiId=n.newId()};return a.prototype.suppressEvents=function(e,t){var n=this,a=angular.isArray(e)?e:[e],r=[];a.forEach(function(e){r=n.listeners.filter(function(t){return e===t.handler})}),r.forEach(function(e){e.dereg()}),t(),r.forEach(function(e){e.dereg=i(e.eventId,e.handler,n.gantt,e._this)})},a.prototype.registerEvent=function(e,n){var a=this;a[e]||(a[e]={});var r=a[e];r.on||(r.on={},r.raise={});var o="event:gantt:"+this.apiId+":"+e+":"+n;r.raise[n]=function(){t.$emit.apply(t,[o].concat(Array.prototype.slice.call(arguments)))},r.on[n]=function(e,t,n){var r=i(o,t,a.gantt,n),s={handler:t,dereg:r,eventId:o,scope:e,_this:n};a.listeners.push(s);var l=function(){s.dereg();var e=a.listeners.indexOf(s);a.listeners.splice(e,1)};return e.$on("$destroy",function(){l()}),l}},a.prototype.registerEventsFromObject=function(e){var t=this,n=[];angular.forEach(e,function(e,t){var i={name:t,events:[]};angular.forEach(e,function(e,t){i.events.push(t)}),n.push(i)}),n.forEach(function(e){e.events.forEach(function(n){t.registerEvent(e.name,n)})})},a.prototype.registerMethod=function(e,t,i,a){this[e]||(this[e]={});var r=this[e];r[t]=n.createBoundedWrapper(a||this.gantt,i)},a.prototype.registerMethodsFromObject=function(e,t){var n=this,i=[];angular.forEach(e,function(e,t){var n={name:t,methods:[]};angular.forEach(e,function(e,t){n.methods.push({name:t,fn:e})}),i.push(n)}),i.forEach(function(e){e.methods.forEach(function(i){n.registerMethod(e.name,i.name,i.fn,t)})})},a}])}(),function(){"use strict";angular.module("gantt").factory("GanttOptions",[function(){var e=function(e,t){this.defaultValues=t,this.values=e,this.defaultValue=function(e){var t=this.defaultValues[e];return angular.isFunction(t)&&(t=t()),t},this.sanitize=function(e,t){if(!t){var n=this.defaultValue(e);if(void 0!==n)return void 0!==t&&"boolean"==typeof n?t:n}return t},this.value=function(e){return this.sanitize(e,this.values[e])},this.set=function(e,t){this.values[e]=t},this.initialize=function(){for(var e in this.values){var t=this.values[e];this.values.hasOwnProperty(e)&&(this.values[e]=this.value(e,t))}return this.values}};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttCalendar",["$filter","moment",function(e,t){var n=function(e){void 0===e&&(e={}),this.start=e.start,this.end=e.end,this.working=e.working,this.magnet=void 0!==e.magnet?e.magnet:!0,this["default"]=e["default"],this.color=e.color,this.classes=e.classes,this.internal=e.internal};n.prototype.updateView=function(){if(this.$element){var e={};void 0!==this.left?e.left=this.left+"px":e.left="",void 0!==this.width?e.width=this.width+"px":e.width="",void 0!==this.color?e["background-color"]=this.color:e["background-color"]="",this.$element.css(e);var t=["gantt-timeframe"+(this.working?"":"-non")+"-working"];this.classes&&(t=t.concat(this.classes));for(var n=0,i=t.length;i>n;n++)this.$element.toggleClass(t[n],!0)}},n.prototype.getDuration=function(){return void 0!==this.end&&void 0!==this.start?this.end.diff(this.start,"milliseconds"):void 0},n.prototype.clone=function(){return new n(this)};var i=function(e){this.func=e};i.prototype.getTimeFrames=function(e){var t=this.func(e);return t instanceof Array||(t=[t]),t},i.prototype.clone=function(){return new i(this.func)};var a=function(e){this.evaluator=e.evaluator,e.date?(this.start=t(e.date).startOf("day"),this.end=t(e.date).endOf("day")):(this.start=e.start,this.end=e.end),e.targets instanceof Array?this.targets=e.targets:this.targets=[e.targets],this["default"]=e["default"]};a.prototype.dateMatch=function(e){return this.evaluator?this.evaluator(e):this.start&&this.end?e>=this.start&&e<=this.end:!1},a.prototype.clone=function(){return new a(this)};var r=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}};r.prototype.clear=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}},r.prototype.registerTimeFrames=function(e){angular.forEach(e,function(e,t){this.timeFrames[t]=new n(e)},this)},r.prototype.removeTimeFrames=function(e){angular.forEach(e,function(e){delete this.timeFrames[e]},this)},r.prototype.clearTimeFrames=function(){this.timeFrames={}},r.prototype.registerTimeFrameMappings=function(e){angular.forEach(e,function(e,t){this.timeFrameMappings[t]=new i(e)},this)},r.prototype.removeTimeFrameMappings=function(e){angular.forEach(e,function(e){delete this.timeFrameMappings[e]},this)},r.prototype.clearTimeFrameMappings=function(){this.timeFrameMappings={}},r.prototype.registerDateFrames=function(e){angular.forEach(e,function(e,t){this.dateFrames[t]=new a(e)},this)},r.prototype.removeDateFrames=function(e){angular.forEach(e,function(e){delete this.dateFrames[e]},this)},r.prototype.clearDateFrames=function(){this.dateFrames={}};var o=function(e,t){var n=[];return angular.forEach(e,function(e){e.dateMatch(t)&&n.push(e)}),0===n.length&&angular.forEach(e,function(e){e["default"]&&n.push(e)}),n};return r.prototype.getTimeFrames=function(e){for(var n=[],i=o(this.dateFrames,e),a=0;a<i.length;a++)if(void 0!==i[a])for(var r=i[a].targets,s=0;s<r.length;s++){var l=this.timeFrameMappings[r[s]];if(void 0!==l)n.push(l.getTimeFrames());else{var c=this.timeFrames[r[s]];void 0!==c&&n.push(c)}}var u=e.year(),d=e.month(),f=e.date(),p=[];for(0===n.length&&angular.forEach(this.timeFrames,function(e){e["default"]&&n.push(e)}),a=0;a<n.length;a++){var g=n[a].clone();void 0!==g.start&&(g.start.year(u),g.start.month(d),g.start.date(f)),void 0!==g.end&&(g.end.year(u),g.end.month(d),g.end.date(f),t(g.end).startOf("day")===g.end&&g.end.add(1,"day")),p.push(g)}return p},r.prototype.solve=function(i,a,r){for(var o,s,l,c,u=0;u<i.length;u++){var d=i[u];(void 0===l||l>d.start)&&(l=d.start),(void 0===c||c<d.end)&&(c=d.end),void 0===o&&d.color&&(o=d.color),void 0!==d.classes&&(void 0===s&&(s=[]),s=s.concat(d.classes))}void 0===a&&(a=l),void 0===r&&(r=c);var f=[new n({start:a,end:r,internal:!0})];for(i=e("filter")(i,function(e){return(void 0===e.start||e.start<r)&&(void 0===e.end||e.end>a)}),u=0;u<i.length;u++){var p=i[u];p.start||(p.start=a),p.end||(p.end=r)}var g,h=e("orderBy")(i,function(e){return-e.getDuration()});for(u=0;u<h.length;u++){var m=h[u],v=f.slice();g=0;for(var y=!1,b=!1,w=0;w<f.length;w++){var $=f[w];if(!b){if(m.end||m.start)if(m.end>$.start&&m.start<$.end){var k=$.clone();$.end=t(m.start),k.start=t(m.end),v.splice(g+1,0,m.clone(),k),b=!0,y=!1}else!y&&m.start<$.end?($.end=t(m.start),v.splice(g+1,0,m.clone()),y=!0):y&&m.end>$.start&&($.start=t(m.end),y=!1,b=!0);else v.splice(g,0,m),b=!0,y=!1;g++}}f=v}return f=e("filter")(f,function(e){return!e.internal&&(void 0===e.start||e.start<r)&&(void 0===e.end||e.end>a)})},r}])}(),function(){"use strict";angular.module("gantt").factory("GanttCurrentDateManager",["moment",function(e){var t=function(t){var n=this;this.gantt=t,this.date=void 0,this.position=void 0,this.currentDateColumn=void 0,this.gantt.$scope.simplifyMoment=function(t){return e.isMoment(t)?t.unix():t},this.gantt.$scope.$watchGroup(["currentDate","simplifyMoment(currentDateValue)"],function(e,t){e!==t&&n.setCurrentDate(n.gantt.options.value("currentDateValue"))})};return t.prototype.setCurrentDate=function(e){this.date=e;var t,n=this.currentDateColumn;void 0!==this.date&&"column"===this.gantt.options.value("currentDate")&&(t=this.gantt.columnsManager.getColumnByDate(this.date,!0)),this.currentDateColumn=t,n!==t&&(void 0!==n&&(n.currentDate=!1,n.updateView()),void 0!==t&&(t.currentDate=!0,t.updateView())),this.position=this.gantt.getPositionByDate(this.date,!0)},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumn",["moment",function(e){var t=function(e,t,n,i,a,r,o){this.date=e,this.endDate=t,this.left=n,this.width=i,this.calendar=a,this.duration=this.endDate.diff(this.date,"milliseconds"),this.timeFramesWorkingMode=r,this.timeFramesNonWorkingMode=o,this.timeFrames=[],this.currentDate=!1,this.visibleTimeFrames=[],this.daysTimeFrames={},this.cropped=!1,this.originalSize={left:this.left,width:this.width},this.updateTimeFrames()},n=function(e){return e.year()+"-"+e.month()+"-"+e.date()};return t.prototype.updateView=function(){if(this.$element){this.currentDate?this.$element.addClass("gantt-foreground-col-current-date"):this.$element.removeClass("gantt-foreground-col-current-date"),this.$element.css({left:this.left+"px",width:this.width+"px"});for(var e=0,t=this.timeFrames.length;t>e;e++)this.timeFrames[e].updateView()}},t.prototype.updateTimeFrames=function(){var t=this;if(void 0!==t.calendar&&("hidden"!==t.timeFramesNonWorkingMode||"hidden"!==t.timeFramesWorkingMode)){for(var i,a=t.date,r=e(a).startOf("day"),o=r.add(1,"day");a<t.endDate;){var s=t.calendar.getTimeFrames(a),l=e.min(o,t.endDate);s=t.calendar.solve(s,a,l);var c=[];for(i=0;i<s.length;i++){var u=s[i],d=u.start;void 0===d&&(d=a);var f=u.end;void 0===f&&(f=l),d<t.date&&(d=t.date),f>t.endDate&&(f=t.endDate),u=u.clone(),u.start=e(d),u.end=e(f),c.push(u)}t.timeFrames=t.timeFrames.concat(c);var p=n(a);t.daysTimeFrames[p]=c,a=l,r=e(a).startOf("day"),o=r.add(1,"day")}for(i=0;i<t.timeFrames.length;i++){var g=t.timeFrames[i],h=g.start.diff(t.date,"milliseconds"),m=h/t.duration*t.width,v=g.end.diff(g.start,"milliseconds"),y=v/t.duration*t.width,b=!1;g.working&&"visible"!==t.timeFramesWorkingMode?b=!0:g.working||"visible"===t.timeFramesNonWorkingMode||(b=!0),b||t.visibleTimeFrames.push(g),g.hidden=b,g.left=m,g.width=y,g.originalSize={left:g.left,width:g.width}}if("cropped"===t.timeFramesNonWorkingMode||"cropped"===t.timeFramesWorkingMode){for(var w=0,$=0;$<t.timeFrames.length;$++){var k=t.timeFrames[$];(!k.working&&"cropped"!==t.timeFramesNonWorkingMode||k.working&&"cropped"!==t.timeFramesWorkingMode)&&(w+=k.width)}if(w!==t.width){var x=t.width/w,S=0,C=0,D=!0;for($=0;$<t.timeFrames.length;$++){var M=t.timeFrames[$];!M.working&&"cropped"!==t.timeFramesNonWorkingMode||M.working&&"cropped"!==t.timeFramesWorkingMode?(M.left=(M.left-S)*x,M.width=M.width*x,M.originalSize.left=(M.originalSize.left-C)*x,M.originalSize.width=M.originalSize.width*x,M.cropped=!1,D=!1):(S+=M.width,C+=M.originalSize.width,M.left=void 0,M.width=0,M.originalSize={left:void 0,width:0},M.cropped=!0)}t.cropped=D}else t.cropped=!1}}},t.prototype.clone=function(){return new t(e(this.date),e(this.endDate),this.left,this.width,this.calendar)},t.prototype.containsDate=function(e){return e>this.date&&e<=this.endDate},t.prototype.equals=function(e){return this.date===e.date},t.prototype.roundTo=function(e,t,n,i){"day"===t&&(t="date"),n=n||1;var a=e.get(t);switch(i){case"up":a=Math.ceil(a/n);break;case"down":a=Math.floor(a/n);break;default:a=Math.round(a/n)}var r=["millisecond","second","minute","hour","date","month","year"];e.set(t,a*n);for(var o=r.indexOf(t),s=0;o>s;s++)e.set(r[s],0);return e},t.prototype.getMagnetDate=function(t,n,i,a){if(n>0&&void 0!==i){var r=t;if(t=e(t),"column"===i){var o=this.getPositionByDate(t);t=e(o<this.width/2?this.date:this.endDate)}else t=this.roundTo(t,i,n),t<this.date?t=e(this.date):t>this.endDate&&(t=e(this.endDate));if(a)for(var s,l=Math.abs(r.diff(t,"milliseconds")),c=0;c<this.timeFrames.length;c++){var u=this.timeFrames[c];if(u.magnet){var d,f=this.timeFrames[c-1],p=this.timeFrames[c+1];void 0!==f&&f.working===u.working||(d=Math.abs(r.diff(u.start,"milliseconds")),l>d&&(void 0===s||s>d)&&(s=d,t=u.start)),void 0!==p&&p.working===u.working||(d=Math.abs(r.diff(u.end,"milliseconds")),l>d&&(void 0===s||s>d)&&(s=d,t=u.end))}}}return t},t.prototype.getDateByPositionUsingTimeFrames=function(t){for(var n=0,i=this.timeFrames.length;i>n;n++){var a=this.timeFrames[n];if(!a.cropped&&t>=a.left&&t<=a.left+a.width){var r=a.getDuration()/a.width*(t-a.left),o=e(a.start).add(r,"milliseconds");return o}}},t.prototype.getDateByPosition=function(t,n,i,a){var r,o;return 0>t&&(t=0),t>this.width&&(t=this.width),"cropped"!==this.timeFramesNonWorkingMode&&"cropped"!==this.timeFramesWorkingMode||(o=this.getDateByPositionUsingTimeFrames(t)),void 0===o&&(r=this.duration/this.width*t,o=e(this.date).add(r,"milliseconds")),o=this.getMagnetDate(o,n,i,a)},t.prototype.getDayTimeFrame=function(e){var t=this.daysTimeFrames[n(e)];return void 0===t?[]:t},t.prototype.getPositionByDate=function(e){var t,n;if("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)for(var i=e,a=this.getDayTimeFrame(i),r=0;r<a.length;r++){var o=a[r];if(i>=o.start&&i<=o.end){if(!o.cropped)return t=i.diff(o.start,"milliseconds"),n=t/o.getDuration()*o.width,this.left+o.left+n;i=a.length>r+1?a[r+1].start:o.end}}return t=e.diff(this.date,"milliseconds"),n=t/this.duration*this.width,0>n&&(n=0),n>this.width&&(n=this.width),this.left+n},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnBuilder",["GanttColumn",function(e){var t=function(e){this.columnsManager=e};return t.prototype.newColumn=function(t,n,i,a){var r=this.columnsManager.gantt.calendar,o=this.columnsManager.gantt.options.value("timeFramesWorkingMode"),s=this.columnsManager.gantt.options.value("timeFramesNonWorkingMode");return new e(t,n,i,a,r,o,s)},t}])}(),function(){"use strict";angular.module("gantt").service("GanttColumnGenerator",["moment",function(e){var t=function(t,n,i){return e(t).add(n,i).startOf(i)===t},n=function(e){return["hour","minute","second","millisecond"].indexOf(e)>=0?0:void 0},i=function(e,t,i){var a=t.get(e),r=i.get(e),o=n(e);void 0!==o&&r!==o&&a>r&&i.set(e,o)};this.generate=function(n,a,r,o,s,l,c,u){if(!r&&!l)throw"to or maximumWidth must be defined";o=o.trim(),"s"===o.charAt(o.length-1)&&(o=o.substring(0,o.length-1));var d,f,p;o&&(p=o.split(" ")),p&&p.length>1?(d=parseFloat(p[0]),f=p[p.length-1]):(d=1,f=o);var g=!1;a=e(a).startOf(f),r&&(g=t(r),r=e(r).startOf(f));var h=0,m=e(a).startOf(f);u&&(m.add(-d,f),h-=s);for(var v=[];;){if(l&&Math.abs(h)>l+s)break;var y=e(m),b=e(y).add(d,f);i(f,y,b);var w=n.newColumn(y,b,c?h+c:h,s);if(w.cropped||(v.push(w),u?h-=s:h+=s),r)if(u){if(g&&r>m||!g&&r>=m)break}else if(g&&m>r||!g&&m>=r)break;u?(m.add(-d,f),i(f,m,y)):(m.add(d,f),i(f,y,m))}return u&&(t(a,d,f)&&v.shift(),v.reverse()),v}}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnHeader",["moment","GanttColumn",function(e,t){var n=function(n,i,a,r,o,s){n=e(n),i=e(i);var l=new t(n,i,r,o);return l.unit=a,l.label=angular.isFunction(s)?s(l):n.format(s),l};return n}])}(),function(){"use strict";angular.module("gantt").factory("GanttColumnsManager",["GanttColumnGenerator","GanttColumnBuilder","GanttHeadersGenerator","$filter","$timeout","ganttLayout","ganttBinarySearch","moment",function(e,t,n,i,a,r,o,s){var l=function(e){var n=this;this.gantt=e,this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.scrollAnchor=void 0,this.columnBuilder=new t(this),this.gantt.$scope.$watchGroup(["viewScale","columnWidth","timeFramesWorkingMode","timeFramesNonWorkingMode","fromDate","toDate","autoExpand","taskOutOfRange"],function(e,t){e!==t&&n.gantt.rendered&&n.generateColumns()}),this.gantt.$scope.$watchCollection("headers",function(e,t){e!==t&&n.gantt.rendered&&n.generateColumns()}),this.gantt.$scope.$watchCollection("headersFormats",function(e,t){e!==t&&n.gantt.rendered&&n.generateColumns()}),this.gantt.$scope.$watchGroup(["ganttElementWidth","showSide","sideWidth","maxHeight","daily"],function(e,t){e!==t&&n.gantt.rendered&&n.updateColumnsMeta()}),this.gantt.api.data.on.load(this.gantt.$scope,function(){(void 0===n.from||void 0===n.to||n.from>n.gantt.rowsManager.getDefaultFrom()||n.to<n.gantt.rowsManager.getDefaultTo())&&n.gantt.rendered&&n.generateColumns(),n.gantt.rowsManager.sortRows()}),this.gantt.api.data.on.remove(this.gantt.$scope,function(){n.gantt.rowsManager.sortRows()}),this.gantt.api.registerMethod("columns","clear",this.clearColumns,this),this.gantt.api.registerMethod("columns","generate",this.generateColumns,this),this.gantt.api.registerMethod("columns","refresh",this.updateColumnsMeta,this),this.gantt.api.registerMethod("columns","getColumnsWidth",this.getColumnsWidth,this),this.gantt.api.registerMethod("columns","getColumnsWidthToFit",this.getColumnsWidthToFit,this),this.gantt.api.registerMethod("columns","getDateRange",this.getDateRange,this),this.gantt.api.registerEvent("columns","clear"),this.gantt.api.registerEvent("columns","generate"),this.gantt.api.registerEvent("columns","refresh")};l.prototype.setScrollAnchor=function(){if(this.gantt.scroll.$element&&this.columns.length>0){var e=this.gantt.scroll.$element[0],t=e.scrollLeft+e.offsetWidth/2;this.scrollAnchor=this.gantt.getDateByPosition(t)}},l.prototype.scrollToScrollAnchor=function(){var e=this;this.columns.length>0&&void 0!==this.scrollAnchor&&this.gantt.$scope.$$postDigest(function(){e.gantt.api.scroll.toDate(e.scrollAnchor)})},l.prototype.clearColumns=function(){this.setScrollAnchor(),this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders=[],this.gantt.api.columns.raise.clear()},l.prototype.generateColumns=function(t,i){return t||(t=this.gantt.options.value("fromDate")),i||(i=this.gantt.options.value("toDate")),(t&&(!s.isMoment(t)||t.isValid())||(t=this.gantt.rowsManager.getDefaultFrom()))&&(i&&(!s.isMoment(i)||i.isValid())||(i=this.gantt.rowsManager.getDefaultTo()))?(void 0===t||s.isMoment(t)||(t=s(t)),void 0===i||s.isMoment(i)||(i=s(i)),"expand"===this.gantt.options.value("taskOutOfRange")&&(t=this.gantt.rowsManager.getExpandedFrom(t),i=this.gantt.rowsManager.getExpandedTo(i)),this.setScrollAnchor(),this.from=t,this.to=i,this.columns=e.generate(this.columnBuilder,t,i,this.gantt.options.value("viewScale"),this.getColumnsWidth()),this.headers=n.generate(this),this.previousColumns=[],this.nextColumns=[],this.updateColumnsMeta(),this.scrollToScrollAnchor(),void this.gantt.api.columns.raise.generate(this.columns,this.headers)):!1},l.prototype.updateColumnsMeta=function(){this.gantt.isRefreshingColumns=!0;var e=this.getLastColumn();this.gantt.originalWidth=void 0!==e?e.originalSize.left+e.originalSize.width:0;var t=this.updateColumnsWidths(this.columns,this.headers,this.previousColumns,this.nextColumns);this.gantt.width=void 0!==e?e.left+e.width:0;var n=this.gantt.options.value("showSide"),i=this.gantt.side.isShown(),a=n!==i;a&&!n&&this.gantt.side.show(!1),this.gantt.rowsManager.updateTasksPosAndSize(),this.gantt.timespansManager.updateTimespansPosAndSize(),this.updateVisibleColumns(t),this.gantt.rowsManager.updateVisibleObjects();var r=this.gantt.options.value("currentDateValue");this.gantt.currentDateManager.setCurrentDate(r),a&&n&&this.gantt.side.show(!0),this.gantt.isRefreshingColumns=!1,this.gantt.api.columns.raise.refresh(this.columns,this.headers)},l.prototype.getLastColumn=function(e){var t=this.columns;return e&&(t=this.nextColumns),t&&t.length>0?t[t.length-1]:void 0},l.prototype.getFirstColumn=function(e){var t=this.columns;return e&&(t=this.previousColumns),t&&t.length>0?t[0]:void 0},l.prototype.getColumnByDate=function(e,t){t||this.expandExtendedColumnsForDate(e);var n=this.previousColumns.concat(this.columns,this.nextColumns),i=o.get(n,e,function(e){return e.date},!0);return void 0===i[0]?i[1]:i[0]},l.prototype.getColumnByPosition=function(e,t){t||this.expandExtendedColumnsForPosition(e);var n=this.previousColumns.concat(this.columns,this.nextColumns),i=o.get(n,e,function(e){return e.left},!0);return void 0===i[0]?i[1]:i[0]},l.prototype.updateColumnsWidths=function(e,t,n,i){var a=this.gantt.options.value("columnWidth"),o=this.gantt.options.value("expandToFit"),s=this.gantt.options.value("shrinkToFit");if(void 0===a||o||s){var l=this.gantt.getBodyAvailableWidth(),c=this.gantt.columnsManager.getLastColumn(!1);if(void 0!==c){var u=c.originalSize.left+c.originalSize.width;if(o&&l>u||s&&u>l||void 0===a){var d=l/u;r.setColumnsWidthFactor(e,d);for(var f=0;f<t.length;f++)r.setColumnsWidthFactor(t[f],d);return n.splice(0,this.previousColumns.length),i.splice(0,this.nextColumns.length),!0}}}return!1},l.prototype.getColumnsWidth=function(){var e=this.gantt.options.value("columnWidth");return void 0===e&&(e=!this.gantt.width||this.gantt.width<=0?20:this.gantt.width/this.columns.length),e},l.prototype.getColumnsWidthToFit=function(){return this.gantt.getBodyAvailableWidth()/this.columns.length},l.prototype.expandExtendedColumnsForPosition=function(t){var n;if(0>t){var i=this.getFirstColumn(),a=i.date,r=this.getFirstColumn(!0);return(!r||r.left>t)&&(n=this.gantt.options.value("viewScale"),this.previousColumns=e.generate(this.columnBuilder,a,void 0,n,this.getColumnsWidth(),-t,0,!0)),!0}if(t>this.gantt.width){var o=this.getLastColumn(),s=o.getDateByPosition(o.width),l=this.getLastColumn(!0);return(!l||l.left+l.width<t)&&(n=this.gantt.options.value("viewScale"),this.nextColumns=e.generate(this.columnBuilder,s,void 0,n,this.getColumnsWidth(),t-this.gantt.width,this.gantt.width,!1)),!0}return!1},l.prototype.expandExtendedColumnsForDate=function(t){var n,i=this.getFirstColumn();i&&(n=i.date);var a,r=this.getLastColumn();r&&(a=r.getDateByPosition(r.width));var o;if(n&&n>t){var s=this.getFirstColumn(!0);return(!s||s.date>t)&&(o=this.gantt.options.value("viewScale"),this.previousColumns=e.generate(this.columnBuilder,n,t,o,this.getColumnsWidth(),void 0,0,!0)),!0}if(a&&t>=a){var l=this.getLastColumn(!0);return(!l||l.date<a)&&(o=this.gantt.options.value("viewScale"),this.nextColumns=e.generate(this.columnBuilder,a,t,o,this.getColumnsWidth(),void 0,this.gantt.width,!1)),!0}return!1},l.prototype.getActiveHeadersCount=function(){return this.headers.length},l.prototype.updateVisibleColumns=function(e){this.visibleColumns=i("ganttColumnLimit")(this.columns,this.gantt),this.visibleHeaders=[];for(var t=0;t<this.headers.length;t++)this.visibleHeaders.push(i("ganttColumnLimit")(this.headers[t],this.gantt));if(e){for(t=0;t<this.visibleColumns.length;t++)this.visibleColumns[t].updateView();for(t=0;t<this.visibleHeaders.length;t++)for(var n=this.visibleHeaders[t],a=0;a<n.length;a++)n[a].updateView()}var r=this.gantt.options.value("currentDateValue");this.gantt.currentDateManager.setCurrentDate(r)};var c={year:"YYYY",quarter:"[Q]Q YYYY",month:"MMMM YYYY",week:"w",day:"D",hour:"H",minute:"HH:mm"},u={day:"LL",hour:"H",minute:"HH:mm"},d={year:"YYYY",quarter:"[Q]Q",month:"MMMM"};return l.prototype.getHeaderFormat=function(e){var t,n=this.gantt.options.value("headersFormats");if(void 0!==n&&(t=n[e]),void 0===t){var i=this.gantt.options.value("viewScale");i=i.trim(),"s"===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1));var a,r;i&&(r=i.split(" ")),a=r&&r.length>1?r[r.length-1]:i,["millisecond","second","minute","hour"].indexOf(a)>-1?t=u[e]:["month","quarter","year"].indexOf(a)>-1&&(t=d[e]),void 0===t&&(t=c[e])}return t},l.prototype.getDateRange=function(e){var t,n;return e?this.visibleColumns&&this.visibleColumns.length>0&&(t=this.visibleColumns[0],n=this.visibleColumns[this.visibleColumns.length-1]):(t=this.getFirstColumn(),n=this.getLastColumn()),t&&n?[t.date,n.endDate]:void 0},l}])}(),function(){"use strict";angular.module("gantt").service("GanttHeadersGenerator",["GanttColumnHeader","moment",function(e,t){var n=function(n,i){var a,r,o,s,l=[];i&&(s=i.split(" ")),s&&s.length>1?(r=parseFloat(s[0]),o=s[s.length-1]):(r=1,o=i);for(var c=n.columns[0],u=t(c.date).startOf(o),d=t(n.columns[n.columns.length-1].endDate);;){var f=c.getPositionByDate(u),p=t.min(t(u).add(r,o),d),g=n.getColumnByDate(p,!0),h=g.getPositionByDate(p),m=h-f;if(m>0){var v=n.getHeaderFormat(o);a=new e(u,p,o,f,m,v),l.push(a)}if(p.isSame(d)||p.isAfter(d))break;c=g,u=p}return l};this.generate=function(e){var t=[];if(void 0===e.gantt.options.value("headers")){var i=e.gantt.options.value("viewScale");i=i.trim(),"s"===i.charAt(i.length-1)&&(i=i.substring(0,i.length-1));var a,r;i&&(r=i.split(" ")),a=r&&r.length>1?r[r.length-1]:i,["quarter","month"].indexOf(a)>-1&&t.push("year"),["day","week"].indexOf(a)>-1&&t.push("month"),["day"].indexOf(a)>-1&&t.push("week"),["hour"].indexOf(a)>-1&&t.push("day"),["minute","second"].indexOf(a)>-1&&t.push("hour"),["second"].indexOf(a)>-1&&t.push("minute"),t.push(i)}else t=e.gantt.options.value("headers");for(var o=[],s=0;s<t.length;s++)o.push(n(e,t[s]));return o}}])}(),function(){"use strict";angular.module("gantt").factory("Gantt",["GanttApi","GanttOptions","GanttCalendar","GanttScroll","GanttBody","GanttRowHeader","GanttHeader","GanttSide","GanttObjectModel","GanttRowsManager","GanttColumnsManager","GanttTimespansManager","GanttCurrentDateManager","ganttArrays","moment","$document","$timeout",function(e,t,n,i,a,r,o,s,l,c,u,d,f,p,g,h,m){
var v=function(r,m){var v=this;this.$scope=r,this.$element=m,this.options=new t(r,{api:angular.noop,data:[],timespans:[],viewScale:"day",columnMagnet:"15 minutes",timeFramesMagnet:!0,showSide:!0,allowSideResizing:!0,currentDate:"line",currentDateValue:g,autoExpand:"none",taskOutOfRange:"truncate",taskContent:"{{task.model.name}}",rowContent:"{{row.model.name}}",maxHeight:0,timeFrames:[],dateFrames:[],timeFramesWorkingMode:"hidden",timeFramesNonWorkingMode:"visible"}),this.api=new e(this),this.api.registerEvent("core","ready"),this.api.registerEvent("core","rendered"),this.api.registerEvent("directives","controller"),this.api.registerEvent("directives","preLink"),this.api.registerEvent("directives","postLink"),this.api.registerEvent("directives","new"),this.api.registerEvent("directives","destroy"),this.api.registerEvent("data","change"),this.api.registerEvent("data","load"),this.api.registerEvent("data","remove"),this.api.registerEvent("data","clear"),this.api.registerMethod("core","getDateByPosition",this.getDateByPosition,this),this.api.registerMethod("core","getPositionByDate",this.getPositionByDate,this),this.api.registerMethod("data","load",this.loadData,this),this.api.registerMethod("data","remove",this.removeData,this),this.api.registerMethod("data","clear",this.clearData,this),this.api.registerMethod("data","get",this.getData,this),this.calendar=new n(this),this.calendar.registerTimeFrames(this.options.value("timeFrames")),this.calendar.registerDateFrames(this.options.value("dateFrames")),this.api.registerMethod("timeframes","registerTimeFrames",this.calendar.registerTimeFrames,this.calendar),this.api.registerMethod("timeframes","clearTimeframes",this.calendar.clearTimeFrames,this.calendar),this.api.registerMethod("timeframes","registerDateFrames",this.calendar.registerDateFrames,this.calendar),this.api.registerMethod("timeframes","clearDateFrames",this.calendar.clearDateFrames,this.calendar),this.api.registerMethod("timeframes","registerTimeFrameMappings",this.calendar.registerTimeFrameMappings,this.calendar),this.api.registerMethod("timeframes","clearTimeFrameMappings",this.calendar.clearTimeFrameMappings,this.calendar),r.$watchGroup(["timeFrames","dateFrames"],function(e,t){if(e!==t){var n=e[0],i=e[1],a=t[0],r=t[1],o=!1;angular.equals(n,a)||(v.calendar.clearTimeFrames(),v.calendar.registerTimeFrames(n),o=!0),angular.equals(i,r)||(v.calendar.clearDateFrames(),v.calendar.registerDateFrames(i),o=!0),o&&v.columnsManager.generateColumns()}}),r.$watch("columnMagnet",function(){var e,t=v.options.value("columnMagnet");t&&(e=t.trim().split(" ")),e&&e.length>1?(v.columnMagnetValue=parseFloat(e[0]),v.columnMagnetUnit=g.normalizeUnits(e[e.length-1])):(v.columnMagnetValue=1,v.columnMagnetUnit=g.normalizeUnits(t))}),r.$watchGroup(["shiftColumnMagnet","viewScale"],function(){var e,t=v.options.value("shiftColumnMagnet");t&&(e=t.trim().split(" ")),void 0!==e&&e.length>1?(v.shiftColumnMagnetValue=parseFloat(e[0]),v.shiftColumnMagnetUnit=g.normalizeUnits(e[e.length-1])):(v.shiftColumnMagnetValue=1,v.shiftColumnMagnetUnit=g.normalizeUnits(t))});var y=function(e){return v.shiftKey=e.shiftKey,!0};h.on("keyup keydown",y),r.$on("$destroy",function(){h.off("keyup keydown",y)}),this.scroll=new i(this),this.body=new a(this),this.header=new o(this),this.side=new s(this),this.objectModel=new l(this.api),this.rowsManager=new c(this),this.columnsManager=new u(this),this.timespansManager=new d(this),this.currentDateManager=new f(this),this.originalWidth=0,this.width=0,angular.isFunction(this.$scope.api)&&this.$scope.api(this.api);var b=function(e,t){if(void 0===t||e.length!==t.length)return!0;for(var n=0,i=e.length;i>n;n++)if(e[n].id!==t[n].id)return!0;return!1};r.$watchCollection("data",function(e,t){if(void 0!==t){var n=p.getRemovedIds(e,t);if(n.length===t.length)v.rowsManager.removeAll(),v.api.data.raise.clear();else{for(var i=0,a=n.length;a>i;i++){var r=n[i];v.rowsManager.removeRow(r)}var o=[];for(i=0,a=t.length;a>i;i++)n.indexOf(t[i].id)>-1&&o.push(t[i]);v.api.data.raise.remove(o)}}if(void 0!==e){var s=b(e,t);s&&v.rowsManager.resetNonModelLists();for(var l=0,c=e.length;c>l;l++){var u=e[l];v.rowsManager.addRow(u,s)}v.api.data.raise.change(e,t),v.api.data.raise.load(e)}})};return v.prototype.getDateByPosition=function(e,t,n){var i=this.columnsManager.getColumnByPosition(e,n);if(void 0!==i){var a,r;if(t)if(this.shiftKey)if(void 0!==this.shiftColumnMagnetValue&&void 0!==this.shiftColumnMagnetUnit)a=this.shiftColumnMagnetValue,r=this.shiftColumnMagnetUnit;else{var o=this.options.value("viewScale");o=o.trim();var s,l,c;o&&(c=o.split(" ")),c&&c.length>1?(s=parseFloat(c[0]),l=g.normalizeUnits(c[c.length-1])):(s=1,l=g.normalizeUnits(o)),a=.25*s,r=l}else a=this.columnMagnetValue,r=this.columnMagnetUnit;return i.getDateByPosition(e-i.left,a,r,this.options.value("timeFramesMagnet"))}},v.prototype.getBodyAvailableWidth=function(){var e=this.getWidth()-this.side.getWidth(),t=this.scroll.getBordersWidth(),n=e-(void 0!==t?this.scroll.getBordersWidth():0);return n-=1},v.prototype.getPositionByDate=function(e,t){if(void 0!==e){g.isMoment(g)||(e=g(e));var n=this.columnsManager.getColumnByDate(e,t);return void 0!==n?n.getPositionByDate(e):void 0}},v.prototype.loadData=function(e){if(angular.isArray(e)||(e=void 0!==e?[e]:[]),void 0===this.$scope.data)this.$scope.data=e;else for(var t=0,n=e.length;n>t;t++){var i=e[t],a=p.indexOfId(this.$scope.data,i.id);a>-1?this.$scope.data[a]=i:this.$scope.data.push(i)}var r=this.side.getWidth();r>0&&this.options.set("sideWidth",r)},v.prototype.getData=function(){return this.$scope.data},v.prototype.removeData=function(e){if(angular.isArray(e)||(e=void 0!==e?[e]:[]),void 0!==this.$scope.data)for(var t=0,n=e.length;n>t;t++){var i=e[t],a=p.indexOfId(this.$scope.data,i.id);if(a>-1)if(void 0===i.tasks||0===i.tasks.length)this.$scope.data.splice(a,1);else for(var r=this.$scope.data[a],o=0,s=i.tasks.length;s>o;o++){var l=i.tasks[o],c=p.indexOfId(r.tasks,l.id);c>-1&&r.tasks.splice(c,1)}}},v.prototype.clearData=function(){this.$scope.data=void 0},v.prototype.getWidth=function(){return this.$scope.ganttElementWidth},v.prototype.initialized=function(){this.api.core.raise.ready(this.api),this.rendered=!0,this.columnsManager.generateColumns();var e=this,t=function(){var t=e.side.getWidth();t>0&&e.options.set("sideWidth",t),e.api.core.raise.rendered(e.api)};m(t)},v}])}(),function(){"use strict";angular.module("gantt").factory("GanttObjectModel",["ganttUtils","moment",function(e,t){var n=function(e){this.api=e,this.api.registerEvent("tasks","clean"),this.api.registerEvent("rows","clean"),this.api.registerEvent("timespans","clean")};return n.prototype.cleanTask=function(n){void 0===n.id&&(n.id=e.randomUuid()),void 0===n.from||t.isMoment(n.from)||(n.from=t(n.from)),void 0===n.to||t.isMoment(n.to)||(n.to=t(n.to)),this.api.tasks.raise.clean(n)},n.prototype.cleanRow=function(n){void 0===n.id&&(n.id=e.randomUuid()),void 0===n.from||t.isMoment(n.from)||(n.from=t(n.from)),void 0===n.to||t.isMoment(n.to)||(n.to=t(n.to)),this.api.rows.raise.clean(n)},n.prototype.cleanTimespan=function(n){void 0===n.id&&(n.id=e.randomUuid()),void 0===n.from||t.isMoment(n.from)||(n.from=t(n.from)),void 0===n.to||t.isMoment(n.to)||(n.to=t(n.to)),this.api.timespans.raise.clean(n)},n}])}(),function(){"use strict";angular.module("gantt").factory("GanttRow",["GanttTask","moment","$filter",function(e,t,n){var i=function(e,t){this.rowsManager=e,this.model=t,this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]};return i.prototype.addTaskImpl=function(e,t){this.tasksMap[e.model.id]=e,this.tasks.push(e),t||(void 0===this.model.tasks&&(this.model.tasks=[]),-1===this.model.tasks.indexOf(e.model)&&this.model.tasks.push(e.model))},i.prototype.addTask=function(t,n){var i,a=!1;if(this.rowsManager.gantt.objectModel.cleanTask(t),t.id in this.tasksMap){if(i=this.tasksMap[t.id],i.model===t)return i;i.model=t,a=!0}else i=new e(this,t),this.addTaskImpl(i,n);return this.sortTasks(),this.setFromToByTask(i),n||(a?this.rowsManager.gantt.api.tasks.raise.change(i):this.rowsManager.gantt.api.tasks.raise.add(i)),i},i.prototype.moveTaskToRow=function(e,t){var n=e.row;n.removeTask(e.model.id,t,!0),e.row=this,this.addTaskImpl(e,t),this.sortTasks(),this.setFromToByTask(e),e.updatePosAndSize(),this.updateVisibleTasks(),n.$scope.$digest(),e.row.$scope.$digest(),this.rowsManager.gantt.api.tasks.raise.viewRowChange(e,n),t||this.rowsManager.gantt.api.tasks.raise.rowChange(e,n)},i.prototype.updateVisibleTasks=function(){var e=this.rowsManager.gantt.options.value("filterTask");if(e){"object"==typeof e&&(e={model:e});var t=this.rowsManager.gantt.options.value("filterTaskComparator");"function"==typeof t&&(t=function(e,n){return t(e.model,n.model)}),this.filteredTasks=n("filter")(this.tasks,e,t)}else this.filteredTasks=this.tasks.slice(0);this.visibleTasks=n("ganttTaskLimit")(this.filteredTasks,this.rowsManager.gantt)},i.prototype.updateTasksPosAndSize=function(){for(var e=0,t=this.tasks.length;t>e;e++)this.tasks[e].updatePosAndSize()},i.prototype.removeTask=function(e,t,n){if(e in this.tasksMap){var i,a,r=this.tasksMap[e];for(a=this.tasks.length-1;a>=0;a--)if(i=this.tasks[a],i.model.id===e){this.tasks.splice(a,1),this.from-i.model.from!==0&&this.to-i.model.to!==0||this.setFromTo();break}for(a=this.filteredTasks.length-1;a>=0;a--)if(i=this.filteredTasks[a],i.model.id===e){this.filteredTasks.splice(a,1);break}for(a=this.visibleTasks.length-1;a>=0;a--)if(i=this.visibleTasks[a],i.model.id===e){this.visibleTasks.splice(a,1);break}if(!t){if(delete this.tasksMap[e],void 0!==this.model.tasks){var o=this.model.tasks.indexOf(r.model);o>-1&&this.model.tasks.splice(o,1)}n||this.rowsManager.gantt.api.tasks.raise.remove(r)}return r}},i.prototype.removeAllTasks=function(){this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[]},i.prototype.setFromTo=function(){this.from=void 0,this.to=void 0;for(var e=0,t=this.tasks.length;t>e;e++)this.setFromToByTask(this.tasks[e])},i.prototype.setFromToByTask=function(e){this.setFromToByValues(e.model.from,e.model.to)},i.prototype.setFromToByValues=function(e,n){void 0!==e&&(void 0===this.from?this.from=t(e):e<this.from&&(this.from=t(e))),void 0!==n&&(void 0===this.to?this.to=t(n):n>this.to&&(this.to=t(n)))},i.prototype.sortTasks=function(){this.tasks.sort(function(e,t){return e.left-t.left})},i.prototype.clone=function(){for(var e=new i(this.rowsManager,angular.copy(this)),t=0,n=this.tasks.length;n>t;t++)e.addTask(this.tasks[t].model);return e},i}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowHeader",[function(){var e=function(e){this.gantt=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttRowsManager",["GanttRow","ganttArrays","$filter","$timeout","moment",function(e,t,n,i,a){var r=function(e){var t=this;this.gantt=e,this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[],this.rowsTaskWatchers=[],this._defaultFilterImpl=function(e,t,i){return n("filter")(e,t,i)},this.filterImpl=this._defaultFilterImpl,this.customRowSorters=[],this.customRowFilters=[],this.gantt.$scope.$watchGroup(["filterTask","filterTaskComparator"],function(e,n){e!==n&&t.updateVisibleTasks()}),this.gantt.$scope.$watchGroup(["filterRow","filterRowComparator"],function(e,n){e!==n&&t.updateVisibleRows()}),this.gantt.$scope.$watch("sortMode",function(e,n){e!==n&&t.sortRows()});var a=this.gantt.scroll.isVScrollbarVisible();this.gantt.$scope.$watchGroup(["maxHeight","gantt.rowsManager.visibleRows.length"],function(e,n){e!==n&&i(function(){var e=t.gantt.scroll.isVScrollbarVisible();e!==a&&(a=e,t.gantt.columnsManager.updateColumnsMeta())})}),this.gantt.api.registerMethod("rows","sort",r.prototype.sortRows,this),this.gantt.api.registerMethod("rows","applySort",r.prototype.applySort,this),this.gantt.api.registerMethod("rows","refresh",r.prototype.updateVisibleObjects,this),this.gantt.api.registerMethod("rows","removeRowSorter",r.prototype.removeCustomRowSorter,this),this.gantt.api.registerMethod("rows","addRowSorter",r.prototype.addCustomRowSorter,this),this.gantt.api.registerMethod("rows","removeRowFilter",r.prototype.removeCustomRowFilter,this),this.gantt.api.registerMethod("rows","addRowFilter",r.prototype.addCustomRowFilter,this),this.gantt.api.registerMethod("rows","setFilterImpl",r.prototype.setFilterImpl,this),this.gantt.api.registerEvent("tasks","add"),this.gantt.api.registerEvent("tasks","change"),this.gantt.api.registerEvent("tasks","viewChange"),this.gantt.api.registerEvent("tasks","rowChange"),this.gantt.api.registerEvent("tasks","viewRowChange"),this.gantt.api.registerEvent("tasks","remove"),this.gantt.api.registerEvent("tasks","filter"),this.gantt.api.registerEvent("tasks","displayed"),this.gantt.api.registerEvent("rows","add"),this.gantt.api.registerEvent("rows","change"),this.gantt.api.registerEvent("rows","remove"),this.gantt.api.registerEvent("rows","move"),this.gantt.api.registerEvent("rows","displayed"),this.gantt.api.registerEvent("rows","filter"),this.updateVisibleObjects()};return r.prototype.resetNonModelLists=function(){this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[]},r.prototype.addRow=function(n,i){var a,r,o,s=!1;if(this.gantt.objectModel.cleanRow(n),n.id in this.rowsMap){if(a=this.rowsMap[n.id],i&&(this.rows.push(a),this.sortedRows.push(a),this.filteredRows.push(a),this.customFilteredRows.push(a),this.visibleRows.push(a)),a.model===n)return;var l=t.getRemovedIds(n.tasks,a.model.tasks);for(r=0,o=l.length;o>r;r++){var c=l[r];a.removeTask(c)}a.model=n,s=!0}else a=new e(this,n),this.rowsMap[n.id]=a,this.rows.push(a),this.sortedRows.push(a),this.filteredRows.push(a),this.customFilteredRows.push(a),this.visibleRows.push(a);if(void 0!==n.tasks&&n.tasks.length>0){for(r=0,o=n.tasks.length;o>r;r++){var u=n.tasks[r];a.addTask(u)}a.updateVisibleTasks()}if(s?this.gantt.api.rows.raise.change(a):this.gantt.api.rows.raise.add(a),!s){var d=this.gantt.$scope.$watchCollection(function(){return n.tasks},function(e,n){if(e!==n){var i,r,o=t.getRemovedIds(e,n);for(i=0,r=o.length;r>i;i++){var s=o[i];a.removeTask(s)}if(void 0!==e){for(i=0,r=e.length;r>i;i++){var l=e[i];a.addTask(l)}a.updateVisibleTasks()}}});this.rowsTaskWatchers.push(d)}return s},r.prototype.removeRow=function(e){if(e in this.rowsMap){delete this.rowsMap[e];var n,i,a=t.indexOfId(this.rows,e,["model","id"]);if(a>-1){n=this.rows.splice(a,1)[0];var r=this.rowsTaskWatchers.splice(a,1)[0];r()}return t.removeId(this.sortedRows,e,["model","id"]),t.removeId(this.filteredRows,e,["model","id"]),t.removeId(this.customFilteredRows,e,["model","id"]),t.removeId(this.visibleRows,e,["model","id"]),this.gantt.api.rows.raise.remove(n),i}},r.prototype.removeAll=function(){this.rowsMap={},this.rows=[],this.sortedRows=[],this.filteredRows=[],this.customFilteredRows=[],this.visibleRows=[];for(var e=0,t=this.rowsTaskWatchers.length;t>e;e++){var n=this.rowsTaskWatchers[e];n()}this.rowsTaskWatchers=[]},r.prototype.sortRows=function(){var e=this.gantt.options.value("sortMode");if(void 0!==e){var t=!1;angular.isString(e)&&"-"===e.charAt(0)&&(t=!0,e=e.substr(1));var i=n("orderBy");this.sortedRows=i(this.rows,e,t)}else this.sortedRows=this.rows.slice();this.sortedRows=this.applyCustomRowSorters(this.sortedRows),this.updateVisibleRows()},r.prototype.removeCustomRowSorter=function(e){var t=this.customRowSorters.indexOf(e);t>-1&&this.customRowSorters.splice(t,1)},r.prototype.addCustomRowSorter=function(e){this.customRowSorters.push(e)},r.prototype.applyCustomRowSorters=function(e){for(var t=0;t<this.customRowSorters.length;t++)e=this.customRowSorters[t](e);return e},r.prototype.applySort=function(){var e=this.gantt.$scope.data;e.splice(0,e.length);for(var t=[],n=0,i=this.sortedRows.length;i>n;n++)e.push(this.sortedRows[n].model),t.push(this.sortedRows[n]);this.rows=t},r.prototype.moveRow=function(e,n){var i=this.gantt.options.value("sortMode");void 0!==i&&(this.applySort(),this.gantt.options.set("sortMode",void 0));var a=this.rows.indexOf(n),r=this.rows.indexOf(e);a>-1&&r>-1&&a!==r&&(t.moveToIndex(this.rows,r,a),t.moveToIndex(this.rowsTaskWatchers,r,a),t.moveToIndex(this.gantt.$scope.data,r,a),this.gantt.api.rows.raise.change(e),this.gantt.api.rows.raise.move(e,r,a),this.updateVisibleObjects(),this.sortRows())},r.prototype.updateVisibleObjects=function(){this.updateVisibleRows(),this.updateVisibleTasks()},r.prototype.updateVisibleRows=function(){var e=this.filteredRows,t=this.gantt.options.value("filterRow");if(t){"object"==typeof t&&(t={model:t});var n=this.gantt.options.value("filterRowComparator");if("function"==typeof n){var i=this.gantt;n=function(e,t){return i.options.value("filterRowComparator")(e,t)}}this.filteredRows=this.filterImpl(this.sortedRows,t,n)}else this.filteredRows=this.sortedRows.slice(0);var a=!angular.equals(e,this.filteredRows);this.customFilteredRows=this.applyCustomRowFilters(this.filteredRows),this.visibleRows=this.customFilteredRows,this.gantt.api.rows.raise.displayed(this.sortedRows,this.filteredRows,this.visibleRows),a&&this.gantt.api.rows.raise.filter(this.sortedRows,this.filteredRows)},r.prototype.removeCustomRowFilter=function(e){var t=this.customRowFilters.indexOf(e);t>-1&&this.customRowFilters.splice(t,1)},r.prototype.addCustomRowFilter=function(e){this.customRowFilters.push(e)},r.prototype.applyCustomRowFilters=function(e){for(var t=0;t<this.customRowFilters.length;t++)e=this.customRowFilters[t](e);return e},r.prototype.setFilterImpl=function(e){e?this.filterImpl=e:this.filterImpl=this._defaultFilterImpl},r.prototype.updateVisibleTasks=function(){for(var e=[],t=[],n=[],i=[],a=0;a<this.rows.length;a++){var r=this.rows[a];e=e.concat(r.filteredTasks),r.updateVisibleTasks(),t=t.concat(r.filteredTasks),i=i.concat(r.visibleTasks),n=n.concat(r.tasks)}this.gantt.api.tasks.raise.displayed(n,t,i);var o=!angular.equals(e,t);o&&this.gantt.api.tasks.raise.filter(n,t,i)},r.prototype.updateTasksPosAndSize=function(){for(var e=0,t=this.rows.length;t>e;e++)this.rows[e].updateTasksPosAndSize()},r.prototype.getExpandedFrom=function(e){e=e?a(e):e;for(var t=e,n=0;n<this.rows.length;n++)(void 0===t||t>this.rows[n].from)&&(t=this.rows[n]);return t&&(!e||e>t)?t:e},r.prototype.getExpandedTo=function(e){e=e?a(e):e;for(var t=e,n=0;n<this.rows.length;n++)(void 0===t||t<this.rows[n].to)&&(t=this.rows[n].to);var i=this.gantt.options.value("toDate");return t&&(!i||t>i)?t:e},r.prototype.getDefaultFrom=function(){for(var e,t=0;t<this.rows.length;t++)(void 0===e||this.rows[t].from<e)&&(e=this.rows[t].from);return e},r.prototype.getDefaultTo=function(){for(var e,t=0;t<this.rows.length;t++)(void 0===e||this.rows[t].to>e)&&(e=this.rows[t].to);return e},r}])}(),function(){"use strict";angular.module("gantt").factory("GanttTask",["moment",function(e){var t=function(e,t){this.rowsManager=e.rowsManager,this.row=e,this.model=t,this.truncatedLeft=!1,this.truncatedRight=!1};return t.prototype.isMilestone=function(){return!this.model.to||this.model.from-this.model.to===0},t.prototype.isOutOfRange=function(){var e=this.rowsManager.gantt.columnsManager.getFirstColumn(),t=this.rowsManager.gantt.columnsManager.getLastColumn();return void 0===e||this.model.to<e.date||void 0===t||this.model.from>t.endDate},t.prototype.updatePosAndSize=function(){var t=this.left,n=this.width,i=this.truncatedRight,a=this.truncatedLeft;!this.isMoving&&this.isOutOfRange()?(this.modelLeft=void 0,this.modelWidth=void 0):(this.modelLeft=this.rowsManager.gantt.getPositionByDate(this.model.from),this.modelWidth=this.rowsManager.gantt.getPositionByDate(this.model.to)-this.modelLeft);var r=this.rowsManager.gantt.columnsManager.getLastColumn(),o=r?r.left+r.width:0,s=this.modelLeft,l=this.modelWidth;this.rowsManager.gantt.options.value("daily")&&(s=this.rowsManager.gantt.getPositionByDate(e(this.model.from).startOf("day")),l=this.rowsManager.gantt.getPositionByDate(e(this.model.to).endOf("day"))-s),void 0===s||void 0===l||0>s+l||s>o?(this.left=void 0,this.width=void 0):(this.left=Math.min(Math.max(s,0),this.rowsManager.gantt.width),0>s?(this.truncatedLeft=!0,l+s>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.width=this.rowsManager.gantt.width):(this.truncatedRight=!1,this.width=l+s)):l+s>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.rowsManager.gantt.width-s):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=l),this.width<0&&(this.left=this.left+this.width,this.width=-this.width)),this.updateView(),this.rowsManager.gantt.isRefreshingColumns||t===this.left&&n===this.width&&i===this.truncatedRight&&a===this.truncatedLeft||this.rowsManager.gantt.api.tasks.raise.viewChange(this)},t.prototype.updateView=function(){if(this.$element)if(void 0===this.left||void 0===this.width)this.$element.css("display","none");else{if(this.$element.css({left:this.left+"px",width:this.width+"px",display:""}),this.model.priority>0)for(var e=this.model.priority,t=this.$element.children(),n=0;n<t.length;n++)angular.element(t[n]).css("z-index",e);this.$element.toggleClass("gantt-task-milestone",this.isMilestone())}},t.prototype.getBackgroundElement=function(){if(void 0!==this.$element){var e=this.$element[0].querySelector(".gantt-task-background");return void 0!==e&&(e=angular.element(e)),e}},t.prototype.getContentElement=function(){if(void 0!==this.$element){var e=this.$element[0].querySelector(".gantt-task-content");return void 0!==e&&(e=angular.element(e)),e}},t.prototype.getForegroundElement=function(){if(void 0!==this.$element){var e=this.$element[0].querySelector(".gantt-task-foreground");return void 0!==e&&(e=angular.element(e)),e}},t.prototype.setFrom=function(e,t){this.model.from=this.rowsManager.gantt.getDateByPosition(e,t),this.row.setFromTo(),this.updatePosAndSize()},t.prototype.setTo=function(e,t){this.model.to=this.rowsManager.gantt.getDateByPosition(e,t),this.row.setFromTo(),this.updatePosAndSize()},t.prototype.moveTo=function(e,t){var n,i;e>this.modelLeft?(this.model.to=this.rowsManager.gantt.getDateByPosition(e+this.modelWidth,t),n=this.rowsManager.gantt.getPositionByDate(this.model.to),i=n-this.modelWidth,this.model.from=this.rowsManager.gantt.getDateByPosition(i,!1)):(this.model.from=this.rowsManager.gantt.getDateByPosition(e,t),i=this.rowsManager.gantt.getPositionByDate(this.model.from),n=i+this.modelWidth,this.model.to=this.rowsManager.gantt.getDateByPosition(n,!1)),this.row.setFromTo(),this.updatePosAndSize()},t.prototype.clone=function(){return new t(this.row,angular.copy(this.model))},t}])}(),function(){"use strict";angular.module("gantt").factory("GanttBody",["GanttBodyColumns","GanttBodyRows","GanttBodyBackground","GanttBodyForeground",function(e,t,n,i){var a=function(a){this.gantt=a,this.background=new n(this),this.foreground=new i(this),this.columns=new e(this),this.rows=new t(this)};return a}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyBackground",[function(){var e=function(e){this.body=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyColumns",[function(){var e=function(e){this.body=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyForeground",[function(){var e=function(e){this.body=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttBodyRows",[function(){var e=function(e){this.body=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeader",["GanttHeaderColumns",function(e){var t=function(t){this.gantt=t,this.columns=new e(this),this.getHeight=function(){return this.$element[0].offsetHeight}};return t}])}(),function(){"use strict";angular.module("gantt").factory("GanttHeaderColumns",[function(){var e=function(e){this.$element=e};return e}])}(),function(){"use strict";angular.module("gantt").factory("GanttScroll",[function(){var e=function(t){this.gantt=t,this.gantt.api.registerEvent("scroll","scroll"),this.gantt.api.registerMethod("scroll","to",e.prototype.scrollTo,this),this.gantt.api.registerMethod("scroll","toDate",e.prototype.scrollToDate,this),this.gantt.api.registerMethod("scroll","left",e.prototype.scrollToLeft,this),this.gantt.api.registerMethod("scroll","right",e.prototype.scrollToRight,this),this.gantt.api.registerMethod("scroll","setWidth",e.prototype.setWidth,this)};return e.prototype.getScrollLeft=function(){return void 0===this.$element?void 0:(void 0===this.cachedScrollLeft&&(this.cachedScrollLeft=this.$element[0].scrollLeft),this.cachedScrollLeft)},e.prototype.getScrollWidth=function(){return void 0===this.$element?void 0:this.$element[0].scrollWidth},e.prototype.getWidth=function(){return void 0===this.$element?void 0:this.$element[0].offsetWidth},e.prototype.setWidth=function(e){this.$element[0]&&(this.$element[0].offsetWidth=e)},e.prototype.getBordersWidth=function(){if(void 0!==this.$element){if(this.$element[0].clientWidth)return this.$element[0].offsetWidth-this.$element[0].clientWidth;var e=window.getComputedStyle(this.$element[0]).getPropertyValue("border-left-width")?window.getComputedStyle(this.$element[0]).getPropertyValue("border-left-width").match(/\d+/)[0]:0,t=window.getComputedStyle(this.$element[0]).getPropertyValue("border-right-width")?window.getComputedStyle(this.$element[0]).getPropertyValue("border-right-width").match(/\d+/)[0]:0;return parseInt(e)+parseInt(t)}},e.prototype.getBordersHeight=function(){return void 0===this.$element?void 0:this.$element[0].offsetHeight-this.$element[0].clientHeight},e.prototype.isVScrollbarVisible=function(){return void 0!==this.$element?this.$element[0].scrollHeight>this.$element[0].offsetHeight:void 0},e.prototype.isHScrollbarVisible=function(){return void 0!==this.$element?this.$element[0].scrollWidth>this.$element[0].offsetWidth:void 0},e.prototype.scrollTo=function(e){this.$element[0].scrollLeft=e,this.$element.triggerHandler("scroll")},e.prototype.scrollToLeft=function(e){this.$element[0].scrollLeft-=e,this.$element.triggerHandler("scroll")},e.prototype.scrollToRight=function(e){this.$element[0].scrollLeft+=e,this.$element.triggerHandler("scroll")},e.prototype.scrollToDate=function(e){var t=this.gantt.getPositionByDate(e);void 0!==t&&(this.$element[0].scrollLeft=t-this.$element[0].offsetWidth/2)},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttSide",[function(){var e=function(e){this.gantt=e};return e.prototype.getWidth=function(){if(this.gantt.options.value("showSide")){var e=this.gantt.options.value("sideWidth");if(void 0===e&&void 0!==this.$element&&void 0!==this.$element.css("width")&&this.$element.css("width",""),void 0!==this.$element&&(e=this.$element[0].offsetWidth),void 0!==e)return e}return 0},e.prototype.show=function(e){void 0!==this.$element&&this.$element.toggleClass("ng-hide",!e)},e.prototype.isShown=function(){return void 0!==this.$element?!this.$element.hasClass("ng-hide"):void 0},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespan",[function(){var e=function(e,t){this.gantt=e,this.model=t};return e.prototype.updatePosAndSize=function(){this.modelLeft=this.gantt.getPositionByDate(this.model.from),this.modelWidth=this.gantt.getPositionByDate(this.model.to)-this.modelLeft;var e=this.gantt.columnsManager.getLastColumn(),t=e?e.left+e.width:0;this.modelLeft+this.modelWidth<0||this.modelLeft>t?(this.left=void 0,this.width=void 0):(this.left=Math.min(Math.max(this.modelLeft,0),this.gantt.width),this.modelLeft<0?(this.truncatedLeft=!0,this.modelWidth+this.modelLeft>this.gantt.width?(this.truncatedRight=!0,this.width=this.gantt.width):(this.truncatedRight=!1,this.width=this.modelWidth+this.modelLeft)):this.modelWidth+this.modelLeft>this.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.gantt.width-this.modelLeft):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=this.modelWidth),this.width<0&&(this.left=this.left+this.width,this.width=-this.width)),this.updateView()},e.prototype.updateView=function(){this.$element&&(void 0===this.left||void 0===this.width?this.$element.css("display","none"):(this.$element.css("display",""),this.$element.css("left",this.left+"px"),this.$element.css("width",this.width+"px")))},e.prototype.setFrom=function(e){this.from=this.gantt.getDateByPosition(e),this.updatePosAndSize()},e.prototype.setTo=function(e){this.to=this.gantt.getDateByPosition(e),this.updatePosAndSize()},e.prototype.moveTo=function(e){this.from=this.gantt.getDateByPosition(e),this.to=this.gantt.getDateByPosition(e+this.width),this.updatePosAndSize()},e.prototype.clone=function(){return new e(this.gantt,angular.copy(this.model))},e}])}(),function(){"use strict";angular.module("gantt").factory("GanttTimespansManager",["GanttTimespan",function(e){var t=function(e){var t=this;this.gantt=e,this.timespansMap={},this.timespans=[],this.gantt.$scope.$watchCollection("timespans",function(e){t.clearTimespans(),t.loadTimespans(e)}),this.gantt.api.registerMethod("timespans","load",this.loadTimespans,this),this.gantt.api.registerMethod("timespans","remove",this.removeTimespans,this),this.gantt.api.registerMethod("timespans","clear",this.clearTimespans,this),this.gantt.api.registerEvent("timespans","add"),this.gantt.api.registerEvent("timespans","remove"),this.gantt.api.registerEvent("timespans","change")};return t.prototype.loadTimespans=function(e){angular.isArray(e)||(e=void 0!==e?[e]:[]),this.gantt.$scope.timespans=e;for(var t=0,n=e.length;n>t;t++){var i=e[t];this.gantt.objectModel.cleanTimespan(i),this.loadTimespan(i)}},t.prototype.loadTimespan=function(t){var n,i=!1;return t.id in this.timespansMap?(n=this.timespansMap[t.id],n.model=t,i=!0,this.gantt.api.timespans.raise.change(n)):(n=new e(this.gantt,t),this.timespansMap[t.id]=n,this.timespans.push(n),this.gantt.api.timespans.raise.add(n)),n.updatePosAndSize(),i},t.prototype.removeTimespans=function(e){angular.isArray(e)||(e=[e]);for(var t=0,n=e.length;n>t;t++){var i=e[t];this.removeTimespan(i.id)}this.updateVisibleObjects()},t.prototype.removeTimespan=function(e){if(e in this.timespansMap){delete this.timespansMap[e];for(var t,n,i=this.timespans.length-1;i>=0;i--)if(n=this.timespans[i],n.model.id===e){t=n,this.timespans.splice(i,1);break}return this.gantt.api.timespans.raise.remove(t),t}},t.prototype.clearTimespans=function(){this.timespansMap={},this.timespans=[]},t.prototype.updateTimespansPosAndSize=function(){for(var e=0,t=this.timespans.length;t>e;e++)this.timespans[e].updatePosAndSize()},t}])}(),function(){"use strict";angular.module("gantt").service("ganttArrays",[function(){return{moveToIndex:function(e,t,n){if(n>=e.length)for(var i=n-e.length;i--+1;)e.push(void 0);return e.splice(n,0,e.splice(t,1)[0]),e},getRemovedIds:function(e,t,n){void 0===n&&(n="id");var i,a,r=[];if(void 0!==t)for(i=0,a=t.length;a>i;i++)r.push(t[i][n]);if(void 0!==e)for(i=0,a=e.length;a>i;i++){var o=e[i];if(void 0!==o[n]){var s=r.indexOf(o[n]);s>-1&&r.splice(s,1)}}return r},indexOfId:function(e,t,n){var i;if(void 0===n)n="id";else if(n instanceof Array){for(i=e.length-1;i>=0;i--){for(var a=e[i],r=0,o=n.length;o>r;r++)a=a[n[r]];if(a===t)return i}return-1}for(i=e.length-1;i>=0;i--)if(e[i][n]===t)return i;return-1},removeId:function(e,t,n){var i=this.indexOfId(e,t,n);return i>-1?e.splice(i,1)[0]:void 0},remove:function(e,t){var n=e.indexOf(t);return n>-1?(e.splice(n,1),!0):!1}}}])}(),function(){"use strict";angular.module("gantt").service("ganttBinarySearch",[function(){return{getIndicesOnly:function(e,t,n,i){for(var a=-1,r=e.length;r-a>1;){var o=Math.floor((a+r)/2);(i?n(e[o])<t:n(e[o])<=t)?a=o:r=o}return i||void 0===e[a]||n(e[a])!==t||(r=a),[a,r]},get:function(e,t,n,i){var a=this.getIndicesOnly(e,t,n,i);return[e[a[0]],e[a[1]]]}}}])}(),function(){"use strict";angular.module("gantt").factory("GanttHierarchy",[function(){var e=function(){var e=this,t={},n={},i={},a={},r={},o={},s=function(e,t){if(void 0!==t){var n=i[e.model.name];void 0===n&&(n=[],
i[e.model.name]=n),n.push(t);var s=a[e.model.id];void 0===s&&(s=[],a[e.model.id]=s),s.push(t),r[t.model.name]=e,o[t.model.id]=e}};this.refresh=function(l){t={},n={},i={},a={},r={},o={};for(var c,u=0;u<l.length;u++)c=l[u],t[c.model.name]=c,n[c.model.id]=c;for(u=0;u<l.length;u++){if(c=l[u],void 0!==c.model.parent){var d=t[c.model.parent];void 0===d&&(d=n[c.model.parent]),void 0!==d&&s(d,c)}if(void 0!==c.model.children)for(var f=c.model.children,p=0;p<f.length;p++){var g=f[p],h=t[g];void 0===h&&(h=n[g]),void 0!==h&&s(c,h)}}var m=[];for(u=0;u<l.length;u++)c=l[u],void 0===e.parent(c)&&m.push(c);return m},this.children=function(e){var t=a[e.model.id];return t},this.descendants=function(t){var n=[],i=e.children(t);if(n.push.apply(n,i),void 0!==i)for(var a=0;a<i.length;a++){var r=e.descendants(i[a]);n.push.apply(n,r)}return n},this.parent=function(e){var t=o[e.model.id];return t},this.ancestors=function(t){for(var n=[],i=e.parent(t);void 0!==i;)n.push(i),i=e.parent(i);return n}};return e}])}(),function(){"use strict";angular.module("gantt").service("ganttUtils",[function(){return{createBoundedWrapper:function(e,t){return function(){return t.apply(e,arguments)}},firstProperty:function(e,t,n){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(void 0!==r&&t in r&&void 0!==r[t])return r[t]}return n},angularIndexOf:function(e,t){for(var n=0;n<e.length;n++)if(angular.equals(e[n],t))return n;return-1},random4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},randomUuid:function(){return this.random4()+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+"-"+this.random4()+this.random4()+this.random4()},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}()}}])}(),function(){"use strict";angular.module("gantt").filter("ganttColumnLimit",["ganttBinarySearch",function(e){var t=function(e){return e.left};return function(n,i){var a=i.scroll.getScrollLeft(),r=i.getWidth()-i.side.getWidth();if(r>0){var o=e.getIndicesOnly(n,a,t)[0],s=e.getIndicesOnly(n,a+r,t)[1];return n.slice(o,s)}return n.slice()}}])}(),function(){"use strict";angular.module("gantt").filter("ganttTaskLimit",[function(){return function(e,t){var n=t.columnsManager.getFirstColumn(),i=t.columnsManager.getLastColumn();if(void 0!==n&&void 0!==i){for(var a=n.date,r=i.endDate,o=[],s=t.scroll.getScrollLeft(),l=t.getWidth()-t.side.getWidth(),c=0,u=e.length;u>c;c++){var d=e[c];d.active?o.push(d):d.model.to>=a&&d.model.from<=r&&(void 0===d.left&&d.updatePosAndSize(),(!l||d.left>=s&&d.left<=s+l||d.left+d.width>=s&&d.left+d.width<=s+l||d.left<s&&d.left+d.width>s+l)&&o.push(d))}return o}return e.splice()}}])}(),function(){"use strict";angular.module("gantt").directive("ganttResizer",["$document","$parse","$timeout","ganttMouseOffset",function(e,t,n,i){return{restrict:"A",require:"^gantt",scope:{targetElement:"=ganttResizer",enabled:"@?ganttResizerEnabled"},link:function(a,r,o,s){function l(){return s.gantt.options.value(o.resizerWidth)}function c(e){e!==l()&&(s.gantt.options.set(o.resizerWidth,e),void 0!==h&&g[h].raise.resize(e),n(function(){s.gantt.columnsManager.updateColumnsMeta()}))}function u(e){e.preventDefault(),c(void 0)}function d(e){a.$evalAsync(function(){var t=i.getOffsetForElement(a.targetElement[0],e),n=s.gantt.getWidth()-s.gantt.scroll.getBordersWidth(),r=Math.min(Math.max(t.x,0),n);c(r)})}function f(){void 0!==h&&g[h].raise.resizeEnd(l()),e.unbind("mousemove",d),e.unbind("mouseup",f)}function p(t){t.preventDefault(),void 0!==h&&g[h].raise.resizeBegin(l()),e.on("mousemove",d),e.on("mouseup",f)}var g=s.gantt.api,h=o.ganttResizerEventTopic;void 0===a.enabled&&(a.enabled=!0),o.$observe("ganttResizerEnabled",function(e){a.enabled=t(e)()}),a.$watch("enabled",function(e){void 0===e&&(e=!0),r.toggleClass("gantt-resizer-enabled",e),e?(r.on("dblclick",u),r.on("mousedown",p)):(r.off("dblclick",u),r.off("mousedown",p))}),a.$watch(function(){return l()},function(e,t){e!==t&&(a.targetElement.css("width",e+"px"),a.targetElement[0].offsetWidth>0&&c(a.targetElement[0].offsetWidth))}),h&&(g.registerEvent(h,"resize"),g.registerEvent(h,"resizeBegin"),g.registerEvent(h,"resizeEnd"),g.registerMethod(h,"setWidth",c,this),g.registerMethod(h,"getWidth",l,this))}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttHorizontalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(e,t,n,i){i.registerHorizontalReceiver(t)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollManager",function(){return{restrict:"A",scope:{},controller:["$scope",function(e){e.horizontal=[],e.vertical=[],this.registerVerticalReceiver=function(t){t.css("position","relative"),e.vertical.push(t[0])},this.registerHorizontalReceiver=function(t){t.css("position","relative"),e.horizontal.push(t[0])},this.getHorizontalRecievers=function(){return e.horizontal},this.getVerticalRecievers=function(){return e.vertical}}]}})}(),function(){"use strict";angular.module("gantt").directive("ganttScrollSender",[function(){return{restrict:"A",require:["^gantt","^ganttScrollManager"],link:function(e,t,n,i){var a=t[0],r=function(){var e,t,n=i[1].getVerticalRecievers();for(e=0,t=n.length;t>e;e++){var r=n[e];r.parentNode.scrollTop!==a.scrollTop&&(r.parentNode.scrollTop=a.scrollTop)}var o=i[1].getHorizontalRecievers();for(e=0,t=o.length;t>e;e++){var s=o[e];s.parentNode.scrollLeft!==a.scrollLeft&&(s.parentNode.scrollLeft=a.scrollLeft)}};t.bind("scroll",r),e.$watch(function(){return i[0].gantt.width},function(e,t){if(e!==t)for(var n=i[1].getHorizontalRecievers(),a=0,r=n.length;r>a;a++){var o=n[a];o.style.width=e+"px"}})}}}])}(),function(){"use strict";angular.module("gantt").directive("ganttScrollable",["GanttDirectiveBuilder","$timeout","ganttDebounce","moment",function(e,t,n,i){var a=new e("ganttScrollable");return a.controller=function(e,a){e.gantt.scroll.$element=a;var r,o,s=function(t,n,a){var r=e.gantt.options.value("autoExpand");if("both"===r||r===!0||r===a){var o,s,l=e.gantt.options.value("viewScale");l=l.trim(),"s"===l.charAt(l.length-1)&&(l=l.substring(0,l.length-1));var c,u,d;l&&(d=l.split(" ")),d&&d.length>1?(c=parseFloat(d[0]),u=d[d.length-1]):(c=1,u=l),"left"===a?(o=i(n).add(-5*c,u),e.fromDate=o):(s=i(n).add(5*c,u),e.toDate=s),e.gantt.api.scroll.raise.scroll(t.scrollLeft,n,a)}};a.bind("scroll",n(function(){var n,i,l=a[0],c=l.scrollLeft;e.gantt.scroll.cachedScrollLeft=c,e.gantt.columnsManager.updateVisibleColumns(),e.gantt.rowsManager.updateVisibleObjects(),r>c&&0===c?(n="left",i=e.gantt.columnsManager.from):c>r&&l.offsetWidth+c>=l.scrollWidth-1&&(n="right",i=e.gantt.columnsManager.to),r=c,void 0!==i?(o&&t.cancel(o),o=t(function(){s(l,i,n)},300)):e.gantt.api.scroll.raise.scroll(c)},5)),e.getScrollableCss=function(){var t={},n=e.gantt.options.value("maxHeight");n>0&&(t["max-height"]=n-e.gantt.header.getHeight()+"px",t["overflow-y"]="auto",e.gantt.scroll.isVScrollbarVisible()&&(t["border-right"]="none"));var i=this.gantt.options.value("columnWidth"),a=0===e.gantt.width?!1:e.gantt.width<e.gantt.getWidth()-e.gantt.side.getWidth();return void 0!==i&&a&&(t.width=e.gantt.width+this.gantt.scroll.getBordersWidth()+"px"),t}},a.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttVerticalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",link:function(e,t,n,i){i.registerVerticalReceiver(t)}}})}(),function(){"use strict";angular.module("gantt").directive("ganttElementHeightListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,t,n){var i=n.ganttElementHeightListener;""===i&&(i="ganttElementHeight");for(var a=e;0===i.indexOf("$parent.");)i=i.substring("$parent.".length),a=a.$parent;a.$watch(function(){return t[0].offsetHeight},function(e){e>0&&(a[i]=e)})}]}}])}(),function(){"use strict";angular.module("gantt").directive("ganttElementWidthListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,t,n){var i=n.ganttElementWidthListener;""===i&&(i="ganttElementWidth");for(var a=e;0===i.indexOf("$parent.");)i=i.substring("$parent.".length),a=a.$parent;a.$watch(function(){return t[0].offsetWidth},function(e){e>0&&(a[i]=e)})}]}}])}(),function(){"use strict";angular.module("gantt").directive("ganttBody",["GanttDirectiveBuilder",function(e){var t=new e("ganttBody");return t.controller=function(e,t){e.gantt.body.$element=t,e.gantt.body.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyBackground",["GanttDirectiveBuilder",function(e){var t=new e("ganttBodyBackground");return t.controller=function(e,t){e.gantt.body.background.$element=t,e.gantt.body.background.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyColumns",["GanttDirectiveBuilder",function(e){var t=new e("ganttBodyColumns");return t.controller=function(e,t){e.gantt.body.columns.$element=t,e.gantt.body.background.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyForeground",["GanttDirectiveBuilder",function(e){var t=new e("ganttBodyForeground");return t.controller=function(e,t){e.gantt.body.foreground.$element=t,e.gantt.body.foreground.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttBodyRows",["GanttDirectiveBuilder",function(e){var t=new e("ganttBodyRows");return t.controller=function(e,t){e.gantt.body.rows.$element=t,e.gantt.body.rows.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumn",["GanttDirectiveBuilder",function(e){var t=new e("ganttColumn");return t.controller=function(e,t){e.column.$element=t,e.column.$scope=e,e.column.updateView()},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttColumnHeader",["GanttDirectiveBuilder",function(e){var t=new e("ganttColumnHeader");return t.controller=function(e,t){e.column.$element=t,e.column.$scope=e,e.column.updateView()},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeader",["GanttDirectiveBuilder",function(e){var t=new e("ganttHeader");return t.controller=function(e,t){e.gantt.header.$element=t,e.gantt.header.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttHeaderColumns",["GanttDirectiveBuilder",function(e){var t=new e("ganttHeaderColumns");return t.controller=function(e,t){e.gantt.header.columns.$element=t,e.gantt.header.columns.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRow",["GanttDirectiveBuilder",function(e){var t=new e("ganttRow");return t.controller=function(e,t){e.row.$element=t,e.row.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowBackground",["GanttDirectiveBuilder",function(e){var t=new e("ganttRowBackground");return t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttRowLabel",["GanttDirectiveBuilder",function(e){var t=new e("ganttRowLabel");return t.restrict="A",t.templateUrl=void 0,t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttScrollableHeader",["GanttDirectiveBuilder","ganttLayout",function(e,t){var n=new e("ganttScrollableHeader");return n.controller=function(e){var n=t.getScrollBarWidth();e.getScrollableHeaderCss=function(){var t={},i=e.gantt.scroll.isVScrollbarVisible(),a=i?n:0,r=this.gantt.options.value("columnWidth"),o=0===e.gantt.width?!1:e.gantt.width<e.gantt.getWidth()-e.gantt.side.getWidth();return void 0!==r&&o?t.width=e.gantt.width-a+this.gantt.scroll.getBordersWidth()+"px":i&&(t.width=e.gantt.getWidth()-e.gantt.side.getWidth()-a+"px"),t}},n.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSide",["GanttDirectiveBuilder",function(e){var t=new e("ganttSide");return t.controller=function(e,t){e.gantt.side.$element=t,e.gantt.side.$scope=e},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSideBackground",["GanttDirectiveBuilder","ganttLayout",function(e,t){var n=new e("ganttSideBackground");return n.controller=function(e){var n=t.getScrollBarHeight();e.getMaxHeightCss=function(){var t={};if(e.maxHeight){var i=e.gantt.scroll.isHScrollbarVisible()?n:0;t["max-height"]=e.maxHeight-i-e.gantt.header.getHeight()+"px"}return t}},n.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttSideContent",["GanttDirectiveBuilder",function(e){var t=new e("ganttSideContent");return t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTask",["GanttDirectiveBuilder","moment",function(e,t){var n=new e("ganttTask");return n.controller=function(e,n){e.task.$element=n,e.task.$scope=e,e.getTaskContent=function(){return void 0!==e.task.model.content?e.task.model.content:e.task.rowsManager.gantt.options.value("taskContent")},e.simplifyMoment=function(e){return t.isMoment(e)?e.unix():e},e.$watchGroup(["simplifyMoment(task.model.from)","simplifyMoment(task.model.to)"],function(){e.task.updatePosAndSize()})},n.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskBackground",["GanttDirectiveBuilder",function(e){var t=new e("ganttTaskBackground");return t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskContent",["GanttDirectiveBuilder",function(e){var t=new e("ganttTaskContent");return t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskForeground",["GanttDirectiveBuilder",function(e){var t=new e("ganttTaskForeground");return t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimeFrame",["GanttDirectiveBuilder",function(e){var t=new e("ganttTimeFrame");return t.controller=function(e,t){e.timeFrame.$element=t,e.timeFrame.$scope=e,e.timeFrame.updateView()},t.build()}])}(),function(){"use strict";angular.module("gantt").directive("ganttTimespan",["GanttDirectiveBuilder",function(e){var t=new e("ganttTimespan");return t.controller=function(e,t){e.timespan.$element=t,e.timespan.$scope=e,e.timespan.updateView()},t.build()}])}(),function(){"use strict";angular.module("gantt").factory("ganttDebounce",["$timeout",function(e){function t(t,n,i){var a=0;return function(){var r=this,o=arguments;a++;var s=function(e){return function(){return e===a?t.apply(r,o):void 0}}(a);return e(s,n,void 0===i?!0:i)}}return t}])}(),function(){"use strict";angular.module("gantt").service("GanttDirectiveBuilder",["$templateCache",function(e){var t=function(t,n,i,a){var r=this;this.directiveName=t,this.templateUrl=void 0===n?"template/"+t+".tmpl.html":n,this.require=void 0===i?"^gantt":i,this.restrict=void 0===a?"E":a,this.scope=!1,this.transclude=!0,this.replace=!0,this.build=function(){var t=r.directiveName,n=r.templateUrl,i=r.controller,a={restrict:r.restrict,require:r.require,transclude:r.transclude,replace:r.replace,scope:r.scope,templateUrl:function(t,i){return void 0!==i.templateUrl&&(n=i.templateUrl),void 0!==i.template&&e.put(n,i.template),n},compile:function(){return{pre:function(e,n,i,a){e.gantt.api.directives.raise.preLink(t,e,n,i,a)},post:function(e,n,i,a){e.gantt.api.directives.raise.postLink(t,e,n,i,a)}}},controller:["$scope","$element","$attrs",function(e,n,a){var r=this;void 0!==i&&i(e,n,a,r),e.gantt.api.directives.raise.controller(t,e,n,a,r),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy(t,e,n,a,r)}),e.$applyAsync(function(){e.gantt.api.directives.raise["new"](t,e,n,a,r)})}]};return n||(delete a.templateUrl,delete a.replace,delete a.transclude),a}};return t}])}(),function(){"use strict";angular.module("gantt").service("ganttDom",["$document",function(e){return{elementFromPoint:function(t,n){return e[0].elementFromPoint(t,n)},elementsFromPoint:function(e,t,n){for(var i,a,r,o,s=[],l=[],c=0;(i=this.elementFromPoint(e,t))&&-1===s.indexOf(i)&&null!==i&&(void 0===n||n>c);)s.push(i),l.push({value:i.style.getPropertyValue("visibility"),priority:i.style.getPropertyPriority("visibility")}),i.style.setProperty("visibility","hidden","important"),c++;for(a=0,r=l.length;r>a;a++)o=l[a],s[a].style.setProperty("visibility",o.value?o.value:"",o.priority);return s},findElementFromPoint:function(e,t,n){for(var i,a,r,o,s,l=[],c=[],u=0;(i=this.elementFromPoint(e,t))&&-1===l.indexOf(i)&&null!==i;)if(l.push(i),c.push({value:i.style.getPropertyValue("visibility"),priority:i.style.getPropertyPriority("visibility")}),i.style.setProperty("visibility","hidden","important"),u++,n(i)){a=i;break}for(r=0,o=c.length;o>r;r++)s=c[r],l[r].style.setProperty("visibility",s.value?s.value:"",s.priority);return a},isElementVisible:function(e){return void 0!==e.offsetParent&&null!==e.offsetParent}}}])}(),function(){"use strict";angular.module("gantt").service("ganttEnableNgAnimate",["$injector",function(e){var t;try{t=e.get("$animate")}catch(n){}return void 0!==t?function(e,n){angular.version.major>=1&&angular.version.minor>=4?t.enabled(e,n):t.enabled(n,e)}:angular.noop}])}(),function(){"use strict";angular.module("gantt").directive("ganttBindCompileHtml",["$compile",function(e){return{restrict:"A",require:"^gantt",link:function(t,n,i,a){t.scope=a.gantt.$scope.$parent,t.$watch(function(){return t.$eval(i.ganttBindCompileHtml)},function(i){n.html(i),e(n.contents())(t)})}}}])}(),function(){"use strict";angular.module("gantt").service("ganttLayout",["$document",function(e){return{getScrollBarWidth:function(){var t=e[0].createElement("p");t.style.width="100%",t.style.height="200px";var n=e[0].createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(t),e[0].body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var a=t.offsetWidth;return i===a&&(a=n.clientWidth),e[0].body.removeChild(n),i-a},getScrollBarHeight:function(){var t=e[0].createElement("p");t.style.width="200px;",t.style.height="100%";var n=e[0].createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="150px",n.style.height="200px",n.style.overflow="hidden",n.appendChild(t),e[0].body.appendChild(n);var i=t.offsetHeight;n.style.overflow="scroll";var a=t.offsetHeight;return i===a&&(a=n.clientHeight),e[0].body.removeChild(n),i-a},setColumnsWidthFactor:function(e,t,n){if(e){n||(n=0);for(var i=0;i<e.length;i++){var a=e[i];a.left=t*(a.originalSize.left+n)-n,a.width=t*a.originalSize.width;for(var r=0;r<a.timeFrames.length;r++){var o=a.timeFrames[r];o.left=t*o.originalSize.left,o.width=t*o.originalSize.width}}}}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseButton",[function(){return{getButton:function(e){return e=e||window.event,e.which?e.which:void 0===e.button?1:e.button<2?1:4===e.button?2:3}}}])}(),function(){"use strict";angular.module("gantt").service("ganttMouseOffset",[function(){return{getTouch:function(e){return void 0!==e.touches?e.touches[0]:e},getOffset:function(e){return e.offsetX&&e.offsetY?{x:e.offsetX,y:e.offsetY}:e.layerX&&e.layerY?{x:e.layerX,y:e.layerY}:this.getOffsetForElement(e.target,e)},getOffsetForElement:function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}}}])}(),function(){"use strict";angular.module("gantt").factory("ganttSmartEvent",[function(){function e(e,t,n,i){return e.$on("$destroy",function(){t.unbind(n,i)}),{bindOnce:function(){t.one(n,i)},bind:function(){t.bind(n,i)},unbind:function(){t.unbind(n,i)}}}return e}])}(),angular.module("gantt.templates",[]).run(["$templateCache",function(e){e.put("template/gantt.tmpl.html",'<div class="gantt unselectable" ng-cloak gantt-scroll-manager gantt-element-width-listener="ganttElementWidth">\n    <gantt-side>\n        <gantt-side-background>\n        </gantt-side-background>\n        <gantt-side-content>\n        </gantt-side-content>\n        <div gantt-resizer="gantt.side.$element" gantt-resizer-event-topic="side" gantt-resizer-enabled="{{$parent.gantt.options.value(\'allowSideResizing\')}}" resizer-width="sideWidth" class="gantt-resizer">\n            <div ng-show="$parent.gantt.options.value(\'allowSideResizing\')" class="gantt-resizer-display"></div>\n        </div>\n    </gantt-side>\n    <gantt-scrollable-header>\n        <gantt-header gantt-element-height-listener="$parent.ganttHeaderHeight">\n            <gantt-header-columns>\n                <div ng-repeat="header in gantt.columnsManager.visibleHeaders track by $index">\n                    <div class="gantt-header-row" ng-class="{\'gantt-header-row-last\': $last, \'gantt-header-row-first\': $first}">\n                        <gantt-column-header ng-repeat="column in header"></gantt-column-header>\n                    </div>\n                </div>\n            </gantt-header-columns>\n        </gantt-header>\n    </gantt-scrollable-header>\n    <gantt-scrollable>\n        <gantt-body>\n            <gantt-body-background>\n                <gantt-row-background ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id"></gantt-row-background>\n            </gantt-body-background>\n            <gantt-body-foreground>\n                <div class="gantt-current-date-line" ng-show="currentDate === \'line\' && gantt.currentDateManager.position >= 0 && gantt.currentDateManager.position <= gantt.width" ng-style="{\'left\': gantt.currentDateManager.position + \'px\' }"></div>\n            </gantt-body-foreground>\n            <gantt-body-columns>\n                <gantt-column ng-repeat="column in gantt.columnsManager.visibleColumns">\n                    <gantt-time-frame ng-repeat="timeFrame in column.visibleTimeFrames"></gantt-time-frame>\n                </gantt-column>\n            </gantt-body-columns>\n            <div ng-if="gantt.columnsManager.visibleColumns == 0" style="background-color: #808080"></div>\n            <gantt-body-rows>\n                <gantt-timespan ng-repeat="timespan in gantt.timespansManager.timespans track by timespan.model.id"></gantt-timespan>\n                <gantt-row ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                    <gantt-task ng-repeat="task in row.visibleTasks track by task.model.id">\n                    </gantt-task>\n                </gantt-row>\n            </gantt-body-rows>\n        </gantt-body>\n    </gantt-scrollable>\n\n    <!-- Plugins -->\n    <ng-transclude></ng-transclude>\n\n    <!--\n    ******* Inline templates *******\n    You can specify your own templates by either changing the default ones below or by\n    adding an attribute template-url="<url to your template>" on the specific element.\n    -->\n\n    <!-- Body template -->\n    <script type="text/ng-template" id="template/ganttBody.tmpl.html">\n        <div ng-transclude class="gantt-body" ng-style="{\'width\': gantt.width > 0 ? gantt.width +\'px\' : undefined}"></div>\n    </script>\n\n    <!-- Header template -->\n    <script type="text/ng-template" id="template/ganttHeader.tmpl.html">\n        <div ng-transclude class="gantt-header"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0"></div>\n    </script>\n\n    <!-- Side template -->\n    <script type="text/ng-template" id="template/ganttSide.tmpl.html">\n        <div ng-transclude class="gantt-side" style="width: auto;"></div>\n    </script>\n\n    <!-- Side content template-->\n    <script type="text/ng-template" id="template/ganttSideContent.tmpl.html">\n        <div class="gantt-side-content">\n        </div>\n    </script>\n\n    <!-- Header columns template -->\n    <script type="text/ng-template" id="template/ganttHeaderColumns.tmpl.html">\n        <div ng-transclude class="gantt-header-columns"\n              gantt-horizontal-scroll-receiver></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttColumnHeader.tmpl.html">\n        <div class="gantt-column-header" ng-class="{\'gantt-column-header-last\': $last, \'gantt-column-header-first\': $first}">{{::column.label}}</div>\n    </script>\n\n    <!-- Body background template -->\n    <script type="text/ng-template" id="template/ganttBodyBackground.tmpl.html">\n        <div ng-transclude class="gantt-body-background"></div>\n    </script>\n\n    <!-- Body foreground template -->\n    <script type="text/ng-template" id="template/ganttBodyForeground.tmpl.html">\n        <div ng-transclude class="gantt-body-foreground"></div>\n    </script>\n\n    <!-- Body columns template -->\n    <script type="text/ng-template" id="template/ganttBodyColumns.tmpl.html">\n        <div ng-transclude class="gantt-body-columns"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttColumn.tmpl.html">\n        <div ng-transclude class="gantt-column gantt-foreground-col" ng-class="{\'gantt-column-last\': $last, \'gantt-column-first\': $first}"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttTimeFrame.tmpl.html">\n        <div class="gantt-timeframe"></div>\n    </script>\n\n    <!-- Scrollable template -->\n    <script type="text/ng-template" id="template/ganttScrollable.tmpl.html">\n        <div ng-transclude class="gantt-scrollable" gantt-scroll-sender ng-style="getScrollableCss()"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttScrollableHeader.tmpl.html">\n        <div ng-transclude class="gantt-scrollable-header" ng-style="getScrollableHeaderCss()"></div>\n    </script>\n\n    <!-- Rows template -->\n    <script type="text/ng-template" id="template/ganttBodyRows.tmpl.html">\n        <div ng-transclude class="gantt-body-rows"></div>\n    </script>\n\n    <!-- Timespan template -->\n    <script type="text/ng-template" id="template/ganttTimespan.tmpl.html">\n        <div class="gantt-timespan" ng-class="timespan.model.classes">\n        </div>\n    </script>\n\n    <!-- Task template -->\n    <script type="text/ng-template" id="template/ganttTask.tmpl.html">\n        <div class="gantt-task" ng-class="task.model.classes">\n            <gantt-task-background></gantt-task-background>\n            <gantt-task-foreground></gantt-task-foreground>\n            <gantt-task-content></gantt-task-content>\n        </div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttTaskBackground.tmpl.html">\n        <div class="gantt-task-background" ng-style="{\'background-color\': task.model.color}"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/ganttTaskForeground.tmpl.html">\n        <div class="gantt-task-foreground">\n            <div ng-if="task.truncatedRight" class="gantt-task-truncated-right">&gt;</div>\n            <div ng-if="task.truncatedLeft" class="gantt-task-truncated-left">&lt;</div>\n        </div>\n    </script>\n\n    <!-- Task content template -->\n    <script type="text/ng-template" id="template/ganttTaskContent.tmpl.html">\n        <div class="gantt-task-content" unselectable="on"><span unselectable="on" gantt-bind-compile-html="getTaskContent()"/></div>\n    </script>\n\n\n    <!-- Row background template -->\n    <script type="text/ng-template" id="template/ganttRowBackground.tmpl.html">\n        <div class="gantt-row gantt-row-height"\n             ng-class="row.model.classes"\n             ng-class-odd="\'gantt-row-odd\'"\n             ng-class-even="\'gantt-row-even\'"\n             ng-style="{\'height\': row.model.height}">\n            <div class="gantt-row-background"\n                 ng-style="{\'background-color\': row.model.color}">\n            </div>\n        </div>\n    </script>\n\n    <!-- Row template -->\n    <script type="text/ng-template" id="template/ganttRow.tmpl.html">\n        <div class="gantt-row gantt-row-height"\n             ng-class="row.model.classes"\n             ng-class-odd="\'gantt-row-odd\'"\n             ng-class-even="\'gantt-row-even\'"\n             ng-style="{\'height\': row.model.height}">\n            <div ng-transclude class="gantt-row-content"></div>\n        </div>\n    </script>\n\n    <!-- Side background template -->\n    <script type="text/ng-template" id="template/ganttSideBackground.tmpl.html">\n        <div class="gantt-side-background">\n            <div class="gantt-side-background-header" ng-style="{height: $parent.ganttHeaderHeight + \'px\'}">\n                <div ng-show="$parent.ganttHeaderHeight" class="gantt-header-row gantt-side-header-row"></div>\n            </div>\n            <div class="gantt-side-background-body" ng-style="getMaxHeightCss()">\n                <div gantt-vertical-scroll-receiver>\n                    <div class="gantt-row gantt-row-height "\n                         ng-class-odd="\'gantt-row-odd\'"\n                         ng-class-even="\'gantt-row-even\'"\n                         ng-class="row.model.classes"\n                         ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id"\n                         ng-style="{\'height\': row.model.height}">\n                        <div gantt-row-label class="gantt-row-label gantt-row-background"\n                             ng-style="{\'background-color\': row.model.color}">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </script>\n</div>\n')}]),function(){"use strict";angular.module("gantt.bounds",["gantt","gantt.bounds.templates"]).directive("ganttBounds",["moment","$compile","$document",function(e,t,n){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(i,a,r,o){var s=o.gantt.api;if(i.options&&"object"==typeof i.options.bounds)for(var l in i.options.bounds)i[l]=i.options[l];void 0===i.enabled&&(i.enabled=!0),s.directives.on["new"](i,function(e,a,o){if("ganttTask"===e){var s=a.$new();s.pluginScope=i;var l=n[0].createElement("div");angular.element(l).attr("data-ng-if","task.model.est && task.model.lct && pluginScope.enabled");var c=n[0].createElement("gantt-task-bounds");void 0!==r.templateUrl&&angular.element(c).attr("data-template-url",r.templateUrl),void 0!==r.template&&angular.element(c).attr("data-template",r.template),angular.element(l).append(c),o.append(t(l)(s))}}),s.tasks.on.clean(i,function(t){void 0===t.est||e.isMoment(t.est)||(t.est=e(t.est)),void 0===t.lct||e.isMoment(t.lct)||(t.lct=e(t.lct))})}}}])}(),function(){"use strict";angular.module("gantt.dependencies",["gantt","gantt.dependencies.templates"]).directive("ganttDependencies",["$timeout","$document","ganttDebounce","GanttDependenciesManager",function(e,t,n,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",readOnly:"=?",jsPlumbDefaults:"=?",endpoints:"=?",fallbackEndpoints:"=?"},link:function(e,t,a,r){function o(){return angular.element('<span><span class="gantt-endpoint-overlay start-endpoint arrow-right"></span></span>')}function s(){return angular.element('<span><span class="gantt-endpoint-overlay end-endpoint arrow-right"></span></span>')}function l(){return angular.element('<span><span class="gantt-endpoint-overlay start-endpoint fallback-endpoint"></span></span>')}function c(){return angular.element('<span><span class="gantt-endpoint-overlay end-endpoint fallback-endpoint"></span></span>')}var u=r.gantt.api;if(e.options&&"object"==typeof e.options.dependencies)for(var d in e.options.dependencies)e[d]=e.options[d];void 0===e.enabled&&(e.enabled=!0),void 0===e.readOnly&&(e.readOnly=!1),void 0===e.jsPlumbDefaults&&(e.jsPlumbDefaults={Endpoint:["Dot",{radius:4}],EndpointStyle:{fillStyle:"#456",strokeStyle:"#456",lineWidth:1},Connector:"Flowchart",ConnectionOverlays:[["Arrow",{location:1,length:12,width:12}]]}),void 0===e.endpoints&&(e.endpoints=[{anchor:"Left",isSource:!1,isTarget:!0,maxConnections:-1,cssClass:"gantt-endpoint start-endpoint target-endpoint",overlays:[["Custom",{create:o}]]},{anchor:"Right",isSource:!0,isTarget:!1,maxConnections:-1,cssClass:"gantt-endpoint end-endpoint source-endpoint",overlays:[["Custom",{create:s}]]}]),void 0===e.fallbackEndpoints&&(e.fallbackEndpoints=[{
endpoint:"Blank",anchor:"Left",isSource:!1,isTarget:!0,maxConnections:0,cssClass:"gantt-endpoint start-endpoint fallback-endpoint",overlays:[["Custom",{create:l}]]},{endpoint:"Blank",anchor:"Right",isSource:!0,isTarget:!1,maxConnections:0,cssClass:"gantt-endpoint end-endpoint fallback-endpoint",overlays:[["Custom",{create:c}]]}]);var f=new i(r.gantt,e,u);u.directives.on["new"](e,function(e,t,n){"ganttBody"===e&&f.plumb.setContainer(n)}),u.tasks.on.add(e,function(e){f.addDependenciesFromTask(e)}),u.tasks.on.remove(e,function(e){f.removeDependenciesFromTask(e)}),u.tasks.on.displayed(e,n(function(e){f.setTasks(e),f.refresh()})),u.rows.on.displayed(e,function(){f.refresh()}),u.tasks.on.viewChange(e,function(e){e.$element&&f.plumb.revalidate(e.$element[0])}),u.tasks.on.viewRowChange(e,function(e){f.setTask(e)})}}}])}(),function(){"use strict";angular.module("gantt.drawtask",["gantt"]).directive("ganttDrawTask",["$document","ganttMouseOffset","ganttUtils","moment",function(e,t,n,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",moveThreshold:"=?",taskModelFactory:"=?taskFactory"},link:function(n,a,r,o){var s=o.gantt.api;void 0===n.enabled&&(n.enabled=!0),void 0===n.moveThreshold&&(n.moveThreshold=0),void 0===n.taskModelFactory&&(n.taskModelFactory=function(){return{}}),s.directives.on["new"](n,function(a,r,o){if("ganttRow"===a){var l=function(e){var t=s.core.getDateByPosition(e,!0),a=i(t),o=n.taskModelFactory();o.from=t,o.to=a;var l=r.row.addTask(o);l.isResizing=!0,l.updatePosAndSize(),r.row.updateVisibleTasks(),r.row.$scope.$digest()},c=function(i){var a=function(e){var r=t.getOffset(e).x;Math.abs(i-r)>=n.moveThreshold&&(o.off("mousemove",a),l(i))};o.on("mousemove",a),e.one("mouseup",function(){o.off("mousemove",a)})},u=function(e){var i=e.target?e.target:e.srcElement,a=angular.isFunction(n.enabled)?n.enabled(e):n.enabled;if(a&&i.className.indexOf("gantt-row")>-1){var r=t.getOffset(e).x;0===n.moveThreshold?l(r,r):c(r)}};o.on("mousedown",u),r.drawTaskHandler=u}}),s.directives.on.destroy(n,function(e,t,n){"ganttRow"===e&&(n.off("mousedown",t.drawTaskHandler),delete t.drawTaskHandler)})}}}])}(),function(){"use strict";angular.module("gantt.groups",["gantt","gantt.groups.templates"]).directive("ganttGroups",["ganttUtils","GanttHierarchy","$compile","$document",function(e,t,n,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",display:"=?"},link:function(e,a,r,o){function s(){e.hierarchy.refresh(o.gantt.rowsManager.filteredRows)}var l=o.gantt.api;if(e.options&&"object"==typeof e.options.sortable)for(var c in e.options.sortable)e[c]=e.options[c];void 0===e.enabled&&(e.enabled=!0),void 0===e.display&&(e.display="group"),e.hierarchy=new t,o.gantt.api.registerMethod("groups","refresh",s,this),o.gantt.$scope.$watchCollection("gantt.rowsManager.filteredRows",function(){s()}),l.directives.on["new"](e,function(t,a,o){if("ganttRow"===t){var s=a.$new();s.pluginScope=e;var l=i[0].createElement("div");angular.element(l).attr("data-ng-if","pluginScope.enabled");var c=i[0].createElement("gantt-task-group");void 0!==r.templateUrl&&angular.element(c).attr("data-template-url",r.templateUrl),void 0!==r.template&&angular.element(c).attr("data-template",r.template),angular.element(l).append(c),o.append(n(l)(s))}})}}}])}(),function(){"use strict";angular.module("gantt.labels",["gantt","gantt.labels.templates"]).directive("ganttLabels",["ganttUtils","$compile","$document","$log",function(e,t,n,i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",header:"=?"},link:function(e,a,r,o){function s(){for(var e=o.gantt.side.$element[0].getElementsByClassName("gantt-row-label"),t=0,n=0;n<e.length;n++){var i=e[n].children[0].offsetWidth;t=Math.max(t,i)}t>=0&&l.side.setWidth(t)}var l=o.gantt.api;if(i.warn("Angular Gantt Labels plugin is deprecated. Please use Table plugin instead."),e.options&&"object"==typeof e.options.sortable)for(var c in e.options.sortable)e[c]=e.options[c];void 0===e.enabled&&(e.enabled=!0),void 0===e.header&&(e.header="Name"),l.directives.on["new"](e,function(i,a,r){if("ganttSideContent"===i){var o=a.$new();o.pluginScope=e;var s=n[0].createElement("div");angular.element(s).attr("data-ng-if","pluginScope.enabled"),angular.element(s).addClass("side-element");var l=n[0].createElement("gantt-side-content-labels");angular.element(s).append(l),r.append(t(s)(o))}}),l.registerMethod("labels","fitSideWidth",s,this)}}}])}(),function(){"use strict";angular.module("gantt.movable",["gantt"]).directive("ganttMovable",["ganttMouseButton","ganttMouseOffset","ganttSmartEvent","ganttMovableOptions","ganttUtils","ganttDom","$window","$document","$timeout",function(e,t,n,i,a,r,o,s,l){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",allowMoving:"=?",allowResizing:"=?",allowRowSwitching:"=?"},link:function(c,u,d,f){var p=f.gantt.api;if(c.options&&"object"==typeof c.options.movable)for(var g in c.options.movable)c[g]=c.options[g];i.initialize(c),p.registerEvent("tasks","move"),p.registerEvent("tasks","moveBegin"),p.registerEvent("tasks","moveEnd"),p.registerEvent("tasks","resize"),p.registerEvent("tasks","resizeBegin"),p.registerEvent("tasks","resizeEnd"),p.registerEvent("tasks","change");var h,m,v="ontouchstart"in o||o.DocumentTouch&&s[0]instanceof o.DocumentTouch,y="touchstart mousedown",b="touchmove mousemove",w="touchend mouseup",$=15,k=5,x=3,S=15,C=5;p.directives.on["new"](c,function(i,u,d){if("ganttTask"===i){var p,g=angular.element(o),D=u.row.rowsManager.gantt.body.$element,M=u.row.rowsManager.gantt.scroll.$element,T=!1,E=!1,_=u.task.getForegroundElement(),F=u.task.getContentElement(),A=function(n){n.preventDefault(),v&&(n=t.getTouch(n));var i=u.task.model.movable,r=u.task.row.model.movable;("boolean"==typeof i||angular.isFunction(i))&&(i={enabled:i}),("boolean"==typeof r||angular.isFunction(r))&&(r={enabled:r});var o=a.firstProperty([i,r],"enabled",c.enabled),s=angular.isFunction(o)?o(n,u.task):o;if(s){var l=t.getOffsetForElement(_[0],n).x,d=H(l);if(""!==d&&1===e.getButton(n)){var f=t.getOffsetForElement(D[0],n).x;U(d,f)}u.$digest()}};_.on(y,A),F.on(y,A);var P=function(e){var n=u.task.model.movable,i=u.task.row.model.movable;("boolean"==typeof n||angular.isFunction(n))&&(n={enabled:n}),("boolean"==typeof i||angular.isFunction(i))&&(i={enabled:i});var r=a.firstProperty([n,i],"enabled",c.enabled),o=angular.isFunction(r)?r(e,u.task):r;if(o&&!u.task.isMoving){var s=t.getOffsetForElement(_[0],e).x,l=H(s);""!==l&&"M"!==l?(_.css("cursor",B(l)),F.css("cursor",B(l))):(_.css("cursor",""),F.css("cursor",""))}};_.on("mousemove",P),F.on("mousemove",P);var R=function(e){u.task.isMoving&&!u.destroyed&&(L(),I(e),O(e))},I=function(e){var n=T,i=t.getOffsetForElement(D[0],e),o=i.x;u.task.mouseOffsetX=o;var l=u.task.row.rowsManager.gantt.options.value("taskOutOfRange"),d=u.task.model.movable,p=u.task.row.model.movable;if(("boolean"==typeof d||angular.isFunction(d))&&(d={enabled:d}),("boolean"==typeof p||angular.isFunction(p))&&(p={enabled:p}),"M"===u.task.moveMode){var g=a.firstProperty([d,p],"allowRowSwitching",c.allowRowSwitching);if(g){var m=M[0].getBoundingClientRect(),v=m.left+m.width/2,y=angular.element(s[0].querySelectorAll(".gantt-body"));y.css("pointer-events","auto");var b=r.findElementFromPoint(v,e.clientY,function(e){return angular.element(e).hasClass("gantt-row")});y.css("pointer-events","");for(var w,$=f.gantt.rowsManager.rows,k=0,x=$.length;x>k;k++)if(b===$[k].$element[0]){w=$[k];break}var S=u.task.row;void 0!==w&&S!==w&&(w.moveTaskToRow(u.task,!0),T=!0)}var C=a.firstProperty([d,p],"allowMoving",c.allowMoving);C&&(o-=h,"truncate"!==l&&(0>o?o=0:o+u.task.width>=u.gantt.width&&(o=u.gantt.width-u.task.width)),u.task.moveTo(o,!0),u.$digest(),T&&u.row.rowsManager.gantt.api.tasks.raise.move(u.task),T=!0)}else"E"===u.task.moveMode?(o<=u.task.left&&(o=u.task.left,u.task.moveMode="W",z(B(u.task.moveMode))),"truncate"!==l&&o>=u.gantt.width&&(o=u.gantt.width),u.task.setTo(o,!0),u.$digest(),T&&u.row.rowsManager.gantt.api.tasks.raise.resize(u.task),T=!0):(o>u.task.left+u.task.width&&(o=u.task.left+u.task.width,u.task.moveMode="E",z(B(u.task.moveMode))),"truncate"!==l&&0>o&&(o=0),u.task.setFrom(o,!0),u.$digest(),T&&u.row.rowsManager.gantt.api.tasks.raise.resize(u.task),T=!0);if(!n&&T&&!E){var _=u.task.getBackgroundElement();"M"===u.task.moveMode?(_.addClass("gantt-task-moving"),u.row.rowsManager.gantt.api.tasks.raise.moveBegin(u.task)):(_.addClass("gantt-task-resizing"),u.row.rowsManager.gantt.api.tasks.raise.resizeBegin(u.task))}},O=function(e){var n=t.getOffsetForElement(D[0],e),i=M[0].scrollLeft,a=M[0].offsetWidth,r=M[0].scrollWidth,o=i+a,s=!1;n.x<m?i>0&&n.x<=i+C&&(n.x-=S,s=!0,u.row.rowsManager.gantt.api.scroll.left(S)):r>o&&n.x>=o-C&&(n.x+=S,s=!0,u.row.rowsManager.gantt.api.scroll.right(S)),s&&(p=l(function(){R(e)},100,!0))},L=function(){void 0!==p&&(l.cancel(p),p=void 0)},H=function(e){var t=0,n=u.task.model.movable,i=u.task.row.model.movable;"boolean"==typeof n&&(n={enabled:n}),"boolean"==typeof i&&(i={enabled:i});var r=a.firstProperty([n,i],"allowResizing",c.allowResizing),o=a.firstProperty([n,i],"allowRowSwitching",c.allowRowSwitching),s=a.firstProperty([n,i],"allowMoving",c.allowMoving);return r&&(t=_[0].offsetWidth<$?x:k),r&&e>_[0].offsetWidth-t?"E":r&&t>e?"W":(s||o)&&e>=t&&e<=_[0].offsetWidth-t?"M":""},B=function(e){switch(e){case"E":return"e-resize";case"W":return"w-resize";case"M":return"move"}},z=function(e){d.css("cursor",e),angular.element(s[0].body).css({"-moz-user-select":""===e?"":"-moz-none","-webkit-user-select":""===e?"":"none","-ms-user-select":""===e?"":"none","user-select":""===e?"":"none",cursor:e})},U=function(e,i){void 0===u.task.originalModel&&(u.task.originalRow=u.task.row,u.task.originalModel=u.task.model,u.task.model=angular.copy(u.task.originalModel)),E||(m=i,h=i-u.task.modelLeft),T=!1,u.task.moveMode=e,u.task.isMoving=!0,u.task.active=!0;var a=function(e){e.stopImmediatePropagation(),v&&(e=t.getTouch(e)),R(e)},r=n(u,g,b,a);r.bind(),n(u,g,w,function(e){v&&(e=t.getTouch(e)),r.unbind(),V(e),u.$digest()}).bindOnce(),z(B(e))},V=function(){var e=u.task.getBackgroundElement();if(e.removeClass("gantt-task-moving"),e.removeClass("gantt-task-resizing"),void 0!==u.task.originalModel){if(u.task.originalModel.from=u.task.model.from,u.task.originalModel.to=u.task.model.to,u.task.originalModel.lct=u.task.model.lct,u.task.originalModel.est=u.task.model.est,u.task.model=u.task.originalModel,u.task.row.model.id!==u.task.originalRow.model.id){var t=u.task.row;t.removeTask(u.task.model.id,!1,!0),u.task.row=u.task.originalRow,t.moveTaskToRow(u.task,!1)}delete u.task.originalModel,delete u.task.originalRow,u.$apply()}E=!1,u.task.isMoving=!1,u.task.active=!1,L(),z(""),T===!0&&("M"===u.task.moveMode?u.row.rowsManager.gantt.api.tasks.raise.moveEnd(u.task):u.row.rowsManager.gantt.api.tasks.raise.resizeEnd(u.task),T=!1,u.task.row.sortTasks(),u.row.rowsManager.gantt.api.tasks.raise.change(u.task)),u.task.moveMode=void 0};u.$on("$destroy",function(){u.destroyed=!0,L()}),u.task.isResizing?(E=!0,U("E",u.task.mouseOffsetX),delete u.task.isResizing):u.task.isMoving&&(E=!0,U("M",u.task.mouseOffsetX))}})}}}])}(),function(){"use strict";angular.module("gantt.overlap",["gantt","gantt.overlap.templates"]).directive("ganttOverlap",["moment",function(e){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",global:"=?"},link:function(t,n,i,a){function r(e){var t,n;return e.model.from.isBefore(e.model.to)?(t=e.model.from,n=e.model.to):(t=e.model.to,n=e.model.from),[t,n]}function o(t){var n=r(t);return e().range(n[0],n[1])}function s(e,t){t.model.id in e||(t.$element.addClass("gantt-task-overlaps"),e[t.model.id]=t)}function l(e,t){for(var n=0,i=t.length;i>n;n++){var a=t[n];a.model.id in e||a.$element.removeClass("gantt-task-overlaps")}}function c(e){var t={};if(e.length>1)for(var n=e[0],i=o(n),a=1,r=e.length;r>a;a++){var c=e[a],u=o(c);u.overlaps(i)&&(s(t,c),s(t,n)),n.left+n.width<c.left+c.width&&(n=c,i=u)}l(t,e)}function u(e,t){return e.sort(function(e,n){return t(e)<t(n)?-1:t(e)>t(n)?1:0})}var d=a.gantt.api;void 0===t.enabled&&(t.enabled=!0),void 0===t.global&&(t.global=!1),t.enabled&&(d.core.on.rendered(t,function(e){var n,i=a.gantt.rowsManager.rows;if(t.global){var r=[];for(n=0;n<i.length;n++)r.push.apply(r,i[n].tasks);r=u(r,function(e){return e.model.from}),c(r)}else for(i=e.gantt.rowsManager.rows,n=0;n<i.length;n++)c(i[n].tasks)}),d.tasks.on.change(t,function(e){if(t.global){for(var n=e.row.rowsManager.rows,i=[],a=0;a<n.length;a++)i.push.apply(i,n[a].tasks);i=u(i,function(e){return e.model.from}),c(i)}else c(e.row.tasks)}),d.tasks.on.rowChange(t,function(e,n){if(t.global){for(var i=n.rowsManager.rows,a=[],r=0;r<i.length;r++)a.push.apply(a,i[r].tasks);a=u(a,function(e){return e.model.from}),c(a)}else c(n.tasks)}))}}}])}(),function(){"use strict";angular.module("gantt.progress",["gantt","gantt.progress.templates"]).directive("ganttProgress",["moment","$compile","$document",function(e,t,n){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(i,a,r,o){var s=o.gantt.api;if(i.options&&"object"==typeof i.options.progress)for(var l in i.options.progress)i[l]=i.options[l];void 0===i.enabled&&(i.enabled=!0),s.directives.on["new"](i,function(e,a,o){if("ganttTaskBackground"===e){var s=a.$new();s.pluginScope=i;var l=n[0].createElement("div");angular.element(l).attr("data-ng-if","task.model.progress !== undefined && pluginScope.enabled");var c=n[0].createElement("gantt-task-progress");void 0!==r.templateUrl&&angular.element(c).attr("data-template-url",r.templateUrl),void 0!==r.template&&angular.element(c).attr("data-template",r.template),angular.element(l).append(c),o.append(t(l)(s))}}),s.tasks.on.clean(i,function(t){void 0===t.est||e.isMoment(t.est)||(t.est=e(t.est)),void 0===t.lct||e.isMoment(t.lct)||(t.lct=e(t.lct))})}}}])}(),function(){"use strict";angular.module("gantt.resizeSensor",["gantt"]).directive("ganttResizeSensor",[function(){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(e,t,n,i){function a(){var e=t.parent().parent().parent()[0].querySelectorAll("div.gantt")[0];return new ResizeSensor(e,function(){i.gantt.$scope.ganttElementWidth=e.clientWidth,i.gantt.$scope.$apply()})}var r=i.gantt.api;if(e.options&&"object"==typeof e.options.progress)for(var o in e.options.progress)e[o]=e.options[o];void 0===e.enabled&&(e.enabled=!0);var s,l=!1;r.core.on.rendered(e,function(){l=!0,void 0!==s&&s.detach(),e.enabled&&(ElementQueries.update(),s=a())}),e.$watch("enabled",function(e){l&&(e&&void 0===s?(ElementQueries.update(),s=a()):e||void 0===s||(s.detach(),s=void 0))})}}}])}(),function(){"use strict";for(var e,t="gantt.sortable",n="ganttSortable",i=["gantt",{module:"ang-drag-drop",url:"https://github.com/ganarajpr/angular-dragdrop.git#master"}],a=[],r=[],o=0,s=i.length;s>o;o++){var l=i[o];try{angular.isString(l)&&(l={module:l},i[o]=l),angular.module(l.module),r.push(l.module)}catch(c){l.exception=c,a.push(l)}}a.length>0?angular.module(t,[]).directive(n,["$log",function(i){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(){i.warn(t+" module can't require some dependencies:");for(var r=0,o=a.length;o>r;r++){e=a[r];var s=e.module;e.url&&(s+=" ("+e.url+")"),e.exception&&e.exception.message&&(s+=": "+e.exception.message),i.warn(s)}i.warn(n+" plugin directive won't be available")}}}]):angular.module(t,r).directive(n,["ganttUtils","$compile",function(e,t){return{restrict:"E",require:"^gantt",scope:{enabled:"=?"},link:function(n,i,a,r){var o=r.gantt.api;if(n.options&&"object"==typeof n.options.sortable)for(var s in n.options.sortable)n[s]=n.options[s];void 0===n.enabled&&(n.enabled=!0),o.directives.on["new"](n,function(i,a,r){"ganttRowLabel"===i&&void 0===r.attr("drag")&&(a.checkDraggable=function(){var t=a.row.model.sortable;return"boolean"==typeof t&&(t={enabled:t}),e.firstProperty([t],"enabled",n.enabled)},a.onDropSuccess=function(){a.$evalAsync()},a.onDrop=function(e,t){var n=a.row.rowsManager.rowsMap[t.id];n!==a&&(a.row.rowsManager.moveRow(n,a.row),a.$evalAsync())},r.attr("ui-draggable","{{checkDraggable()}}"),r.attr("drag-channel","'sortable'"),r.attr("ui-on-drop","onDrop($event, $data)"),r.attr("on-drop-success","onDropSuccess()"),r.attr("drop-channel","'sortable'"),r.attr("drag","row.model"),t(r)(a))})}}}])}(),function(){"use strict";angular.module("gantt.table",["gantt","gantt.table.templates"]).directive("ganttTable",["ganttUtils","$compile","$document",function(e,t,n){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",columns:"=?",headers:"=?",classes:"=?",contents:"=?",headerContents:"=?",formatters:"=?",headerFormatter:"=?"},link:function(e,i,a,r){var o=r.gantt.api;if(e.options&&"object"==typeof e.options.sortable)for(var s in e.options.sortable)e[s]=e.options[s];void 0===e.enabled&&(e.enabled=!0),void 0===e.columns&&(e.columns=["model.name"]),void 0===e.headers&&(e.headers={"model.name":"Name"}),void 0===e.contents&&(e.contents={}),void 0===e.headerContents&&(e.headerContents={}),void 0===e.classes&&(e.classes={}),void 0===e.formatters&&(e.formatters={}),o.directives.on["new"](e,function(i,a,r){if("ganttSideContent"===i){var o=a.$new();o.pluginScope=e;var s=n[0].createElement("div");angular.element(s).attr("data-ng-if","pluginScope.enabled"),angular.element(s).addClass("side-element");var l=n[0].createElement("gantt-side-content-table");angular.element(s).append(l),r.append(t(s)(o))}})}}}])}(),function(){"use strict";angular.module("gantt.tooltips",["gantt","gantt.tooltips.templates"]).directive("ganttTooltips",["$compile","$document",function(e,t){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",dateFormat:"=?",content:"=?",delay:"=?"},link:function(n,i,a,r){var o=r.gantt.api;if(n.options&&"object"==typeof n.options.tooltips)for(var s in n.options.tooltips)n[s]=n.options[s];void 0===n.enabled&&(n.enabled=!0),void 0===n.dateFormat&&(n.dateFormat="MMM DD, HH:mm"),void 0===n.delay&&(n.delay=500),void 0===n.content&&(n.content="{{task.model.name}}</br><small>{{task.isMilestone() === true && getFromLabel() || getFromLabel() + ' - ' + getToLabel()}}</small>"),n.api=o,o.directives.on["new"](n,function(i,r,o){if("ganttTask"===i){var s=r.$new();s.pluginScope=n;var l=t[0].createElement("div");angular.element(l).attr("data-ng-if","pluginScope.enabled");var c=t[0].createElement("gantt-tooltip");void 0!==a.templateUrl&&angular.element(c).attr("data-template-url",a.templateUrl),void 0!==a.template&&angular.element(c).attr("data-template",a.template),angular.element(l).append(c),o.append(e(l)(s))}})}}}])}(),function(){"use strict";angular.module("gantt.tree",["gantt","gantt.tree.templates","ui.tree"]).directive("ganttTree",["ganttUtils","$compile","$document",function(e,t,n){return{restrict:"E",require:"^gantt",scope:{enabled:"=?",header:"=?",content:"=?",headerContent:"=?",keepAncestorOnFilterRow:"=?"},link:function(e,i,a,r){var o=r.gantt.api;if(e.options&&"object"==typeof e.options.sortable)for(var s in e.options.sortable)e[s]=e.options[s];void 0===e.enabled&&(e.enabled=!0),void 0===e.header&&(e.header="Name"),void 0===e.headerContent&&(e.headerContent="{{getHeader()}}"),void 0===e.keepAncestorOnFilterRow&&(e.keepAncestorOnFilterRow=!1),o.directives.on["new"](e,function(i,a,r){if("ganttSideContent"===i){var o=a.$new();o.pluginScope=e;var s=n[0].createElement("div");angular.element(s).attr("data-ng-if","pluginScope.enabled"),angular.element(s).addClass("side-element");var l=n[0].createElement("gantt-side-content-tree");angular.element(s).append(l),r.append(t(s)(o))}})}}}])}(),function(){"use strict";angular.module("gantt.bounds").directive("ganttTaskBounds",["$templateCache","moment",function(e,t){return{restrict:"E",templateUrl:function(t,n){var i;return i=void 0===n.templateUrl?"plugins/bounds/taskBounds.tmpl.html":n.templateUrl,n.template&&e.put(i,n.template),i},replace:!0,scope:!0,controller:["$scope","$element",function(e,n){n.toggleClass("ng-hide",!0),e.simplifyMoment=function(e){return t.isMoment(e)?e.unix():e},e.$watchGroup(["simplifyMoment(task.model.est)","simplifyMoment(task.model.lct)","task.left","task.width"],function(){var t=e.task.rowsManager.gantt.getPositionByDate(e.task.model.est),i=e.task.rowsManager.gantt.getPositionByDate(e.task.model.lct);n.css("left",t-e.task.left+"px"),n.css("width",i-t+"px"),n.toggleClass("gantt-task-bounds-in",!1),n.toggleClass("gantt-task-bounds-out",!1),void 0===e.task.model.est||void 0===e.task.model.lct?n.toggleClass("gantt-task-bounds-in",!0):e.task.model.est>e.task.model.from?n.toggleClass("gantt-task-bounds-out",!0):e.task.model.lct<e.task.model.to?n.toggleClass("gantt-task-bounds-out",!0):n.toggleClass("gantt-task-bounds-in",!0)}),e.task.$element.bind("mouseenter",function(){n.toggleClass("ng-hide",!1)}),e.task.$element.bind("mouseleave",function(){n.toggleClass("ng-hide",!0)}),e.task.rowsManager.gantt.api.directives.raise["new"]("ganttBounds",e,n),e.$on("$destroy",function(){e.task.rowsManager.gantt.api.directives.raise.destroy("ganttBounds",e,n)})}]}}])}(),function(){"use strict";angular.module("gantt.dependencies").factory("GanttDependenciesEvents",[function(){var e=function(e){var t=this;this.manager=e;var n=function(){return!t.manager.pluginScope.readOnly};this.manager.plumb.bind("beforeDrag",n),this.manager.plumb.bind("beforeStartDetach",n);var i=function(e){return e.sourceId!==e.targetId};this.manager.plumb.bind("beforeDrop",i),this.manager.plumb.bind("connectionDrag",function(e){t.manager.setDraggingConnection(e)}),this.manager.plumb.bind("connectionDragStop",function(){t.manager.setDraggingConnection(void 0)}),this.manager.plumb.bind("beforeDrop",function(){return t.manager.setDraggingConnection(void 0),!0});var a=function(e,n){if(n){var i;e.connection.$dependency&&(i=e.connection.$dependency);var a=e.sourceEndpoint,r=e.targetEndpoint,o=a.$task.model,s=o.dependencies;void 0===s&&(s=[],o.dependencies=s);var l={to:r.$task.model.id};s.push(l),i&&(i.removeFromTaskModel(),t.manager.removeDependency(i,!0));var c=t.manager.addDependency(a.$task,l);e.connection.$dependency=c,c.connection=e.connection,t.manager.api.dependencies.raise.add(c)}},r=function(e,n){if(n){var i;e.connection.$dependency&&(i=e.connection.$dependency);var a=e.newSourceEndpoint,r=e.newTargetEndpoint,o=a.$task.model,s=o.dependencies;void 0===s&&(s=[],o.dependencies=s);var l={to:r.$task.model.id};s.push(l),i&&(i.removeFromTaskModel(),t.manager.removeDependency(i,!0));var c=t.manager.addDependency(a.$task,l);e.connection.$dependency=c,c.connection=e.connection,t.manager.api.dependencies.raise.change(c,i)}},o=function(e,n){if(n){var i=e.connection.$dependency;i.removeFromTaskModel(),t.manager.removeDependency(i,!0),t.manager.api.dependencies.raise.remove(i)}};this.manager.plumb.bind("connectionMoved",r),this.manager.plumb.bind("connection",a),this.manager.plumb.bind("connectionDetached",o)};return e}])}(),function(){"use strict";angular.module("gantt.dependencies").factory("GanttDependenciesManager",["GanttDependency","GanttDependenciesEvents","GanttDependencyTaskMouseHandler",function(e,t,n){var i=function(i,a,r){var o=this;this.gantt=i,this.pluginScope=a,this.api=r,this.api.registerEvent("dependencies","add"),this.api.registerEvent("dependencies","change"),this.api.registerEvent("dependencies","remove"),this.plumb=jsPlumb.getInstance(),this.plumb.importDefaults(this.pluginScope.jsPlumbDefaults),this.dependenciesFrom={},this.dependenciesTo={},this.tasksList=[],this.tasks={},this.events=new t(this),this.pluginScope.$watch("enabled",function(e,t){e!==t&&o.refresh()}),this.pluginScope.$watch("readOnly",function(e,t){e!==t&&(o.setTasks(o.tasksList),o.refresh())}),this.pluginScope.$watch("jsPlumbDefaults",function(e,t){e!==t&&(o.plumb.importDefaults(e),o.refresh())},!0),this.addDependenciesFromTask=function(e){if(this.pluginScope.enabled){var t=e.model.dependencies;if(void 0!==t){angular.isArray(t)||(t=[t],e.model.dependencies=t);for(var n=0,i=t.length;i>n;n++){var a=o.addDependency(e,t[n]);a.connect()}}}},this.removeDependenciesFromTask=function(e,t){var n=this.getTaskDependencies(e);if(n)for(var i=0;i<n.length;i++)t||n[i].disconnect(),o.removeDependency(n[i])},this.addDependency=function(t,n){var i=new e(this,t,n),a=i.getFromTaskId(),r=i.getToTaskId();return a in this.dependenciesFrom||(this.dependenciesFrom[a]=[]),r in this.dependenciesTo||(this.dependenciesTo[r]=[]),a&&this.dependenciesFrom[a].push(i),r&&this.dependenciesTo[r].push(i),i},this.removeDependency=function(e,t){var n,i=this.dependenciesFrom[e.getFromTaskId()],a=[];if(i)for(n=0;n<i.length;n++)e===i[n]&&a.push(e);var r=this.dependenciesTo[e.getToTaskId()],o=[];if(r)for(n=0;n<r.length;n++)e===r[n]&&o.push(e);for(n=0;n<a.length;n++)t||a[n].disconnect(),i.splice(i.indexOf(e),1);for(n=0;n<o.length;n++)t||o[n].disconnect(),r.splice(r.indexOf(e),1);this.dependenciesFrom[e.getFromTaskId()]&&0===this.dependenciesFrom[e.getFromTaskId()].length&&delete this.dependenciesFrom[e.getFromTaskId()],this.dependenciesTo[e.getToTaskId()]&&0===this.dependenciesTo[e.getToTaskId()].length&&delete this.dependenciesTo[e.getToTaskId()]},this.getTaskDependencies=function(e){var t=[],n=o.dependenciesFrom[e.model.id];n&&(t=t.concat(n));var i=o.dependenciesTo[e.model.id];return i&&(t=t.concat(i)),t},this.setDraggingConnection=function(e){e?(o.draggingConnection=e,angular.forEach(o.tasks,function(e){e.dependencies.mouseHandler.release()})):(o.draggingConnection=void 0,angular.forEach(o.tasks,function(e){e.dependencies.mouseHandler.install()}))};var s=function(e){if(e.dependencies||(e.dependencies={}),e.dependencies.endpoints=[],o.pluginScope.endpoints)for(var t=0;t<o.pluginScope.endpoints.length;t++){var n=o.plumb.addEndpoint(e.$element,o.pluginScope.endpoints[t]);n.setVisible(!1,!0,!0),n.$task=e,e.dependencies.endpoints.push(n)}},l=function(e){for(var t=0;t<e.dependencies.endpoints.length;t++){var n=e.dependencies.endpoints[t];o.plumb.deleteEndpoint(n),n.$task=void 0}e.dependencies.endpoints=void 0},c=function(e){e.dependencies||(e.dependencies={}),o.pluginScope.readOnly||(e.dependencies.mouseHandler=new n(o,e),e.dependencies.mouseHandler.install())},u=function(e){e.dependencies.mouseHandler&&(e.dependencies.mouseHandler.release(),e.dependencies.mouseHandler=void 0)};this.setTasks=function(e){angular.forEach(o.tasks,function(e){u(e),l(e)});for(var t={},n=0;n<e.length;n++){var i=e[n];t[i.model.id]=i,s(i),c(i)}o.tasks=t,o.tasksList=e};var d=function(e){var t=o.getTaskDependencies(e);if(t)for(var n=0;n<t.length;n++)t[n].disconnect();return t},f=function(e){var t=o.getTaskDependencies(e);if(t)for(var n=0;n<t.length;n++)t[n].connect();return t};this.setTask=function(e){o.plumb.setSuspendDrawing(!0);try{var t=o.tasks[e.model.id];void 0!==t&&(d(t),u(t),l(t)),o.tasks[e.model.id]=e,s(e),c(e),f(e)}finally{o.plumb.setSuspendDrawing(!1,!0)}},this.getTask=function(e){return o.tasks[e]};var p=function(e){return e.dependencies.endpoints.filter(function(e){return e.isSource})},g=function(e){return e.dependencies.endpoints.filter(function(e){return e.isTarget})};this.connect=function(e,t,n){var i=p(e),a=g(t);if(i&&a){var r,s;r=n.connectParameters&&n.connectParameters.sourceEndpointIndex?i[n.connectParameters.sourceEndpointIndex]:i[0],s=n.connectParameters&&n.connectParameters.targetEndpointIndex?a[n.connectParameters.targetEndpointIndex]:a[0];var l=o.plumb.connect({source:r,target:s},n.connectParameters);return l}},this.getDependencies=function(){var e=[];return angular.forEach(this.dependenciesFrom,function(t){for(var n=0;n<t.length;n++)t[n]in e||e.push(t[n])}),e},this.refresh=function(e){o.plumb.setSuspendDrawing(!0);try{var t,n;e&&!angular.isArray(e)&&(e=[e]),void 0===e?(e=this.tasks,t=this.getDependencies()):(t=[],angular.forEach(e,function(e){var n=o.getTaskDependencies(e);angular.forEach(n,function(e){e in t||t.push(e)})}));for(n=0;n<t.length;n++)o.removeDependency(t[n]);angular.forEach(e,function(e){o.addDependenciesFromTask(e)})}finally{o.plumb.setSuspendDrawing(!1,!0)}},this.api.registerMethod("dependencies","refresh",this.refresh,this)};return i}])}(),function(){"use strict";angular.module("gantt.dependencies").factory("GanttDependency",["ganttUtils","ganttDom",function(e,t){var n=function(n,i,a){var r=this;this.manager=n,this.task=i,this.model=a,this.connection=void 0,this.fallbackEndpoints=[],this.isConnected=function(){return!!this.connection},this.disconnect=function(){this.connection&&(this.connection.endpoints&&this.manager.plumb.detach(this.connection),this.connection.$dependency=void 0,this.connection=void 0),this.deleteFallbackEndpoints()},this.deleteFallbackEndpoints=function(){if(this.fallbackEndpoints){for(var e=0;e<this.fallbackEndpoints.length;e++)r.manager.plumb.deleteEndpoint(this.fallbackEndpoints[e]);this.fallbackEndpoints=[]}},this.getFromTaskId=function(){return void 0!==this.model.from?this.model.from:this.task.model.id},this.getToTaskId=function(){return void 0!==this.model.to?this.model.to:this.task.model.id},this.getFromTask=function(){return void 0!==this.model.from?this.manager.getTask(this.model.from):this.task},this.getToTask=function(){return void 0!==this.model.to?this.manager.getTask(this.model.to):this.task},this.removeFromTaskModel=function(){var t=e.angularIndexOf(this.task.model.dependencies,this.model);return t>=0&&this.task.model.dependencies.splice(t,1),t};var o=function(e){if(void 0===e||void 0===e.$element)return!1;var n=e.$element[0];return t.isElementVisible(n)};this.connect=function(){var e=this.getFromTask(),t=this.getToTask();if(o(e)||(e=void 0),o(t)||(t=void 0),e&&t){var n=this.manager.connect(e,t,this.model);if(n)return n.$dependency=this,this.connection=n,!0}if(this.deleteFallbackEndpoints(),void 0!==e){var i=this.manager.pluginScope.fallbackEndpoints[1];this.fallbackEndpoints.push(this.manager.plumb.addEndpoint(e.$element,i))}if(void 0!==t){var a=this.manager.pluginScope.fallbackEndpoints[0];this.fallbackEndpoints.push(this.manager.plumb.addEndpoint(t.$element,a))}return!1}};return n}])}(),function(){"use strict";angular.module("gantt.dependencies").factory("GanttDependencyTaskMouseHandler",["$timeout",function(e){var t=function(t,n){var i=this;this.manager=t,this.task=n,this.installed=!1,this.elementHandlers=[],this.display=!0,this.hideEndpointsPromise=void 0;var a=function(t){this.element=t,this.mouseExitHandler=function(){e.cancel(i.hideEndpointsPromise),i.hideEndpointsPromise=e(i.hideEndpoints,1e3,!1)},this.mouseEnterHandler=function(){e.cancel(i.hideEndpointsPromise),i.displayEndpoints()},this.install=function(){this.element.bind("mouseenter",this.mouseEnterHandler),this.element.bind("mouseleave",this.mouseExitHandler)},this.release=function(){this.element.unbind("mouseenter",this.mouseEnterHandler),this.element.unbind("mouseleave",this.mouseExitHandler),e.cancel(i.hideEndpointsPromise)}};this.install=function(){i.installed||(i.hideEndpoints(),i.elementHandlers.push(new a(i.task.getContentElement())),angular.forEach(i.task.dependencies.endpoints,function(e){i.elementHandlers.push(new a(angular.element(e.canvas)))}),angular.forEach(i.elementHandlers,function(e){e.install()}),i.installed=!0)},this.release=function(){i.installed&&(angular.forEach(i.elementHandlers,function(e){e.release()}),i.elementHandlers=[],i.displayEndpoints(),i.installed=!1)},this.displayEndpoints=function(){i.display=!0,angular.forEach(i.task.dependencies.endpoints,function(e){e.setVisible(!0,!0,!0)})},this.hideEndpoints=function(){angular.forEach(i.task.dependencies.endpoints,function(e){e.setVisible(!1,!0,!0)}),i.display=!1}};return t}])}(),function(){"use strict";angular.module("gantt.groups").controller("GanttGroupController",["$scope","GanttTaskGroup","ganttUtils",function(e,t,n){var i=function(){var i=e.row.model.groups;"boolean"==typeof i&&(i={enabled:i});var a=n.firstProperty([i],"enabled",e.pluginScope.enabled);a?(e.display=n.firstProperty([i],"display",e.pluginScope.display),e.taskGroup=new t(e.row,e.pluginScope),e.row.setFromTo(),e.row.setFromToByValues(e.taskGroup.from,e.taskGroup.to)):(e.taskGroup=void 0,e.display=void 0)};e.gantt.api.tasks.on.viewChange(e,function(t){
if(void 0!==e.taskGroup)if(e.taskGroup.tasks.indexOf(t)>-1)i(),e.$$phase||e.$root.$$phase||e.$digest();else{var n=e.pluginScope.hierarchy.descendants(e.row);n.indexOf(t.row)>-1&&(i(),e.$$phase||e.$root.$$phase||e.$digest())}});var a=e.pluginScope.$watch("display",i);e.$watchCollection("gantt.rowsManager.filteredRows",i),e.gantt.api.columns.on.refresh(e,i),e.$on("$destroy",a)}])}(),function(){"use strict";angular.module("gantt.groups").directive("ganttTaskGroup",["GanttDirectiveBuilder",function(e){var t=new e("ganttTaskGroup","plugins/groups/taskGroup.tmpl.html");return t.build()}])}(),function(){"use strict";angular.module("gantt").factory("GanttTaskGroup",["ganttUtils","GanttTask",function(e,t){var n=function(n,i){var a=this;a.row=n,a.pluginScope=i,a.descendants=a.pluginScope.hierarchy.descendants(a.row),a.tasks=[],a.overviewTasks=[],a.promotedTasks=[],a.showGrouping=!1;var r=a.row.model.groups;"boolean"==typeof r&&(r={enabled:r});for(var o=function(t){var n=t.model.groups;"boolean"==typeof n&&(n={enabled:n});var i=t.row.model.groups;"boolean"==typeof i&&(i={enabled:i});var o=e.firstProperty([n,i,r],"enabled",a.pluginScope.enabled);if(o){var s=e.firstProperty([n,i,r],"display",a.pluginScope.display);return s}},s=0;s<a.descendants.length;s++)for(var l=a.descendants[s].tasks,c=0;c<l.length;c++){var u=l[c],d=o(u);if(void 0!==d){a.tasks.push(u);var f=new t(a.row,u.model);"overview"===d?a.overviewTasks.push(f):"promote"===d?a.promotedTasks.push(f):a.showGrouping=!0}}if(a.from=void 0,r&&(a.from=r.from),void 0===a.from)for(s=0;s<a.tasks.length;s++)(void 0===a.from||a.tasks[s].model.from<a.from)&&(a.from=a.tasks[s].model.from);if(a.to=void 0,r&&(a.to=r.to),void 0===a.to)for(s=0;s<a.tasks.length;s++)(void 0===a.to||a.tasks[s].model.to>a.to)&&(a.to=a.tasks[s].model.to);a.showGrouping&&(a.left=n.rowsManager.gantt.getPositionByDate(a.from),a.width=n.rowsManager.gantt.getPositionByDate(a.to)-a.left)};return n}])}(),function(){"use strict";angular.module("gantt").directive("ganttTaskOverview",["GanttDirectiveBuilder",function(e){var t=new e("ganttTaskOverview","plugins/groups/taskOverview.tmpl.html");return t.controller=function(e,t){e.task.$element=t,e.task.$scope=e,e.task.updatePosAndSize()},t.build()}])}(),function(){"use strict";angular.module("gantt.labels").directive("ganttLabelsBody",["GanttDirectiveBuilder","ganttLayout",function(e,t){var n=new e("ganttLabelsBody","plugins/labels/labelsBody.tmpl.html");return n.controller=function(e){var n=t.getScrollBarHeight();e.getLabelsCss=function(){var t={};if(e.maxHeight){var i=e.gantt.scroll.isHScrollbarVisible()?n:0;t["max-height"]=e.maxHeight-i-e.gantt.header.getHeight()+"px"}return t}},n.build()}])}(),function(){"use strict";angular.module("gantt.labels").directive("ganttLabelsHeader",["GanttDirectiveBuilder",function(e){var t=new e("ganttLabelsHeader","plugins/labels/labelsHeader.tmpl.html");return t.build()}])}(),function(){"use strict";angular.module("gantt.labels").directive("ganttSideContentLabels",["GanttDirectiveBuilder",function(e){var t=new e("ganttSideContentLabels","plugins/labels/sideContentLabels.tmpl.html");return t.build()}])}(),function(){"use strict";angular.module("gantt.movable").factory("ganttMovableOptions",[function(){return{initialize:function(e){return e.enabled=void 0!==e.enabled?e.enabled:!0,e.allowMoving=void 0!==e.allowMoving?!!e.allowMoving:!0,e.allowResizing=void 0!==e.allowResizing?!!e.allowResizing:!0,e.allowRowSwitching=void 0!==e.allowRowSwitching?!!e.allowRowSwitching:!0,e}}}])}(),function(){"use strict";angular.module("gantt.progress").directive("ganttTaskProgress",["$templateCache",function(e){return{restrict:"E",requires:"^ganttTask",templateUrl:function(t,n){var i;return i=void 0===n.templateUrl?"plugins/progress/taskProgress.tmpl.html":n.templateUrl,void 0!==n.template&&e.put(i,n.template),i},replace:!0,scope:!0,controller:["$scope","$element",function(e,t){e.getClasses=function(){var t=[];return"object"==typeof e.task.model.progress&&(t=e.task.model.progress.classes),t},e.getCss=function(){var t,n={};return void 0!==e.task.model.progress&&(t="object"==typeof e.task.model.progress?e.task.model.progress:{percent:e.task.model.progress}),t&&(t.color?n["background-color"]=t.color:n["background-color"]="#6BC443",n.width=t.percent+"%"),n},e.task.rowsManager.gantt.api.directives.raise["new"]("ganttTaskProgress",e,t),e.$on("$destroy",function(){e.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",e,t)})}]}}])}(),function(){"use strict";angular.module("gantt.table").directive("ganttSideContentTable",["GanttDirectiveBuilder","ganttLayout",function(e,t){var n=new e("ganttSideContentTable","plugins/table/sideContentTable.tmpl.html");return n.controller=function(e){var n=t.getScrollBarHeight();e.getMaxHeightCss=function(){var t={};if(e.maxHeight){var i=e.gantt.scroll.isHScrollbarVisible()?n:0;t["max-height"]=e.maxHeight-i-e.gantt.header.getHeight()+"px"}return t}},n.build()}])}(),function(){"use strict";angular.module("gantt.table").controller("TableColumnController",["$scope",function(e){e.getHeader=function(){var t=e.pluginScope.headers[e.column];return void 0!==t?t:(void 0!==e.pluginScope.headerFormatter&&(t=e.pluginScope.headerFormatter(e.column)),void 0!==t?t:t)},e.getHeaderContent=function(){var t=e.pluginScope.headerContents[e.column];return void 0===t?"{{getHeader()}}":t},e.getClass=function(){return e.pluginScope.classes[e.column]}}])}(),function(){"use strict";angular.module("gantt.table").controller("TableColumnRowController",["$scope",function(e){e.getValue=function(){var t=e.$eval(e.column,e.row),n=e.pluginScope.formatters[e.column];return void 0!==n&&(t=n(t,e.column,e.row)),t},e.getRowContent=function(){var t;return e.row.model.columnContents&&(t=e.row.model.columnContents[e.column]),void 0===t&&"model.name"===e.column&&(t=e.row.model.content),void 0===t&&(t=e.pluginScope.contents[e.column]),void 0===t&&"model.name"===e.column&&(t=e.row.rowsManager.gantt.options.value("rowContent")),void 0===t&&void 0!==e.pluginScope.content&&(t=e.pluginScope.content),void 0===t?"{{getValue()}}":t}}])}(),function(){"use strict";angular.module("gantt.tooltips").directive("ganttTooltip",["$log","$timeout","$compile","$document","$templateCache","ganttDebounce","ganttSmartEvent",function(e,t,n,i,a,r,o){return{restrict:"E",templateUrl:function(e,t){var n;return n=void 0===t.templateUrl?"plugins/tooltips/tooltip.tmpl.html":t.templateUrl,void 0!==t.template&&a.put(n,t.template),n},scope:!0,replace:!0,controller:["$scope","$element","ganttUtils",function(e,n,a){var s,l,c,u=angular.element(i[0].body),d=e.task.$element,f=!1,p=function(){var e=i[0];return e.documentElement.clientWidth||e.documentElement.getElementById("body")[0].clientWidth},g=function(t){t+n[0].offsetWidth>p()?(n.css("left",t+20-n[0].offsetWidth+"px"),e.isRightAligned=!0):(n.css("left",t-20+"px"),e.isRightAligned=!1)},h=function(t){f=!0,c.bind(),e.displayed=!0,e.$evalAsync(function(){var i;n.hasClass("ng-hide")&&(n.removeClass("ng-hide"),i=!0),e.elementHeight=n[0].offsetHeight,i&&n.addClass("ng-hide"),e.taskRect=d[0].getBoundingClientRect(),g(t)})},m=function(){f=!1,c.unbind(),e.$evalAsync(function(){e.displayed=!1})},v=function(n,i){s&&t.cancel(s);var r=e.task.model.tooltips,o=e.task.row.model.tooltips;"boolean"==typeof r&&(r={enabled:r}),"boolean"==typeof o&&(o={enabled:o});var c=a.firstProperty([r,o],"enabled",e.pluginScope.enabled);c&&!f&&void 0!==l&&n?i?s=t(function(){h(l)},e.pluginScope.delay,!1):h(l):n||e.task.active||m()};c=o(e,u,"mousemove",r(function(t){f?((!e.taskRect||t.clientX<e.taskRect.left||t.clientX>e.taskRect.right||t.clientY>e.taskRect.bottom||t.clientY<e.taskRect.top)&&v(!1,!1),g(t.clientX)):(l=t.clientX,v(!0,!1))},5,!1)),e.getFromLabel=function(){var t=e.task.model.tooltips,n=e.task.row.model.tooltips;"boolean"==typeof t&&(t={enabled:t}),"boolean"==typeof n&&(n={enabled:n});var i=a.firstProperty([t,n],"dateFormat",e.pluginScope.dateFormat);return e.task.model.from.format(i)},e.getToLabel=function(){var t=e.task.model.tooltips,n=e.task.row.model.tooltips;"boolean"==typeof t&&(t={enabled:t}),"boolean"==typeof n&&(n={enabled:n});var i=a.firstProperty([t,n],"dateFormat",e.pluginScope.dateFormat);return e.task.model.to.format(i)},e.task.getContentElement().bind("mousemove",function(e){l=e.clientX}),e.task.getContentElement().bind("mouseenter",function(e){l=e.clientX,v(!0,!0)}),e.task.getContentElement().bind("mouseleave",function(){v(!1)}),e.pluginScope.api.tasks.on.moveBegin&&(e.pluginScope.api.tasks.on.moveBegin(e,function(t){t===e.task&&v(!0)}),e.pluginScope.api.tasks.on.moveEnd(e,function(t){t===e.task&&v(!1)}),e.pluginScope.api.tasks.on.resizeBegin(e,function(t){t===e.task&&v(!0)}),e.pluginScope.api.tasks.on.resizeEnd(e,function(t){t===e.task&&v(!1)})),e.task.isMoving&&v(!0,!1),e.gantt.api.directives.raise["new"]("ganttTooltip",e,n),e.$on("$destroy",function(){e.gantt.api.directives.raise.destroy("ganttTooltip",e,n)})}]}}])}(),function(){"use strict";angular.module("gantt.tree").directive("ganttRowTreeLabel",["GanttDirectiveBuilder",function(e){var t=new e("ganttRowTreeLabel");return t.restrict="A",t.templateUrl=void 0,t.build()}])}(),function(){"use strict";angular.module("gantt.tree").directive("ganttSideContentTree",["GanttDirectiveBuilder",function(e){var t=new e("ganttSideContentTree","plugins/tree/sideContentTree.tmpl.html");return t.build()}])}(),function(){"use strict";angular.module("gantt.tree").controller("GanttTreeController",["$scope","$filter","GanttHierarchy",function(e,t,n){e.rootRows=[],e.getHeader=function(){return e.pluginScope.header};var i=new n;e.pluginScope.$watchGroup(["keepAncestorOnFilterRow","enabled"],function(n){var a=n[0]&&n[1];if(a){var r=function(e,n,a){i.refresh(e);for(var r=[],o=0;o<e.length;o++){var s=i.children(e[o]);s&&0!==s.length||r.push(e[o])}var l=t("filter")(r,n,a),c=function(e){if(l.indexOf(e)>-1)return!0;for(var t=i.descendants(e),n=0;n<t.length;n++)if(l.indexOf(t[n])>-1)return!0;return!1};return t("filter")(e,c,a)};e.gantt.rowsManager.setFilterImpl(r)}else e.gantt.rowsManager.setFilterImpl(!1)});var a=function(t){for(var n=e.parent(t);void 0!==n;){if(void 0!==n&&n._collapsed)return!1;n=e.parent(n)}return!0},r=function(e){return e.filter(function(e){return a(e)})},o=function(t){for(var n=[],i=[],a=!1,r=0;r<t.length;r++){var o=e.parent(t[r]);void 0===o?i.push(t[r]):a=!0}var s=function(i){n.push(i);var a=e.children(i);if(void 0!==a&&a.length>0)for(var r=a.sort(function(e,n){return t.indexOf(e)-t.indexOf(n)}),o=0;o<r.length;o++)s(r[o])};for(r=0;r<i.length;r++)s(i[r]);return n};e.gantt.api.rows.addRowSorter(o),e.gantt.api.rows.addRowFilter(r),e.$on("$destroy",function(){e.gantt.api.rows.removeRowSorter(o),e.gantt.api.rows.removeRowFilter(r)});var s=function(){e.rootRows=i.refresh(e.gantt.rowsManager.filteredRows),e.gantt.rowsManager.filteredRows.length>0&&(e.gantt.api.rows.sort(),e.gantt.api.rows.refresh())};e.gantt.api.rows.on.remove(e,s),e.gantt.api.rows.on.add(e,s);var l=function(t){var n;return n="string"==typeof t?e.gantt.rowsManager.rowsMap[t]:t,void 0!==n?void 0===n._collapsed?!1:n._collapsed:void 0},c=function(t){var n;if(n="string"==typeof t?e.gantt.rowsManager.rowsMap[t]:t,void 0!==n){var i=e.nodeScopes[n.model.id];i.collapsed&&i.toggle()}},u=function(t){var n;if(n="string"==typeof t?e.gantt.rowsManager.rowsMap[t]:t,void 0!==n){var i=e.nodeScopes[n.model.id];i.collapsed||i.toggle()}},d=function(){return i};e.getHeaderContent=function(){return e.pluginScope.headerContent},e.gantt.api.registerMethod("tree","refresh",s,this),e.gantt.api.registerMethod("tree","isCollapsed",l,this),e.gantt.api.registerMethod("tree","expand",c,this),e.gantt.api.registerMethod("tree","collapse",u,this),e.gantt.api.registerEvent("tree","collapsed"),e.gantt.api.registerMethod("tree","getHierarchy",d,this),e.$watchCollection("gantt.rowsManager.filteredRows",function(){s()}),e.children=function(t){return void 0===t?e.rootRows:i.children(t)},e.parent=function(e){return i.parent(e)},e.nodeScopes={}}]).controller("GanttUiTreeController",["$scope",function(e){var t=function(){e.$broadcast("angular-ui-tree:collapse-all")},n=function(){e.$broadcast("angular-ui-tree:expand-all")};e.gantt.api.registerMethod("tree","collapseAll",t,e),e.gantt.api.registerMethod("tree","expandAll",n,e)}]).controller("GanttTreeNodeController",["$scope",function(e){e.$parent.nodeScopes[e.row.model.id]=e,e.$on("$destroy",function(){delete e.$parent.nodeScopes[e.row.model.id]}),e.$watch("children(row)",function(t){if(t){for(var n=e.row.rowsManager.filteredRows,i=[],a=0;a<t.length;a++){var r=t[a];n.indexOf(r)>-1&&i.push(r)}e.$parent.childrenRows=i}else e.$parent.childrenRows=t}),e.isCollapseDisabled=function(){return!e.$parent.childrenRows||0===e.$parent.childrenRows.length},e.getValue=function(){return e.row.model.name},e.getRowContent=function(){if(void 0!==e.row.model.content)return e.row.model.content;if(void 0!==e.pluginScope.content)return e.pluginScope.content;var t=e.row.rowsManager.gantt.options.value("rowContent");return void 0===t&&(t="{{row.model.name}}"),t},e.$watch("collapsed",function(t){if(e.$modelValue._collapsed!==t){var n=e.$modelValue._collapsed;e.$modelValue._collapsed=t,void 0!==n&&t!==n&&(e.gantt.api.tree.raise.collapsed(e,e.$modelValue,t),e.gantt.api.rows.refresh())}})}])}(),function(){"use strict";angular.module("gantt.tree").directive("ganttTreeBody",["GanttDirectiveBuilder","ganttLayout",function(e,t){var n=new e("ganttTreeBody","plugins/tree/treeBody.tmpl.html");return n.controller=function(e){var n=t.getScrollBarHeight();e.getLabelsCss=function(){var t={};if(e.maxHeight){var i=e.gantt.scroll.isHScrollbarVisible()?n:0;t["max-height"]=e.maxHeight-i-e.gantt.header.getHeight()+"px"}return t}},n.build()}])}(),function(){"use strict";angular.module("gantt.tree").directive("ganttTreeHeader",["GanttDirectiveBuilder",function(e){var t=new e("ganttTreeHeader","plugins/tree/treeHeader.tmpl.html");return t.build()}])}(),angular.module("gantt.bounds.templates",[]).run(["$templateCache",function(e){e.put("plugins/bounds/taskBounds.tmpl.html",'<div ng-cloak class="gantt-task-bounds" ng-style="getCss()" ng-class="getClass()"></div>\n')}]),angular.module("gantt.dependencies.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.drawtask.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.groups.templates",[]).run(["$templateCache",function(e){e.put("plugins/groups/taskGroup.tmpl.html",'<div ng-controller="GanttGroupController">\n    <div class="gantt-task-group-overview" ng-if="taskGroup.overviewTasks.length > 0">\n        <gantt-task-overview ng-repeat="task in taskGroup.overviewTasks"></gantt-task-overview>\n    </div>\n    <div class="gantt-task-group-promote" ng-if="taskGroup.row._collapsed && taskGroup.promotedTasks.length > 0">\n        <gantt-task ng-repeat="task in taskGroup.promotedTasks"></gantt-task>\n    </div>\n    <div class="gantt-task-group"\n         ng-if="taskGroup.showGrouping"\n         ng-style="{\'left\': taskGroup.left + \'px\', \'width\': taskGroup.width + \'px\'}">\n        <div class="gantt-task-group-left-main"></div>\n        <div class="gantt-task-group-right-main"></div>\n        <div class="gantt-task-group-left-symbol"></div>\n        <div class="gantt-task-group-right-symbol"></div>\n    </div>\n</div>\n\n'),e.put("plugins/groups/taskOverview.tmpl.html",'<div class="gantt-task gantt-task-overview" ng-class="task.model.classes">\n    <gantt-task-background></gantt-task-background>\n    <gantt-task-content></gantt-task-content>\n    <gantt-task-foreground></gantt-task-foreground>\n</div>\n\n')}]),angular.module("gantt.labels.templates",[]).run(["$templateCache",function(e){e.put("plugins/labels/labelsBody.tmpl.html",'<div class="gantt-labels-body" ng-style="getLabelsCss()">\n    <div gantt-vertical-scroll-receiver>\n        <div ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n            <div gantt-row-label\n                 class="gantt-row-label gantt-row-height"\n                 ng-class="row.model.classes"\n                 ng-style="{\'height\': row.model.height}">\n                <span class="gantt-label-text">{{row.model.name}}</span>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("plugins/labels/labelsHeader.tmpl.html",'<div class="gantt-labels-header">\n    <div ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.headers.length > 0">\n        <div ng-repeat="header in gantt.columnsManager.headers">\n            <div class="gantt-row-height" ng-class="{\'gantt-labels-header-row\': $last, \'gantt-labels-header-row-last\': $last}"><span>{{$last ? pluginScope.header : ""}}</span></div>\n        </div>\n    </div>\n</div>\n'),e.put("plugins/labels/sideContentLabels.tmpl.html",'<div class="gantt-side-content-labels">\n    <gantt-labels-header>\n    </gantt-labels-header>\n    <gantt-labels-body>\n    </gantt-labels-body>\n</div>\n')}]),angular.module("gantt.movable.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.overlap.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.progress.templates",[]).run(["$templateCache",function(e){e.put("plugins/progress/taskProgress.tmpl.html",'<div ng-cloak class="gantt-task-progress" ng-style="getCss()" ng-class="getClasses()"></div>\n')}]),angular.module("gantt.resizeSensor.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.sortable.templates",[]).run(["$templateCache",function(e){}]),angular.module("gantt.table.templates",[]).run(["$templateCache",function(e){e.put("plugins/table/sideContentTable.tmpl.html",'<div class="gantt-side-content-table">\n\n    <div class="gantt-table-column {{getClass()}}" ng-repeat="column in pluginScope.columns" ng-controller="TableColumnController">\n\n        <div class="gantt-table-header" ng-style="{height: ganttHeaderHeight + \'px\'}">\n            <div ng-show="ganttHeaderHeight" class="gantt-row-label-header gantt-row-label gantt-table-row gantt-table-header-row">\n                <span class="gantt-label-text" gantt-bind-compile-html="getHeaderContent()"/>\n            </div>\n        </div>\n\n        <div class="gantt-table-content" ng-style="getMaxHeightCss()">\n            <div gantt-vertical-scroll-receiver>\n                <div class="gantt-table-row" ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id" ng-controller="TableColumnRowController">\n                    <div gantt-row-label class="gantt-row-label gantt-row-height" ng-class="row.model.classes" ng-style="{\'height\': row.model.height}">\n                        <div class="gantt-valign-container">\n                            <div class="gantt-valign-content">\n                                <span class="gantt-label-text" gantt-bind-compile-html="getRowContent()"></span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n    </div>\n</div>\n')}]),angular.module("gantt.tooltips.templates",[]).run(["$templateCache",function(e){e.put("plugins/tooltips/tooltip.tmpl.html",'<div ng-cloak\n     class="gantt-task-info"\n     ng-show="displayed"\n     ng-class="isRightAligned ? \'gantt-task-infoArrowR\' : \'gantt-task-infoArrow\'"\n     ng-style="{top: taskRect.top + \'px\', marginTop: -elementHeight - 8 + \'px\'}">\n    <div class="gantt-task-info-content">\n        <div gantt-bind-compile-html="pluginScope.content"></div>\n    </div>\n</div>\n')}]),angular.module("gantt.tree.templates",[]).run(["$templateCache",function(e){e.put("plugins/tree/sideContentTree.tmpl.html",'<div class="gantt-side-content-tree" ng-controller="GanttTreeController">\n    <gantt-tree-header>\n    </gantt-tree-header>\n    <gantt-tree-body>\n    </gantt-tree-body>\n</div>\n'),e.put("plugins/tree/treeBody.tmpl.html",'<div class="gantt-tree-body" ng-style="getLabelsCss()">\n    <div gantt-vertical-scroll-receiver>\n        <div class="gantt-row-label-background">\n            <div class="gantt-row-label gantt-row-height"\n                 ng-class="row.model.classes"\n                 ng-style="{\'height\': row.model.height}"\n                 ng-repeat="row in gantt.rowsManager.visibleRows track by row.model.id">\n                &nbsp;\n            </div>\n        </div>\n        <div ui-tree ng-controller="GanttUiTreeController" data-drag-enabled="false" data-empty-place-holder-enabled="false">\n            <ol class="gantt-tree-root" ui-tree-nodes ng-model="rootRows">\n                <li ng-repeat="row in rootRows" ui-tree-node\n                    ng-include="\'plugins/tree/treeBodyChildren.tmpl.html\'">\n                </li>\n            </ol>\n        </div>\n    </div>\n</div>\n'),e.put("plugins/tree/treeBodyChildren.tmpl.html",'<div ng-controller="GanttTreeNodeController"\n     class="gantt-row-label gantt-row-height"\n     ng-class="row.model.classes"\n     ng-style="{\'height\': row.model.height}">\n    <div class="gantt-valign-container">\n        <div class="gantt-valign-content">\n            <a ng-disabled="isCollapseDisabled()" data-nodrag\n               class="gantt-tree-handle-button btn btn-xs"\n               ng-class="{\'gantt-tree-collapsed\': collapsed, \'gantt-tree-expanded\': !collapsed}"\n               ng-click="!isCollapseDisabled() && toggle()"><span\n                class="gantt-tree-handle glyphicon glyphicon-chevron-down"\n                ng-class="{\n                \'glyphicon-chevron-right\': collapsed, \'glyphicon-chevron-down\': !collapsed,\n                \'gantt-tree-collapsed\': collapsed, \'gantt-tree-expanded\': !collapsed}"></span>\n            </a>\n            <span gantt-row-label class="gantt-label-text" gantt-bind-compile-html="getRowContent()"/>\n        </div>\n    </div>\n</div>\n<ol ui-tree-nodes ng-class="{hidden: collapsed}" ng-model="childrenRows">\n    <li ng-repeat="row in childrenRows" ui-tree-node>\n        <div ng-include="\'plugins/tree/treeBodyChildren.tmpl.html\'"></div>\n    </li>\n</ol>\n'),e.put("plugins/tree/treeHeader.tmpl.html",'<div class="gantt-tree-header" ng-style="{height: $parent.ganttHeaderHeight + \'px\'}">\n    <div ng-if="$parent.ganttHeaderHeight" class="gantt-row-label gantt-row-label-header gantt-tree-row gantt-tree-header-row"><span class="gantt-label-text" gantt-bind-compile-html="getHeaderContent()"/></div>\n</div>\n')}]),function(e,t,n){"use strict";function i(e,n,i,a,r,o){function s(e,n){return angular.element((n||t).querySelectorAll(e))}function l(e){return c[e]?c[e]:c[e]=n.get(e,{cache:o}).then(function(e){return e.data})}this.compile=function(t){t.template&&/\.html$/.test(t.template)&&(console.warn("Deprecated use of `template` option to pass a file. Please use the `templateUrl` option instead."),t.templateUrl=t.template,t.template="");var n=t.templateUrl,o=t.template||"",c=t.controller,u=t.controllerAs,d=angular.copy(t.resolve||{}),f=angular.copy(t.locals||{}),p=t.transformTemplate||angular.identity,g=t.bindToController;if(angular.forEach(d,function(e,t){angular.isString(e)?d[t]=i.get(e):d[t]=i.invoke(e)}),angular.extend(d,f),o)d.$template=e.when(o);else{if(!n)throw new Error("Missing `template` / `templateUrl` option.");d.$template=l(n)}return t.contentTemplate&&(d.$template=e.all([d.$template,l(t.contentTemplate)]).then(function(e){var n=angular.element(e[0]),i=s('[ng-bind="content"], [ng-bind="title"]',n[0]).removeAttr("ng-bind").html(e[1]);return t.templateUrl||i.next().remove(),n[0].outerHTML})),e.all(d).then(function(e){var n=p(e.$template);t.html&&(n=n.replace(/ng-bind="/gi,'ng-bind-html="'));var i=angular.element("<div>").html(n.trim()).contents(),o=a(i);return{locals:e,element:i,link:function(t){if(e.$scope=t,c){var n=r(c,e,!0);g&&angular.extend(n.instance,e);var a=angular.isObject(n)?n:n();i.data("$ngControllerController",a),i.children().data("$ngControllerController",a),u&&(t[u]=a)}return o.apply(null,arguments)}}})};var c={}}i.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"],angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var e=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",templateUrl:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"bsAsyncFilter",limit:6,autoSelect:!1,comparator:"",trimValue:!0};this.$get=["$window","$rootScope","$tooltip","$$rAF","$timeout",function(t,n,i,a,r){function o(t,n,o){var l={},c=angular.extend({},e,o);l=i(t,c);var u=o.scope,d=l.$scope;d.$resetMatches=function(){d.$matches=[],d.$activeIndex=c.autoSelect?0:-1},d.$resetMatches(),d.$activate=function(e){d.$$postDigest(function(){l.activate(e)})},d.$select=function(e,t){d.$$postDigest(function(){l.select(e)})},d.$isVisible=function(){return l.$isVisible()},l.update=function(e){d.$matches=e,d.$activeIndex>=e.length&&(d.$activeIndex=c.autoSelect?0:-1),s(d),a(l.$applyPlacement)},l.activate=function(e){d.$activeIndex=e},l.select=function(e){if(-1!==e){var t=d.$matches[e].value;n.$setViewValue(t),n.$render(),d.$resetMatches(),u&&u.$digest(),d.$emit(c.prefixEvent+".select",t,e,l)}},l.$isVisible=function(){return c.minLength&&n?d.$matches.length&&angular.isString(n.$viewValue)&&n.$viewValue.length>=c.minLength:!!d.$matches.length},l.$getIndex=function(e){var t;for(t=d.$matches.length;t--&&!angular.equals(d.$matches[t].value,e););return t},l.$onMouseDown=function(e){e.preventDefault(),e.stopPropagation()},l.$onKeyDown=function(e){/(38|40|13)/.test(e.keyCode)&&(!l.$isVisible()||13===e.keyCode&&-1===d.$activeIndex||(e.preventDefault(),e.stopPropagation()),13===e.keyCode&&d.$matches.length?l.select(d.$activeIndex):38===e.keyCode&&d.$activeIndex>0?d.$activeIndex--:40===e.keyCode&&d.$activeIndex<d.$matches.length-1?d.$activeIndex++:angular.isUndefined(d.$activeIndex)&&(d.$activeIndex=0),d.$digest())};var f=l.show;l.show=function(){f(),r(function(){l.$element&&(l.$element.on("mousedown",l.$onMouseDown),c.keyboard&&t&&t.on("keydown",l.$onKeyDown))},0,!1)};var p=l.hide;return l.hide=function(){l.$element&&l.$element.off("mousedown",l.$onMouseDown),c.keyboard&&t&&t.off("keydown",l.$onKeyDown),c.autoSelect||l.activate(-1),p()},l}function s(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}return o.defaults=e,o}]}).filter("bsAsyncFilter",["$filter",function(e){return function(t,n,i){return t&&angular.isFunction(t.then)?t.then(function(t){return e("filter")(t,n,i)}):e("filter")(t,n,i)}}]).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(e,t,n,i,a){var r=i.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,o){var s={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","filter","limit","minLength","watchOptions","selectMode","autoSelect","comparator","id","prefixEvent","prefixClass"],function(e){angular.isDefined(n[e])&&(s[e]=n[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container","trimValue"],function(e){angular.isDefined(n[e])&&l.test(n[e])&&(s[e]=!1)}),t.attr("autocomplete")||t.attr("autocomplete","off");var c=s.filter||r.filter,u=s.limit||r.limit,d=s.comparator||r.comparator,f=n.bsOptions;c&&(f+=" | "+c+":$viewValue"),d&&(f+=":"+d),u&&(f+=" | limitTo:"+u);var p=a(f),g=i(t,o,s);if(s.watchOptions){var h=p.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();e.$watchCollection(h,function(t,n){p.valuesFn(e,o).then(function(e){g.update(e),o.$render()})})}e.$watch(n.ngModel,function(t,n){e.$modelValue=t,p.valuesFn(e,o).then(function(e){return s.selectMode&&!e.length&&t.length>0?void o.$setViewValue(o.$viewValue.substring(0,o.$viewValue.length-1)):(e.length>u&&(e=e.slice(0,u)),g.update(e),void o.$render())})}),o.$formatters.push(function(e){var t=p.displayValue(e);return t?t:e&&"object"!=typeof e?e:""}),o.$render=function(){if(o.$isEmpty(o.$viewValue))return t.val("");var e=g.$getIndex(o.$modelValue),n=-1!==e?g.$scope.$matches[e].label:o.$viewValue;n=angular.isObject(n)?p.displayValue(n):n;var i=n?n.toString().replace(/<(?:.|\n)*?>/gm,""):"";t.val(s.trimValue===!1?i:i.trim())},e.$on("$destroy",function(){g&&g.destroy(),s=null,g=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",templateUrl:"tooltip/tooltip.tpl.html",template:"",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$bsCompiler","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(n,i,a,r,o,s,l,c,u,d,f){function p(r,o){function s(){R.$emit(A.prefixEvent+".show",F)}function p(){if(R.$emit(A.prefixEvent+".hide",F),z===Y){if(W&&"focus"===A.trigger)return r[0].blur();_()}}function y(){var e=A.trigger.split(" ");angular.forEach(e,function(e){"click"===e?r.on("click",F.toggle):"manual"!==e&&(r.on("hover"===e?"mouseenter":"focus",F.enter),r.on("hover"===e?"mouseleave":"blur",F.leave),"button"===I&&"hover"!==e&&r.on(m?"touchstart":"mousedown",F.$onFocusElementMouseDown))})}function b(){for(var e=A.trigger.split(" "),t=e.length;t--;){var n=e[t];"click"===n?r.off("click",F.toggle):"manual"!==n&&(r.off("hover"===n?"mouseenter":"focus",F.enter),r.off("hover"===n?"mouseleave":"blur",F.leave),"button"===I&&"hover"!==n&&r.off(m?"touchstart":"mousedown",F.$onFocusElementMouseDown))}}function w(){"focus"!==A.trigger?z.on("keyup",F.$onKeyUp):r.on("keyup",F.$onFocusKeyUp)}function $(){"focus"!==A.trigger?z.off("keyup",F.$onKeyUp):r.off("keyup",F.$onFocusKeyUp)}function k(){f(function(){z.on("click",S),v.on("click",F.hide),G=!0},0,!1)}function x(){G&&(z.off("click",S),v.off("click",F.hide),G=!1)}function S(e){e.stopPropagation()}function C(e){e=e||A.target||r;var i=e[0],a="BODY"===i.tagName,o=i.getBoundingClientRect(),s={};for(var l in o)s[l]=o[l];null===s.width&&(s=angular.extend({},s,{width:o.right-o.left,height:o.bottom-o.top}));var c=a?{top:0,left:0}:u.offset(i),d={scroll:a?t.documentElement.scrollTop||t.body.scrollTop:e.prop("scrollTop")||0},f=a?{width:t.documentElement.clientWidth,height:n.innerHeight}:null;return angular.extend({},s,d,f,c)}function D(e,t,n,i){var a,r=e.split("-");switch(r[0]){case"right":a={top:t.top+t.height/2-i/2,left:t.left+t.width};break;case"bottom":a={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"left":a={top:t.top+t.height/2-i/2,left:t.left-n};break;default:a={top:t.top-i,left:t.left+t.width/2-n/2}}if(!r[1])return a;if("top"===r[0]||"bottom"===r[0])switch(r[1]){case"left":a.left=t.left;break;case"right":a.left=t.left+t.width-n}else if("left"===r[0]||"right"===r[0])switch(r[1]){case"top":a.top=t.top-i+t.height;break;case"bottom":a.top=t.top}return a}function M(e,t){var n=z[0],i=n.offsetWidth,a=n.offsetHeight,r=parseInt(u.css(n,"margin-top"),10),o=parseInt(u.css(n,"margin-left"),10);isNaN(r)&&(r=0),isNaN(o)&&(o=0),e.top=e.top+r,e.left=e.left+o,u.setOffset(n,angular.extend({using:function(e){z.css({top:Math.round(e.top)+"px",left:Math.round(e.left)+"px",right:""})}},e),0);var s=n.offsetWidth,l=n.offsetHeight;if("top"===t&&l!==a&&(e.top=e.top+a-l),!/top-left|top-right|bottom-left|bottom-right/.test(t)){var c=T(t,e,s,l);if(c.left?e.left+=c.left:e.top+=c.top,u.setOffset(n,e),/top|right|bottom|left/.test(t)){var d=/top|bottom/.test(t),f=d?2*c.left-i+s:2*c.top-a+l,p=d?"offsetWidth":"offsetHeight";E(f,n[p],d)}}}function T(e,t,n,i){var a={top:0,left:0};if(!F.$viewport)return a;var r=A.viewport&&A.viewport.padding||0,o=C(F.$viewport);if(/right|left/.test(e)){var s=t.top-r-o.scroll,l=t.top+r-o.scroll+i;s<o.top?a.top=o.top-s:l>o.top+o.height&&(a.top=o.top+o.height-l);
}else{var c=t.left-r,u=t.left+r+n;c<o.left?a.left=o.left-c:u>o.right&&(a.left=o.left+o.width-u)}return a}function E(e,t,n){var i=h(".tooltip-arrow, .arrow",z[0]);i.css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")}function _(){clearTimeout(L),F.$isShown&&null!==z&&(A.autoClose&&x(),A.keyboard&&$()),V&&(V.$destroy(),V=null),z&&(z.remove(),z=F.$element=null)}var F={},A=F.$options=angular.extend({},e,o),P=F.$promise=a.compile(A),R=F.$scope=A.scope&&A.scope.$new()||i.$new(),I=r[0].nodeName.toLowerCase();if(A.delay&&angular.isString(A.delay)){var O=A.delay.split(",").map(parseFloat);A.delay=O.length>1?{show:O[0],hide:O[1]}:O[0]}F.$id=A.id||r.attr("id")||"",A.title&&(R.title=c.trustAsHtml(A.title)),R.$setEnabled=function(e){R.$$postDigest(function(){F.setEnabled(e)})},R.$hide=function(){R.$$postDigest(function(){F.hide()})},R.$show=function(){R.$$postDigest(function(){F.show()})},R.$toggle=function(){R.$$postDigest(function(){F.toggle()})},F.$isShown=R.$isShown=!1;var L,H,B,z,U,V;P.then(function(e){B=e,F.init()}),F.init=function(){A.delay&&angular.isNumber(A.delay)&&(A.delay={show:A.delay,hide:A.delay}),"self"===A.container?U=r:angular.isElement(A.container)?U=A.container:A.container&&(U=h(A.container)),y(),A.target&&(A.target=angular.isElement(A.target)?A.target:h(A.target)),A.show&&R.$$postDigest(function(){"focus"===A.trigger?r[0].focus():F.show()})},F.destroy=function(){b(),_(),R.$destroy()},F.enter=function(){return clearTimeout(L),H="in",A.delay&&A.delay.show?void(L=setTimeout(function(){"in"===H&&F.show()},A.delay.show)):F.show()},F.show=function(){if(A.bsEnabled&&!F.$isShown){R.$emit(A.prefixEvent+".show.before",F);var e,t;A.container?(e=U,t=U[0].lastChild?angular.element(U[0].lastChild):null):(e=null,t=r),z&&_(),V=F.$scope.$new(),z=F.$element=B.link(V,function(e,t){}),z.css({top:"-9999px",left:"-9999px",right:"auto",display:"block",visibility:"hidden"}),A.animation&&z.addClass(A.animation),A.type&&z.addClass(A.prefixClass+"-"+A.type),A.customClass&&z.addClass(A.customClass),t?t.after(z):e.prepend(z),F.$isShown=R.$isShown=!0,g(R),F.$applyPlacement(),angular.version.minor<=2?l.enter(z,e,t,s):l.enter(z,e,t).then(s),g(R),d(function(){z&&z.css({visibility:"visible"}),A.keyboard&&("focus"!==A.trigger&&F.focus(),w())}),A.autoClose&&k()}},F.leave=function(){return clearTimeout(L),H="out",A.delay&&A.delay.hide?void(L=setTimeout(function(){"out"===H&&F.hide()},A.delay.hide)):F.hide()};var W,Y;F.hide=function(e){F.$isShown&&(R.$emit(A.prefixEvent+".hide.before",F),W=e,Y=z,angular.version.minor<=2?l.leave(z,p):l.leave(z).then(p),F.$isShown=R.$isShown=!1,g(R),A.keyboard&&null!==z&&$(),A.autoClose&&null!==z&&x())},F.toggle=function(){F.$isShown?F.leave():F.enter()},F.focus=function(){z[0].focus()},F.setEnabled=function(e){A.bsEnabled=e},F.setViewport=function(e){A.viewport=e},F.$applyPlacement=function(){if(z){var t=A.placement,n=/\s?auto?\s?/i,i=n.test(t);i&&(t=t.replace(n,"")||e.placement),z.addClass(A.placement);var a=C(),r=z.prop("offsetWidth"),o=z.prop("offsetHeight");if(F.$viewport=A.viewport&&h(A.viewport.selector||A.viewport),i){var s=t,l=C(F.$viewport);/bottom/.test(s)&&a.bottom+o>l.bottom?t=s.replace("bottom","top"):/top/.test(s)&&a.top-o<l.top&&(t=s.replace("top","bottom")),/left/.test(s)&&a.left-r<l.left?t=t.replace("left","right"):/right/.test(s)&&a.right+r>l.width&&(t=t.replace("right","left")),z.removeClass(s).addClass(t)}var c=D(t,a,r,o);M(c,t)}},F.$onKeyUp=function(e){27===e.which&&F.$isShown&&(F.hide(),e.stopPropagation())},F.$onFocusKeyUp=function(e){27===e.which&&(r[0].blur(),e.stopPropagation())},F.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),F.$isShown?r[0].blur():r[0].focus()};var G=!1;return F}function g(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function h(e,n){return angular.element((n||t).querySelectorAll(e))}var m="createTouch"in n.document,v=angular.element(n.document);return p}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(e,t,n,i,a){return{restrict:"EAC",scope:!0,link:function(e,t,r,o){var s,l={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","backdropAnimation","type","customClass","id"],function(e){angular.isDefined(r[e])&&(l[e]=r[e])});var c=/^(false|0|)$/i;angular.forEach(["html","container"],function(e){angular.isDefined(r[e])&&c.test(r[e])&&(l[e]=!1)});var u=t.attr("data-target");angular.isDefined(u)&&(c.test(u)?l.target=!1:l.target=u),e.hasOwnProperty("title")||(e.title=""),r.$observe("title",function(t){if(angular.isDefined(t)||!e.hasOwnProperty("title")){var i=e.title;e.title=n.trustAsHtml(t),angular.isDefined(i)&&a(function(){s&&s.$applyPlacement()})}}),r.bsTooltip&&e.$watch(r.bsTooltip,function(t,n){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(n)&&a(function(){s&&s.$applyPlacement()})},!0),r.bsShow&&e.$watch(r.bsShow,function(e,t){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(tooltip),?/i)),e===!0?s.show():s.hide())}),r.bsEnabled&&e.$watch(r.bsEnabled,function(e,t){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|1|,?(tooltip),?/i)),e===!1?s.setEnabled(!1):s.setEnabled(!0))}),r.viewport&&e.$watch(r.viewport,function(e){s&&angular.isDefined(e)&&s.setViewport(e)}),s=i(t,l),e.$on("$destroy",function(){s&&s.destroy(),l=null,s=null})}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",templateUrl:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,secondStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function(t,n,i,a,r,o,s){function l(t,n,i){function a(e){var t=6e4*g.minuteStep;return new Date(Math.floor(e.getTime()/t)*t)}function l(e,n){var i=e+n;if(t[0].createTextRange){var a=t[0].createTextRange();a.collapse(!0),a.moveStart("character",e),a.moveEnd("character",i),a.select()}else t[0].setSelectionRange?t[0].setSelectionRange(e,i):angular.isUndefined(t[0].selectionStart)&&(t[0].selectionStart=e,t[0].selectionEnd=i)}function d(){t[0].focus()}var f=o(t,angular.extend({},e,i)),p=i.scope,g=f.$options,h=f.$scope,m=g.lang,v=function(e,t,n){return r.formatDate(e,t,m,n)},y=0,b=g.roundDisplay?a(new Date):new Date,w=n.$dateValue||b,$={hour:w.getHours(),meridian:w.getHours()<12,minute:w.getMinutes(),second:w.getSeconds(),millisecond:w.getMilliseconds()},k=r.getDatetimeFormat(g.timeFormat,m),x=r.hoursFormat(k),S=r.timeSeparator(k),C=r.minutesFormat(k),D=r.secondsFormat(k),M=r.showSeconds(k),T=r.showAM(k);h.$iconUp=g.iconUp,h.$iconDown=g.iconDown,h.$select=function(e,t){f.select(e,t)},h.$moveIndex=function(e,t){f.$moveIndex(e,t)},h.$switchMeridian=function(e){f.switchMeridian(e)},f.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())?(f.$date=e,angular.extend($,{hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds(),millisecond:e.getMilliseconds()}),f.$build()):f.$isBuilt||f.$build()},f.select=function(e,t,i){n.$dateValue&&!isNaN(n.$dateValue.getTime())||(n.$dateValue=new Date(1970,0,1)),angular.isDate(e)||(e=new Date(e)),0===t?n.$dateValue.setHours(e.getHours()):1===t?n.$dateValue.setMinutes(e.getMinutes()):2===t&&n.$dateValue.setSeconds(e.getSeconds()),n.$setViewValue(angular.copy(n.$dateValue)),n.$render(),g.autoclose&&!i&&s(function(){f.hide(!0)})},f.switchMeridian=function(e){if(n.$dateValue&&!isNaN(n.$dateValue.getTime())){var t=(e||n.$dateValue).getHours();n.$dateValue.setHours(12>t?t+12:t-12),n.$setViewValue(angular.copy(n.$dateValue)),n.$render()}},f.$build=function(){var e,t,n=h.midIndex=parseInt(g.length/2,10),i=[];for(e=0;e<g.length;e++)t=new Date(1970,0,1,$.hour-(n-e)*g.hourStep),i.push({date:t,label:v(t,x),selected:f.$date&&f.$isSelected(t,0),disabled:f.$isDisabled(t,0)});var a,r=[];for(e=0;e<g.length;e++)a=new Date(1970,0,1,0,$.minute-(n-e)*g.minuteStep),r.push({date:a,label:v(a,C),selected:f.$date&&f.$isSelected(a,1),disabled:f.$isDisabled(a,1)});var o,s=[];for(e=0;e<g.length;e++)o=new Date(1970,0,1,0,0,$.second-(n-e)*g.secondStep),s.push({date:o,label:v(o,D),selected:f.$date&&f.$isSelected(o,2),disabled:f.$isDisabled(o,2)});var l=[];for(e=0;e<g.length;e++)M?l.push([i[e],r[e],s[e]]):l.push([i[e],r[e]]);h.rows=l,h.showSeconds=M,h.showAM=T,h.isAM=(f.$date||i[n].date).getHours()<12,h.timeSeparator=S,f.$isBuilt=!0},f.$isSelected=function(e,t){return f.$date?0===t?e.getHours()===f.$date.getHours():1===t?e.getMinutes()===f.$date.getMinutes():2===t?e.getSeconds()===f.$date.getSeconds():void 0:!1},f.$isDisabled=function(e,t){var n;return 0===t?n=e.getTime()+6e4*$.minute+1e3*$.second:1===t?n=e.getTime()+36e5*$.hour+1e3*$.second:2===t&&(n=e.getTime()+36e5*$.hour+6e4*$.minute),n<1*g.minTime||n>1*g.maxTime},h.$arrowAction=function(e,t){"picker"===g.arrowBehavior?f.$setTimeByStep(e,t):f.$moveIndex(e,t)},f.$setTimeByStep=function(e,t){var n=new Date(f.$date||w),i=n.getHours(),a=n.getMinutes(),r=n.getSeconds();0===t?n.setHours(i-parseInt(g.hourStep,10)*e):1===t?n.setMinutes(a-parseInt(g.minuteStep,10)*e):2===t&&n.setSeconds(r-parseInt(g.secondStep,10)*e),f.select(n,t,!0)},f.$moveIndex=function(e,t){var n;0===t?(n=new Date(1970,0,1,$.hour+e*g.length,$.minute,$.second),angular.extend($,{hour:n.getHours()})):1===t?(n=new Date(1970,0,1,$.hour,$.minute+e*g.length*g.minuteStep,$.second),angular.extend($,{minute:n.getMinutes()})):2===t&&(n=new Date(1970,0,1,$.hour,$.minute,$.second+e*g.length*g.secondStep),angular.extend($,{second:n.getSeconds()})),f.$build()},f.$onMouseDown=function(e){if("input"!==e.target.nodeName.toLowerCase()&&e.preventDefault(),e.stopPropagation(),u){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},f.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void f.hide(!0);var t=new Date(f.$date),n=t.getHours(),i=v(t,x).length,a=t.getMinutes(),r=v(t,C).length,o=t.getSeconds(),s=v(t,D).length,c=1,u=/(37|39)/.test(e.keyCode),d=2+1*M+1*T;u&&(37===e.keyCode?y=1>y?d-1:y-1:39===e.keyCode&&(y=d-1>y?y+1:0));var h=[0,i],m=0;38===e.keyCode&&(m=-1),40===e.keyCode&&(m=1);var b=2===y&&M,w=2===y&&!M||3===y&&M;0===y?(t.setHours(n+m*parseInt(g.hourStep,10)),i=v(t,x).length,h=[0,i]):1===y?(t.setMinutes(a+m*parseInt(g.minuteStep,10)),r=v(t,C).length,h=[i+c,r]):b?(t.setSeconds(o+m*parseInt(g.secondStep,10)),s=v(t,D).length,h=[i+c+r+c,s]):w&&(u||f.switchMeridian(),h=[i+c+r+c+(s+c)*M,2]),f.select(t,y,!0),l(h[0],h[1]),p.$digest()}};var E=f.init;f.init=function(){return c&&g.useNative?(t.prop("type","time"),void t.css("-webkit-appearance","textfield")):(u&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",d)),void E())};var _=f.destroy;f.destroy=function(){c&&g.useNative&&t.off("click",d),_()};var F=f.show;f.show=function(){!u&&t.attr("readonly")||t.attr("disabled")||(F(),s(function(){f.$element&&f.$element.on(u?"touchstart":"mousedown",f.$onMouseDown),g.keyboard&&t&&t.on("keydown",f.$onKeyDown)},0,!1))};var A=f.hide;return f.hide=function(e){f.$isShown&&(f.$element&&f.$element.off(u?"touchstart":"mousedown",f.$onMouseDown),g.keyboard&&t&&t.off("keydown",f.$onKeyDown),A(e))},f}var c=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),u="createTouch"in t.document&&c;return e.lang||(e.lang=r.getDefaultLocale()),l.defaults=e,l}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function(e,t,i,a,r,o){var s=o.defaults,l=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:"EAC",require:"ngModel",link:function(e,t,i,c){function u(e){if(angular.isDate(e)){var t=isNaN(f.minTime)||new Date(e.getTime()).setFullYear(1970,0,1)>=f.minTime,n=isNaN(f.maxTime)||new Date(e.getTime()).setFullYear(1970,0,1)<=f.maxTime,i=t&&n;c.$setValidity("date",i),c.$setValidity("min",t),c.$setValidity("max",n),i&&(c.$dateValue=e)}}function d(){return!c.$dateValue||isNaN(c.$dateValue.getTime())?"":m(c.$dateValue,f.timeFormat)}var f={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","secondStep","length","arrowBehavior","iconUp","iconDown","roundDisplay","id","prefixClass","prefixEvent"],function(e){angular.isDefined(i[e])&&(f[e]=i[e])});var p=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative","roundDisplay"],function(e){angular.isDefined(i[e])&&p.test(i[e])&&(f[e]=!1)}),l&&(f.useNative||s.useNative)&&(f.timeFormat="HH:mm");var g=o(t,c,f);f=g.$options;var h=f.lang,m=function(e,t,n){return a.formatDate(e,t,h,n)};i.bsShow&&e.$watch(i.bsShow,function(e,t){g&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(timepicker),?/i)),e===!0?g.show():g.hide())});var v=r({format:f.timeFormat,lang:h});angular.forEach(["minTime","maxTime"],function(e){angular.isDefined(i[e])&&i.$observe(e,function(t){g.$options[e]=v.getTimeForAttribute(e,t),isNaN(g.$options[e])||g.$build(),u(c.$dateValue)})}),e.$watch(i.ngModel,function(e,t){g.update(c.$dateValue)},!0),c.$parsers.unshift(function(e){var t;if(!e)return c.$setValidity("date",!0),null;var i=angular.isDate(e)?e:v.parse(e,c.$dateValue);return!i||isNaN(i.getTime())?(c.$setValidity("date",!1),n):(u(i),"string"===f.timeType?(t=v.timezoneOffsetAdjust(i,f.timezone,!0),m(t,f.modelTimeFormat||f.timeFormat)):(t=v.timezoneOffsetAdjust(c.$dateValue,f.timezone,!0),"number"===f.timeType?t.getTime():"unix"===f.timeType?t.getTime()/1e3:"iso"===f.timeType?t.toISOString():new Date(t)))}),c.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:"string"===f.timeType?v.parse(e,null,f.modelTimeFormat):"unix"===f.timeType?new Date(1e3*e):new Date(e),c.$dateValue=v.timezoneOffsetAdjust(t,f.timezone),d()}),c.$render=function(){t.val(d())},e.$on("$destroy",function(){g&&g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var e=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},t=this.controller=function(t,n,i){var a=this;a.$options=angular.copy(e),angular.forEach(["animation","navClass","activeClass"],function(e){angular.isDefined(i[e])&&(a.$options[e]=i[e])}),t.$navClass=a.$options.navClass,t.$activeClass=a.$options.activeClass,a.$panes=t.$panes=[],a.$activePaneChangeListeners=a.$viewChangeListeners=[],a.$push=function(e){angular.isUndefined(a.$panes.$active)&&t.$setActive(e.name||0),a.$panes.push(e)},a.$remove=function(e){var t,n=a.$panes.indexOf(e),i=a.$panes.$active;t=angular.isString(i)?a.$panes.map(function(e){return e.name}).indexOf(i):a.$panes.$active,a.$panes.splice(n,1),t>n?t--:n===t&&t===a.$panes.length&&t--,t>=0&&t<a.$panes.length?a.$setActive(a.$panes[t].name||t):a.$setActive()},a.$setActive=t.$setActive=function(e){a.$panes.$active=e,a.$activePaneChangeListeners.forEach(function(e){e()})},a.$isActive=t.$isActive=function(e,t){return a.$panes.$active===e.name||a.$panes.$active===t}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsTabs",["$window","$animate","$tab","$parse",function(e,t,n,i){var a=n.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",n.controller],templateUrl:function(e,t){return t.template||a.template},link:function(e,t,n,a){var r=a[0],o=a[1];if(r&&(o.$activePaneChangeListeners.push(function(){r.$setViewValue(o.$panes.$active)}),r.$formatters.push(function(e){return o.$setActive(e),e})),n.bsActivePane){var s=i(n.bsActivePane);o.$activePaneChangeListeners.push(function(){s.assign(e,o.$panes.$active)}),e.$watch(n.bsActivePane,function(e,t){o.$setActive(e)},!0)}}}}]).directive("bsPane",["$window","$animate","$sce",function(e,t,n){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(e,i,a,r){function o(){var n=s.$panes.indexOf(e);t[s.$isActive(e,n)?"addClass":"removeClass"](i,s.$options.activeClass)}var s=r[1];i.addClass("tab-pane"),a.$observe("title",function(t,i){e.title=n.trustAsHtml(t)}),e.name=a.name,s.$options.animation&&i.addClass(s.$options.animation),a.$observe("disabled",function(t,n){e.disabled=e.$eval(t)}),s.$push(e),e.$on("$destroy",function(){s.$remove(e)}),s.$activePaneChangeListeners.push(function(){o()}),o()}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var e=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",templateUrl:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$tooltip","$timeout",function(t,n,i,a,r){function o(i,o,s){var c={},u=angular.extend({},e,s);c=a(i,u);var d=c.$scope;d.$matches=[],u.multiple?d.$activeIndex=[]:d.$activeIndex=-1,d.$isMultiple=u.multiple,d.$showAllNoneButtons=u.allNoneButtons&&u.multiple,d.$iconCheckmark=u.iconCheckmark,d.$allText=u.allText,d.$noneText=u.noneText,d.$activate=function(e){d.$$postDigest(function(){c.activate(e)})},d.$select=function(e,t){d.$$postDigest(function(){c.select(e)})},d.$isVisible=function(){return c.$isVisible()},d.$isActive=function(e){return c.$isActive(e)},d.$selectAll=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)||d.$select(e)},d.$selectNone=function(){for(var e=0;e<d.$matches.length;e++)d.$isActive(e)&&d.$select(e)},c.update=function(e){d.$matches=e,c.$updateActiveIndex()},c.activate=function(e){return u.multiple?(c.$isActive(e)?d.$activeIndex.splice(d.$activeIndex.indexOf(e),1):d.$activeIndex.push(e),u.sort&&d.$activeIndex.sort(function(e,t){return e-t})):d.$activeIndex=e,d.$activeIndex},c.select=function(e){var t=d.$matches[e].value;d.$apply(function(){c.activate(e),u.multiple?o.$setViewValue(d.$activeIndex.map(function(e){return angular.isUndefined(d.$matches[e])?null:d.$matches[e].value})):(o.$setViewValue(t),c.hide())}),d.$emit(u.prefixEvent+".select",t,e,c)},c.$updateActiveIndex=function(){u.multiple?angular.isArray(o.$modelValue)?d.$activeIndex=o.$modelValue.map(function(e){return c.$getIndex(e)}):d.$activeIndex=[]:angular.isDefined(o.$modelValue)&&d.$matches.length?d.$activeIndex=c.$getIndex(o.$modelValue):d.$activeIndex=-1},c.$isVisible=function(){return u.minLength&&o?d.$matches.length&&o.$viewValue.length>=u.minLength:d.$matches.length},c.$isActive=function(e){return u.multiple?-1!==d.$activeIndex.indexOf(e):d.$activeIndex===e},c.$getIndex=function(e){var t;for(t=d.$matches.length;t--&&!angular.equals(d.$matches[t].value,e););return t},c.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),l){var t=angular.element(e.target);t.triggerHandler("click")}},c.$onKeyDown=function(e){return/(9|13|38|40)/.test(e.keyCode)?(9!==e.keyCode&&(e.preventDefault(),e.stopPropagation()),u.multiple&&9===e.keyCode?c.hide():u.multiple||13!==e.keyCode&&9!==e.keyCode?void(u.multiple||(38===e.keyCode&&d.$activeIndex>0?d.$activeIndex--:38===e.keyCode&&d.$activeIndex<0?d.$activeIndex=d.$matches.length-1:40===e.keyCode&&d.$activeIndex<d.$matches.length-1?d.$activeIndex++:angular.isUndefined(d.$activeIndex)&&(d.$activeIndex=0),d.$digest())):c.select(d.$activeIndex)):void 0},c.$isIE=function(){var e=t.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0},c.$selectScrollFix=function(e){"UL"===n[0].activeElement.tagName&&(e.preventDefault(),e.stopImmediatePropagation(),e.target.focus())};var f=c.show;c.show=function(){f(),u.multiple&&c.$element.addClass("select-multiple"),r(function(){c.$element.on(l?"touchstart":"mousedown",c.$onMouseDown),u.keyboard&&i.on("keydown",c.$onKeyDown)},0,!1)};var p=c.hide;return c.hide=function(){!u.multiple&&angular.isUndefined(o.$modelValue)&&(d.$activeIndex=-1),c.$element.off(l?"touchstart":"mousedown",c.$onMouseDown),u.keyboard&&i.off("keydown",c.$onKeyDown),p(!0)},c}var s=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),l="createTouch"in t.document&&s;return o.defaults=e,o}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(e,t,n,i,a){var r=i.defaults;return{restrict:"EAC",require:"ngModel",link:function(e,t,n,o){var s={scope:e,placeholder:r.placeholder};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","placeholder","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml","prefixClass","prefixEvent"],function(e){angular.isDefined(n[e])&&(s[e]=n[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container","allNoneButtons","sort"],function(e){angular.isDefined(n[e])&&l.test(n[e])&&(s[e]=!1)});var c=t.attr("data-multiple");if(angular.isDefined(c)&&(l.test(c)?s.multiple=!1:s.multiple=c),"select"===t[0].nodeName.toLowerCase()){var u=t;u.css("display","none"),t=angular.element('<button type="button" class="btn btn-default"></button>'),u.after(t)}var d=a(n.bsOptions),f=i(t,o,s);f.$isIE()&&t[0].addEventListener("blur",f.$selectScrollFix);var p=d.$match[7].replace(/\|.+/,"").trim();e.$watch(p,function(t,n){d.valuesFn(e,o).then(function(e){f.update(e),o.$render()})},!0),e.$watch(n.ngModel,function(e,t){f.$updateActiveIndex(),o.$render()},!0),o.$render=function(){var e,n;s.multiple&&angular.isArray(o.$modelValue)?(e=o.$modelValue.map(function(e){return n=f.$getIndex(e),-1!==n?f.$scope.$matches[n].label:!1}).filter(angular.isDefined),e=e.length>(s.maxLength||r.maxLength)?e.length+" "+(s.maxLengthHtml||r.maxLengthHtml):e.join(", ")):(n=f.$getIndex(o.$modelValue),e=-1!==n?f.$scope.$matches[n].label:!1),t.html((e?e:s.placeholder)+(s.caretHtml?s.caretHtml:r.caretHtml))},s.multiple&&(o.$isEmpty=function(e){return!e||0===e.length}),e.$on("$destroy",function(){f&&f.destroy(),s=null,f=null})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var e=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",templateUrl:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$tooltip",function(t){function n(n,i){var a=angular.extend({},e,i),r=t(n,a);return a.content&&(r.$scope.content=a.content),r}return n}]}).directive("bsPopover",["$window","$sce","$popover",function(e,t,n){var i=e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,a,r){var o,s={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","container","delay","trigger","html","animation","customClass","autoClose","id","prefixClass","prefixEvent"],function(e){angular.isDefined(r[e])&&(s[e]=r[e])});var l=/^(false|0|)$/i;angular.forEach(["html","container","autoClose"],function(e){angular.isDefined(r[e])&&l.test(r[e])&&(s[e]=!1)});var c=a.attr("data-target");angular.isDefined(c)&&(l.test(c)?s.target=!1:s.target=c),angular.forEach(["title","content"],function(n){r[n]&&r.$observe(n,function(a,r){e[n]=t.trustAsHtml(a),angular.isDefined(r)&&i(function(){o&&o.$applyPlacement()})})}),r.bsPopover&&e.$watch(r.bsPopover,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t,angular.isDefined(n)&&i(function(){o&&o.$applyPlacement()})},!0),r.bsShow&&e.$watch(r.bsShow,function(e,t){o&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(popover),?/i)),e===!0?o.show():o.hide())}),r.viewport&&e.$watch(r.viewport,function(e){o&&angular.isDefined(e)&&o.setViewport(e)}),o=n(a,s),e.$on("$destroy",function(){o&&o.destroy(),s=null,o=null})}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var e=this.$$spies={},n=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(i,a,r,o,s,l){function c(e,t){return e[0].nodeName&&e[0].nodeName.toLowerCase()===t.toLowerCase()}function u(a){var u=angular.extend({},n,a);u.element||(u.element=p);var g=c(u.element,"body"),h=g?d:u.element,m=g?"window":u.id;if(e[m])return e[m].$$count++,e[m];var v,y,b,w,$,k,x,S,C={},D=C.$trackedElements=[],M=[];return C.init=function(){this.$$count=1,w=s(this.checkPosition,u.debounce),$=l(this.checkPosition,u.throttle),h.on("click",this.checkPositionWithEventLoop),d.on("resize",w),h.on("scroll",$),k=s(this.checkOffsets,u.debounce),v=r.$on("$viewContentLoaded",k),y=r.$on("$includeContentLoaded",k),k(),m&&(e[m]=C)},C.destroy=function(){this.$$count--,this.$$count>0||(h.off("click",this.checkPositionWithEventLoop),d.off("resize",w),h.off("scroll",$),v(),y(),m&&delete e[m])},C.checkPosition=function(){if(M.length){if(S=(g?i.pageYOffset:h.prop("scrollTop"))||0,x=Math.max(i.innerHeight,f.prop("clientHeight")),S<M[0].offsetTop&&b!==M[0].target)return C.$activateElement(M[0]);for(var e=M.length;e--;)if(!angular.isUndefined(M[e].offsetTop)&&null!==M[e].offsetTop&&b!==M[e].target&&!(S<M[e].offsetTop||M[e+1]&&S>M[e+1].offsetTop))return C.$activateElement(M[e])}},C.checkPositionWithEventLoop=function(){setTimeout(C.checkPosition,1)},C.$activateElement=function(e){if(b){var t=C.$getTrackedElement(b);t&&(t.source.removeClass("active"),c(t.source,"li")&&c(t.source.parent().parent(),"li")&&t.source.parent().parent().removeClass("active"))}b=e.target,e.source.addClass("active"),c(e.source,"li")&&c(e.source.parent().parent(),"li")&&e.source.parent().parent().addClass("active")},C.$getTrackedElement=function(e){return D.filter(function(t){return t.target===e})[0]},C.checkOffsets=function(){angular.forEach(D,function(e){var n=t.querySelector(e.target);e.offsetTop=n?o.offset(n).top:null,u.offset&&null!==e.offsetTop&&(e.offsetTop-=1*u.offset)}),M=D.filter(function(e){return null!==e.offsetTop}).sort(function(e,t){return e.offsetTop-t.offsetTop}),w()},C.trackElement=function(e,t){D.push({target:e,source:t})},C.untrackElement=function(e,t){for(var n,i=D.length;i--;)if(D[i].target===e&&D[i].source===t){n=i;break}D=D.splice(n,1)},C.activate=function(e){D[e].addClass("active")},C.init(),C}var d=angular.element(i),f=angular.element(a.prop("documentElement")),p=angular.element(i.document.body);return u}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(e,t,n,i){return{restrict:"EAC",link:function(e,t,n){var a={scope:e};angular.forEach(["offset","target"],function(e){angular.isDefined(n[e])&&(a[e]=n[e])});var r=i(a);r.trackElement(a.target,t),e.$on("$destroy",function(){r&&(r.untrackElement(a.target,t),r.destroy()),a=null,r=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(e,t,n,i){return{restrict:"A",compile:function(e,t){var n=e[0].querySelectorAll("li > a[href]");angular.forEach(n,function(e){var t=angular.element(e);t.parent().attr("bs-scrollspy","").attr("data-target",t.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var e=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:e}}}).directive("bsNavbar",["$window","$location","$navbar",function(e,t,n){var i=n.defaults;return{restrict:"A",link:function(e,n,a,r){var o=angular.copy(i);angular.forEach(Object.keys(i),function(e){angular.isDefined(a[e])&&(o[e]=a[e])}),e.$watch(function(){return t.path()},function(e,t){var i=n[0].querySelectorAll("li["+o.routeAttr+"]");angular.forEach(i,function(t){var n=angular.element(t),i=n.attr(o.routeAttr).replace("/","\\/");o.strict&&(i="^"+i+"$");var a=new RegExp(i,"i");a.test(e)?n.addClass(o.activeClass):n.removeClass(o.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.core","mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var e=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",customClass:"",prefixClass:"modal",prefixEvent:"modal",placement:"top",templateUrl:"modal/modal.tpl.html",template:"",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$bsCompiler","$animate","$timeout","$sce","dimensions",function(n,i,a,r,o,s,l){function c(t){function n(){D.$emit(S.prefixEvent+".show",x)}function o(){D.$emit(S.prefixEvent+".hide",x),g.removeClass(S.prefixClass+"-open"),S.animation&&g.removeClass(S.prefixClass+"-with-"+S.animation)}function l(){S.backdrop&&(T.on("click",w),_.on("click",w),_.on("wheel",$))}function c(){S.backdrop&&(T.off("click",w),_.off("click",w),_.off("wheel",$))}function y(){S.keyboard&&T.on("keyup",x.$onKeyUp)}function b(){S.keyboard&&T.off("keyup",x.$onKeyUp)}function w(e){e.target===e.currentTarget&&("static"===S.backdrop?x.focus():x.hide())}function $(e){e.preventDefault()}function k(){x.$isShown&&null!==T&&(c(),b()),E&&(E.$destroy(),E=null),T&&(T.remove(),T=x.$element=null)}var x={},S=x.$options=angular.extend({},e,t),C=x.$promise=a.compile(S),D=x.$scope=S.scope&&S.scope.$new()||i.$new();S.element||S.container||(S.container="body"),x.$id=S.id||S.element&&S.element.attr("id")||"",f(["title","content"],function(e){S[e]&&(D[e]=s.trustAsHtml(S[e]))}),D.$hide=function(){D.$$postDigest(function(){x.hide()})},D.$show=function(){D.$$postDigest(function(){x.show()})},D.$toggle=function(){D.$$postDigest(function(){x.toggle()})},x.$isShown=D.$isShown=!1;var M,T,E,_=angular.element('<div class="'+S.prefixClass+'-backdrop"/>');return _.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px"}),C.then(function(e){M=e,x.init()}),x.init=function(){S.show&&D.$$postDigest(function(){x.show()})},x.destroy=function(){k(),_&&(_.remove(),_=null),D.$destroy()},x.show=function(){if(!x.$isShown){var e,t;if(angular.isElement(S.container)?(e=S.container,t=S.container[0].lastChild?angular.element(S.container[0].lastChild):null):S.container?(e=d(S.container),t=e[0]&&e[0].lastChild?angular.element(e[0].lastChild):null):(e=null,t=S.element),T&&k(),E=x.$scope.$new(),T=x.$element=M.link(E,function(e,t){}),S.backdrop&&(T.css({"z-index":m+20*h}),_.css({"z-index":v+20*h}),h++),!D.$emit(S.prefixEvent+".show.before",x).defaultPrevented){T.css({display:"block"}).addClass(S.placement),S.customClass&&T.addClass(S.customClass),S.animation&&(S.backdrop&&_.addClass(S.backdropAnimation),T.addClass(S.animation)),S.backdrop&&r.enter(_,g,null),angular.version.minor<=2?r.enter(T,e,t,n):r.enter(T,e,t).then(n),x.$isShown=D.$isShown=!0,u(D);var i=T[0];p(function(){i.focus()}),g.addClass(S.prefixClass+"-open"),S.animation&&g.addClass(S.prefixClass+"-with-"+S.animation),l(),y()}}},x.hide=function(){x.$isShown&&(S.backdrop&&h--,D.$emit(S.prefixEvent+".hide.before",x).defaultPrevented||(angular.version.minor<=2?r.leave(T,o):r.leave(T).then(o),S.backdrop&&r.leave(_),x.$isShown=D.$isShown=!1,u(D),c(),b()))},x.toggle=function(){x.$isShown?x.hide():x.show()},x.focus=function(){T[0].focus()},x.$onKeyUp=function(e){27===e.which&&x.$isShown&&(x.hide(),e.stopPropagation())},x}function u(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function d(e,n){return angular.element((n||t).querySelectorAll(e))}var f=angular.forEach,p=n.requestAnimationFrame||n.setTimeout,g=angular.element(n.document.body),h=0,m=1050,v=1040;
return c}]}).directive("bsModal",["$window","$sce","$modal",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,i,a,r){var o={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation","backdropAnimation","id","prefixEvent","prefixClass","customClass","modalClass"],function(e){angular.isDefined(a[e])&&(o[e]=a[e])}),o.modalClass&&(o.customClass=o.modalClass);var s=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(e){angular.isDefined(a[e])&&s.test(a[e])&&(o[e]=!1)}),angular.forEach(["title","content"],function(n){a[n]&&a.$observe(n,function(i,a){e[n]=t.trustAsHtml(i)})}),a.bsModal&&e.$watch(a.bsModal,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(o);i.on(a.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),o=null,l=null})}}}]),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,i=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,a=!!n,r=a?function(e){var t=n(e);return function(){i(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return r.supported=a,r}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var e=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(t,n){function i(i,a){function r(e,t){return e.map(function(e,n){var i,a,r={};return r[u]=e,i=c(t,r),a=p(t,r),{label:i,value:a,index:n}})}var o={},s=angular.extend({},e,a);o.$values=[];var l,c,u,d,f,p,g;return o.init=function(){o.$match=l=i.match(s.regexp),c=t(l[2]||l[1]),u=l[4]||l[6],d=l[5],f=t(l[3]||""),p=t(l[2]?l[1]:u),g=t(l[7])},o.valuesFn=function(e,t){return n.when(g(e,t)).then(function(t){return angular.isArray(t)||(t=[]),o.$values=t.length?r(t,e):[],o.$values})},o.displayValue=function(e){var t={};return t[u]=e,c(t)},o.init(),o}return i}]}),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",function(){function t(e){var t=e.ownerDocument,a=e.offsetParent||t;if(i(a,"#document"))return t.documentElement;for(;a&&!i(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||t.documentElement}var n={},i=n.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};return n.css=function(t,n,i){var a;return a=t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n],i===!0?parseFloat(a)||0:a},n.offset=function(t){var n=t.getBoundingClientRect(),i=t.ownerDocument;return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:n.top+(e.pageYOffset||i.documentElement.scrollTop)-(i.documentElement.clientTop||0),left:n.left+(e.pageXOffset||i.documentElement.scrollLeft)-(i.documentElement.clientLeft||0)}},n.setOffset=function(e,t,i){var a,r,o,s,l,c,u,d=n.css(e,"position"),f=angular.element(e),p={};"static"===d&&(e.style.position="relative"),l=n.offset(e),o=n.css(e,"top"),c=n.css(e,"left"),u=("absolute"===d||"fixed"===d)&&(o+c).indexOf("auto")>-1,u?(a=n.position(e),s=a.top,r=a.left):(s=parseFloat(o)||0,r=parseFloat(c)||0),angular.isFunction(t)&&(t=t.call(e,i,l)),null!==t.top&&(p.top=t.top-l.top+s),null!==t.left&&(p.left=t.left-l.left+r),"using"in t?t.using.call(f,p):f.css({top:p.top+"px",left:p.left+"px"})},n.position=function(e){var a,r,o={top:0,left:0};return"fixed"===n.css(e,"position")?r=e.getBoundingClientRect():(a=t(e),r=n.offset(e),i(a,"html")||(o=n.offset(a)),o.top+=n.css(a,"borderTopWidth",!0),o.left+=n.css(a,"borderLeftWidth",!0)),{width:e.offsetWidth,height:e.offsetHeight,top:r.top-o.top-n.css(e,"marginTop",!0),left:r.left-o.left-n.css(e,"marginLeft",!0)}},n.height=function(e,t){var i=e.offsetHeight;return t?i+=n.css(e,"marginTop",!0)+n.css(e,"marginBottom",!0):i-=n.css(e,"paddingTop",!0)+n.css(e,"paddingBottom",!0)+n.css(e,"borderTopWidth",!0)+n.css(e,"borderBottomWidth",!0),i},n.width=function(e,t){var i=e.offsetWidth;return t?i+=n.css(e,"marginLeft",!0)+n.css(e,"marginRight",!0):i-=n.css(e,"paddingLeft",!0)+n.css(e,"paddingRight",!0)+n.css(e,"borderLeftWidth",!0)+n.css(e,"borderRightWidth",!0),i},n}),angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(e){return function(t,n,i){var a=null;return function(){var r=this,o=arguments,s=i&&!a;return a&&e.cancel(a),a=e(function(){a=null,i||t.apply(r,o)},n,!1),s&&t.apply(r,o),a}}}]).factory("throttle",["$timeout",function(e){return function(t,n,i){var a=null;return i||(i={}),function(){var r=this,o=arguments;a||(i.leading!==!1&&t.apply(r,o),a=e(function(){a=null,i.trailing!==!1&&t.apply(r,o)},n,!1))}}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(e){function t(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function n(){}function i(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(e,t){for(var n=e.length,i=t.toString().toLowerCase(),a=0;n>a;a++)if(e[a].toLowerCase()===i)return a;return-1}t.prototype.setMilliseconds=function(e){this.milliseconds=e},t.prototype.setSeconds=function(e){this.seconds=e},t.prototype.setMinutes=function(e){this.minutes=e},t.prototype.setHours=function(e){this.hours=e},t.prototype.getHours=function(){return this.hours},t.prototype.setDate=function(e){this.day=e},t.prototype.setMonth=function(e){this.month=e},t.prototype.setFullYear=function(e){this.year=e},t.prototype.fromDate=function(e){return this.year=e.getFullYear(),this.month=e.getMonth(),this.day=e.getDate(),this.hours=e.getHours(),this.minutes=e.getMinutes(),this.seconds=e.getSeconds(),this.milliseconds=e.getMilliseconds(),this},t.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var r=t.prototype,o=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(e,s){var l=function(l){function c(e){var t=u(e);return g(t)}function u(e){var t=d(e),n=t.replace(/''/g,"\\'"),i=/('(?:\\'|.)*?')/,a=n.split(i),r=Object.keys($),o=[];return angular.forEach(a,function(e){if(f(e))e=p(e);else for(var t=0;t<r.length;t++)e=e.split(r[t]).join("${"+t+"}");o.push(e)}),o.join("")}function d(e){return e.replace(/\\/g,"[\\\\]").replace(/-/g,"[-]").replace(/\./g,"[.]").replace(/\*/g,"[*]").replace(/\+/g,"[+]").replace(/\?/g,"[?]").replace(/\$/g,"[$]").replace(/\^/g,"[^]").replace(/\//g,"[/]").replace(/\\s/g,"[\\s]")}function f(e){return/^'.*'$/.test(e)}function p(e){return e.replace(/^'(.*)'$/,"$1")}function g(e){for(var t=Object.keys($),n=e,i=0;i<t.length;i++)n=n.split("${"+i+"}").join("("+$[t[i]]+")");return new RegExp("^"+n+"$",["i"])}function h(e){var t=u(e);return m(t)}function m(e){for(var t,n,i,a,r=Object.keys($),o=new RegExp("\\${(\\d+)}","g"),s=[];null!==(t=o.exec(e));)n=t[1],i=r[n],a=k[i],s.push(a);return s}var v,y,b=angular.extend({},o,l),w={},$={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:b.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:b.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:b.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:b.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:e.DATETIME_FORMATS.DAY.join("|"),EEE:e.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:b.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:e.DATETIME_FORMATS.MONTH.join("|"),MMM:e.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:b.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:b.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},k={sss:r.setMilliseconds,ss:r.setSeconds,s:r.setSeconds,mm:r.setMinutes,m:r.setMinutes,HH:r.setHours,H:r.setHours,hh:r.setHours,h:r.setHours,EEEE:n,EEE:n,dd:r.setDate,d:r.setDate,a:function(e){var t=this.getHours()%12;return this.setHours(e.match(/pm/i)?t+12:t)},MMMM:function(t){return this.setMonth(a(e.DATETIME_FORMATS.MONTH,t))},MMM:function(t){return this.setMonth(a(e.DATETIME_FORMATS.SHORTMONTH,t))},MM:function(e){return this.setMonth(1*e-1)},M:function(e){return this.setMonth(1*e-1)},yyyy:r.setFullYear,yy:function(e){return this.setFullYear(2e3+1*e)},y:function(e){return 50>=1*e&&2===e.length?this.setFullYear(2e3+1*e):this.setFullYear(1*e)}};return w.init=function(){w.$format=e.DATETIME_FORMATS[b.format]||b.format,v=c(w.$format),y=h(w.$format)},w.isValid=function(e){return angular.isDate(e)?!isNaN(e.getTime()):v.test(e)},w.parse=function(n,i,a,r){a&&(a=e.DATETIME_FORMATS[a]||a),angular.isDate(n)&&(n=s(n,a||w.$format,r));var o=a?c(a):v,l=a?h(a):y,u=o.exec(n);if(!u)return!1;for(var d=i&&!isNaN(i.getTime())?(new t).fromDate(i):(new t).fromDate(new Date(1970,0,1,0)),f=0;f<u.length-1;f++)l[f]&&l[f].call(d,u[f+1]);var p=d.toDate();return parseInt(d.day,10)!==p.getDate()?!1:p},w.getDateForAttribute=function(e,t){var n;if("today"===t){var a=new Date;n=new Date(a.getFullYear(),a.getMonth(),a.getDate()+("maxDate"===e?1:0),0,0,0,"minDate"===e?0:-1)}else n=angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)):i(t)?new Date(parseInt(t,10)):angular.isString(t)&&0===t.length?"minDate"===e?-(1/0):+(1/0):new Date(t);return n},w.getTimeForAttribute=function(e,t){var n;return n="now"===t?(new Date).setFullYear(1970,0,1):angular.isString(t)&&t.match(/^".+"$/)?new Date(t.substr(1,t.length-2)).setFullYear(1970,0,1):i(t)?new Date(parseInt(t,10)).setFullYear(1970,0,1):angular.isString(t)&&0===t.length?"minTime"===e?-(1/0):+(1/0):w.parse(t,new Date(1970,0,1,0))},w.daylightSavingAdjust=function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},w.timezoneOffsetAdjust=function(e,t,n){return e?(t&&"UTC"===t&&(e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+(n?-1:1)*e.getTimezoneOffset())),e):null},w.init(),w};return l}]}]),angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function(e,t){function n(e){return/(h+)([:\.])?(m+)([:\.])?(s*)[ ]?(a?)/i.exec(e).slice(1)}this.getDefaultLocale=function(){return e.id},this.getDatetimeFormat=function(t,n){return e.DATETIME_FORMATS[t]||t},this.weekdaysShort=function(t){return e.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(e){return n(e)[0]},this.minutesFormat=function(e){return n(e)[2]},this.secondsFormat=function(e){return n(e)[4]},this.timeSeparator=function(e){return n(e)[1]},this.showSeconds=function(e){return!!n(e)[4]},this.showAM=function(e){return!!n(e)[5]},this.formatDate=function(e,n,i,a){return t(e,n,a)}}]),angular.module("mgcrea.ngStrap.core",[]).service("$bsCompiler",i),angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var e=this.defaults={animation:"am-fade",prefixClass:"dropdown",prefixEvent:"dropdown",placement:"bottom-left",templateUrl:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(t,n,i,a){function r(t,r){function l(e){return e.target!==t[0]?e.target!==t[0]&&c.hide():void 0}var c={},u=angular.extend({},e,r);c.$scope=u.scope&&u.scope.$new()||n.$new(),c=i(t,u);var d=t.parent();c.$onKeyDown=function(e){if(/(38|40)/.test(e.keyCode)){e.preventDefault(),e.stopPropagation();var t=angular.element(c.$element[0].querySelectorAll("li:not(.divider) a"));if(t.length){var n;angular.forEach(t,function(e,t){s&&s.call(e,":focus")&&(n=t)}),38===e.keyCode&&n>0?n--:40===e.keyCode&&n<t.length-1?n++:angular.isUndefined(n)&&(n=0),t.eq(n)[0].focus()}}};var f=c.show;c.show=function(){f(),a(function(){u.keyboard&&c.$element&&c.$element.on("keydown",c.$onKeyDown),o.on("click",l)},0,!1),d.hasClass("dropdown")&&d.addClass("open")};var p=c.hide;c.hide=function(){c.$isShown&&(u.keyboard&&c.$element&&c.$element.off("keydown",c.$onKeyDown),o.off("click",l),d.hasClass("dropdown")&&d.removeClass("open"),p())};var g=c.destroy;return c.destroy=function(){o.off("click",l),g()},c}var o=angular.element(t.document.body),s=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return r}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(e,t,i){return{restrict:"EAC",scope:!0,compile:function(e,t){if(!t.bsDropdown){for(var a=e[0].nextSibling;a&&1!==a.nodeType;)a=a.nextSibling;a&&a.classList.contains("dropdown-menu")&&(t.template=a.outerHTML,t.templateUrl=n,a.parentNode.removeChild(a))}return function(e,n,a){var r={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","keyboard","html","animation","id","autoClose"],function(e){angular.isDefined(t[e])&&(r[e]=t[e])});var o=/^(false|0|)$/i;angular.forEach(["html","container"],function(e){angular.isDefined(a[e])&&o.test(a[e])&&(r[e]=!1)}),a.bsDropdown&&e.$watch(a.bsDropdown,function(t,n){e.content=t},!0);var s=i(n,r);a.bsShow&&e.$watch(a.bsShow,function(e,t){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(dropdown),?/i)),e===!0?s.show():s.hide())}),e.$on("$destroy",function(){s&&s.destroy(),r=null,s=null})}}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var e=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",templateUrl:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function(t,n,i,a,r,o,s,l){function c(t,n,i){function a(e){e.selected=c.$isSelected(e.date)}function r(){t[0].focus()}var c=s(t,angular.extend({},e,i)),f=i.scope,p=c.$options,g=c.$scope;p.startView&&(p.startView-=p.minView);var h=o(c);c.$views=h.views;var m=h.viewDate;g.$mode=p.startView,g.$iconLeft=p.iconLeft,g.$iconRight=p.iconRight;var v=c.$views[g.$mode];g.$select=function(e){c.select(e)},g.$selectPane=function(e){c.$selectPane(e)},g.$toggleMode=function(){c.setMode((g.$mode+1)%c.$views.length)},c.update=function(e){angular.isDate(e)&&!isNaN(e.getTime())&&(c.$date=e,v.update.call(v,e)),c.$build(!0)},c.updateDisabledDates=function(e){p.disabledDateRanges=e;for(var t=0,n=g.rows.length;n>t;t++)angular.forEach(g.rows[t],c.$setDisabledEl)},c.select=function(e,t){angular.isDate(n.$dateValue)||(n.$dateValue=new Date(e)),!g.$mode||t?(n.$setViewValue(angular.copy(e)),n.$render(),p.autoclose&&!t&&l(function(){c.hide(!0)})):(angular.extend(m,{year:e.getFullYear(),month:e.getMonth(),date:e.getDate()}),c.setMode(g.$mode-1),c.$build())},c.setMode=function(e){g.$mode=e,v=c.$views[g.$mode],c.$build()},c.$build=function(e){e===!0&&v.built||(e!==!1||v.built)&&v.build.call(v)},c.$updateSelected=function(){for(var e=0,t=g.rows.length;t>e;e++)angular.forEach(g.rows[e],a)},c.$isSelected=function(e){return v.isSelected(e)},c.$setDisabledEl=function(e){e.disabled=v.isDisabled(e.date)},c.$selectPane=function(e){var t=v.steps,n=new Date(Date.UTC(m.year+(t.year||0)*e,m.month+(t.month||0)*e,1));angular.extend(m,{year:n.getUTCFullYear(),month:n.getUTCMonth(),date:n.getUTCDate()}),c.$build()},c.$onMouseDown=function(e){if(e.preventDefault(),e.stopPropagation(),d){var t=angular.element(e.target);"button"!==t[0].nodeName.toLowerCase()&&(t=t.parent()),t.triggerHandler("click")}},c.$onKeyDown=function(e){if(/(38|37|39|40|13)/.test(e.keyCode)&&!e.shiftKey&&!e.altKey){if(e.preventDefault(),e.stopPropagation(),13===e.keyCode)return void(g.$mode?g.$apply(function(){c.setMode(g.$mode-1)}):c.hide(!0));v.onKeyDown(e),f.$digest()}};var y=c.init;c.init=function(){return u&&p.useNative?(t.prop("type","date"),void t.css("-webkit-appearance","textfield")):(d&&(t.prop("type","text"),t.attr("readonly","true"),t.on("click",r)),void y())};var b=c.destroy;c.destroy=function(){u&&p.useNative&&t.off("click",r),b()};var w=c.show;c.show=function(){!d&&t.attr("readonly")||t.attr("disabled")||(w(),l(function(){c.$isShown&&(c.$element.on(d?"touchstart":"mousedown",c.$onMouseDown),p.keyboard&&t.on("keydown",c.$onKeyDown))},0,!1))};var $=c.hide;return c.hide=function(e){c.$isShown&&(c.$element.off(d?"touchstart":"mousedown",c.$onMouseDown),p.keyboard&&t.off("keydown",c.$onKeyDown),$(e))},c}var u=/(ip[ao]d|iphone|android)/gi.test(t.navigator.userAgent),d="createTouch"in t.document&&u;return e.lang||(e.lang=r.getDefaultLocale()),c.defaults=e,c}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function(e,t,n,i,a,r){var o=/(ip[ao]d|iphone|android)/gi.test(e.navigator.userAgent);return{restrict:"EAC",require:"ngModel",link:function(e,t,n,s){function l(e){return e&&e.length?e:null}function c(e){if(angular.isDate(e)){var t=isNaN(p.$options.minDate)||e.getTime()>=p.$options.minDate,n=isNaN(p.$options.maxDate)||e.getTime()<=p.$options.maxDate,i=t&&n;s.$setValidity("date",i),s.$setValidity("min",t),s.$setValidity("max",n),i&&(s.$dateValue=e)}}function u(){return!s.$dateValue||isNaN(s.$dateValue.getTime())?"":h(s.$dateValue,d.dateFormat)}var d={scope:e};angular.forEach(["template","templateUrl","controller","controllerAs","placement","container","delay","trigger","html","animation","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id","prefixClass","prefixEvent"],function(e){angular.isDefined(n[e])&&(d[e]=n[e])});var f=/^(false|0|)$/i;angular.forEach(["html","container","autoclose","useNative"],function(e){angular.isDefined(n[e])&&f.test(n[e])&&(d[e]=!1)});var p=r(t,s,d);d=p.$options,o&&d.useNative&&(d.dateFormat="yyyy-MM-dd");var g=d.lang,h=function(e,t){return i.formatDate(e,t,g)},m=a({format:d.dateFormat,lang:g,strict:d.strictFormat});n.bsShow&&e.$watch(n.bsShow,function(e,t){p&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(datepicker),?/i)),e===!0?p.show():p.hide())}),angular.forEach(["minDate","maxDate"],function(e){angular.isDefined(n[e])&&n.$observe(e,function(t){p.$options[e]=m.getDateForAttribute(e,t),isNaN(p.$options[e])||p.$build(!1),c(s.$dateValue)})}),angular.isDefined(n.dateFormat)&&n.$observe("dateFormat",function(e){p.$options.dateFormat=e}),e.$watch(n.ngModel,function(e,t){p.update(s.$dateValue)},!0),angular.isDefined(n.disabledDates)&&e.$watch(n.disabledDates,function(e,t){e=l(e),t=l(t),e&&p.updateDisabledDates(e)}),s.$parsers.unshift(function(e){var t;if(!e)return s.$setValidity("date",!0),null;var n=m.parse(e,s.$dateValue);return!n||isNaN(n.getTime())?void s.$setValidity("date",!1):(c(n),"string"===d.dateType?(t=m.timezoneOffsetAdjust(n,d.timezone,!0),h(t,d.modelDateFormat||d.dateFormat)):(t=m.timezoneOffsetAdjust(s.$dateValue,d.timezone,!0),"number"===d.dateType?t.getTime():"unix"===d.dateType?t.getTime()/1e3:"iso"===d.dateType?t.toISOString():new Date(t)))}),s.$formatters.push(function(e){var t;return t=angular.isUndefined(e)||null===e?NaN:angular.isDate(e)?e:"string"===d.dateType?m.parse(e,null,d.modelDateFormat):"unix"===d.dateType?new Date(1e3*e):new Date(e),s.$dateValue=m.timezoneOffsetAdjust(t,d.timezone),u()}),s.$render=function(){t.val(u())},e.$on("$destroy",function(){p&&p.destroy(),d=null,p=null})}}}]).provider("datepickerViews",function(){function e(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n}function t(e,t){return(e%t+t)%t}this.$get=["$dateFormatter","$dateParser","$sce",function(n,i,a){return function(r){var o=r.$scope,s=r.$options,l=s.lang,c=function(e,t){return n.formatDate(e,t,l)},u=i({format:s.dateFormat,lang:l,strict:s.strictFormat}),d=n.weekdaysShort(l),f=d.slice(s.startWeek).concat(d.slice(0,s.startWeek)),p=a.trustAsHtml('<th class="dow text-center">'+f.join('</th><th class="dow text-center">')+"</th>"),g=r.$date||(s.startDate?u.getDateForAttribute("startDate",s.startDate):new Date),h={year:g.getFullYear(),month:g.getMonth(),date:g.getDate()},m=[{format:s.dayFormat,split:7,steps:{month:1},update:function(e,t){!this.built||t||e.getFullYear()!==h.year||e.getMonth()!==h.month?(angular.extend(h,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build()):e.getDate()===h.date&&1!==e.getDate()||(h.date=r.$date.getDate(),r.$updateSelected())},build:function(){var n=new Date(h.year,h.month,1),i=n.getTimezoneOffset(),a=new Date(+n-864e5*t(n.getDay()-s.startWeek,7)),l=a.getTimezoneOffset(),d=u.timezoneOffsetAdjust(new Date,s.timezone).toDateString();l!==i&&(a=new Date(+a+6e4*(l-i)));for(var f,g=[],m=0;42>m;m++)f=u.daylightSavingAdjust(new Date(a.getFullYear(),a.getMonth(),a.getDate()+m)),g.push({date:f,isToday:f.toDateString()===d,label:c(f,this.format),selected:r.$date&&this.isSelected(f),muted:f.getMonth()!==h.month,disabled:this.isDisabled(f)});o.title=c(n,s.monthTitleFormat),o.showLabels=!0,o.labels=p,o.rows=e(g,this.split),this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()&&e.getMonth()===r.$date.getMonth()&&e.getDate()===r.$date.getDate()},isDisabled:function(e){var t=e.getTime();if(t<s.minDate||t>s.maxDate)return!0;if(-1!==s.daysOfWeekDisabled.indexOf(e.getDay()))return!0;if(s.disabledDateRanges)for(var n=0;n<s.disabledDateRanges.length;n++)if(t>=s.disabledDateRanges[n].start&&t<=s.disabledDateRanges[n].end)return!0;return!1},onKeyDown:function(e){if(r.$date){var t,n=r.$date.getTime();37===e.keyCode?t=new Date(n-864e5):38===e.keyCode?t=new Date(n-6048e5):39===e.keyCode?t=new Date(n+864e5):40===e.keyCode&&(t=new Date(n+6048e5)),this.isDisabled(t)||r.select(t,!0)}}},{name:"month",format:s.monthFormat,split:4,steps:{year:1},update:function(e,t){this.built&&e.getFullYear()===h.year?e.getMonth()!==h.month&&(angular.extend(h,{month:r.$date.getMonth(),date:r.$date.getDate()}),r.$updateSelected()):(angular.extend(h,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build())},build:function(){for(var t,n=[],i=0;12>i;i++)t=new Date(h.year,i,1),n.push({date:t,label:c(t,this.format),selected:r.$isSelected(t),disabled:this.isDisabled(t)});o.title=c(t,s.yearTitleFormat),o.showLabels=!1,o.rows=e(n,this.split),this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()&&e.getMonth()===r.$date.getMonth()},isDisabled:function(e){var t=+new Date(e.getFullYear(),e.getMonth()+1,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){if(r.$date){var t=r.$date.getMonth(),n=new Date(r.$date);37===e.keyCode?n.setMonth(t-1):38===e.keyCode?n.setMonth(t-4):39===e.keyCode?n.setMonth(t+1):40===e.keyCode&&n.setMonth(t+4),this.isDisabled(n)||r.select(n,!0)}}},{name:"year",format:s.yearFormat,split:4,steps:{year:12},update:function(e,t){!this.built||t||parseInt(e.getFullYear()/20,10)!==parseInt(h.year/20,10)?(angular.extend(h,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$build()):e.getFullYear()!==h.year&&(angular.extend(h,{year:r.$date.getFullYear(),month:r.$date.getMonth(),date:r.$date.getDate()}),r.$updateSelected())},build:function(){for(var t,n=h.year-h.year%(3*this.split),i=[],a=0;12>a;a++)t=new Date(n+a,0,1),i.push({date:t,label:c(t,this.format),selected:r.$isSelected(t),disabled:this.isDisabled(t)});o.title=i[0].label+"-"+i[i.length-1].label,o.showLabels=!1,o.rows=e(i,this.split),this.built=!0},isSelected:function(e){return r.$date&&e.getFullYear()===r.$date.getFullYear()},isDisabled:function(e){var t=+new Date(e.getFullYear()+1,0,0);return t<s.minDate||e.getTime()>s.maxDate},onKeyDown:function(e){if(r.$date){var t=r.$date.getFullYear(),n=new Date(r.$date);37===e.keyCode?n.setYear(t-1):38===e.keyCode?n.setYear(t-4):39===e.keyCode?n.setYear(t+1):40===e.keyCode&&n.setYear(t+4),this.isDisabled(n)||r.select(n,!0)}}}];return{views:s.minView?Array.prototype.slice.call(m,s.minView):m,viewDate:h}}}]}),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var e=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},t=this.controller=function(t,n,i){function a(e){for(var t=l.$targets.$active,n=0;n<t.length;n++)e<t[n]&&(t[n]=t[n]-1),t[n]===l.$targets.length&&(t[n]=l.$targets.length-1)}function r(e){var t=l.$targets.$active;return-1!==t.indexOf(e)}function o(e){var t=l.$targets.$active.indexOf(e);-1!==t&&l.$targets.$active.splice(t,1)}function s(e){l.$options.allowMultiple||l.$targets.$active.splice(0,1),-1===l.$targets.$active.indexOf(e)&&l.$targets.$active.push(e)}var l=this;l.$options=angular.copy(e),angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(e){angular.isDefined(i[e])&&(l.$options[e]=i[e])});var c=/^(false|0|)$/i;angular.forEach(["disallowToggle","startCollapsed","allowMultiple"],function(e){angular.isDefined(i[e])&&c.test(i[e])&&(l.$options[e]=!1)}),l.$toggles=[],l.$targets=[],l.$viewChangeListeners=[],l.$registerToggle=function(e){l.$toggles.push(e)},l.$registerTarget=function(e){l.$targets.push(e)},l.$unregisterToggle=function(e){var t=l.$toggles.indexOf(e);l.$toggles.splice(t,1)},l.$unregisterTarget=function(e){var t=l.$targets.indexOf(e);l.$targets.splice(t,1),l.$options.allowMultiple&&o(e),a(t),l.$viewChangeListeners.forEach(function(e){e()})},l.$targets.$active=l.$options.startCollapsed?[]:[0],l.$setActive=t.$setActive=function(e){angular.isArray(e)?l.$targets.$active=e:!l.$options.disallowToggle&&r(e)?o(e):s(e),l.$viewChangeListeners.forEach(function(e){e()})},l.$activeIndexes=function(){return l.$options.allowMultiple?l.$targets.$active:1===l.$targets.$active.length?l.$targets.$active[0]:-1}};this.$get=function(){var n={};return n.defaults=e,n.controller=t,n}}).directive("bsCollapse",["$window","$animate","$collapse",function(e,t,n){return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",n.controller],link:function(e,t,n,i){var a=i[0],r=i[1];a&&(r.$viewChangeListeners.push(function(){a.$setViewValue(r.$activeIndexes())}),a.$formatters.push(function(e){if(angular.isArray(e))r.$setActive(e);else{var t=r.$activeIndexes();angular.isArray(t)?-1===t.indexOf(1*e)&&r.$setActive(1*e):t!==1*e&&r.$setActive(1*e)}return e}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(e,t,n,i){var a=i[1];t.attr("data-toggle","collapse"),a.$registerToggle(t),e.$on("$destroy",function(){a.$unregisterToggle(t)}),t.on("click",function(){if(!n.disabled){var i=n.bsCollapseToggle&&"bs-collapse-toggle"!==n.bsCollapseToggle?n.bsCollapseToggle:a.$toggles.indexOf(t);a.$setActive(1*i),e.$apply()}})}}}).directive("bsCollapseTarget",["$animate",function(e){return{require:["^?ngModel","^bsCollapse"],link:function(t,n,i,a){function r(){var t=o.$targets.indexOf(n),i=o.$activeIndexes(),a="removeClass";angular.isArray(i)?-1!==i.indexOf(t)&&(a="addClass"):t===i&&(a="addClass"),e[a](n,o.$options.activeClass)}var o=a[1];n.addClass("collapse"),o.$options.animation&&n.addClass(o.$options.animation),o.$registerTarget(n),t.$on("$destroy",function(){o.$unregisterTarget(n)}),o.$viewChangeListeners.push(function(){r()}),r()}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var e=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:e}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="checkbox"]');angular.forEach(n,function(e){var n=angular.element(e);n.attr("bs-checkbox",""),n.attr("ng-model",t.ngModel+"."+n.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(e,t){var n=e.defaults,i=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,a,r,o){var s=n,l="INPUT"===a[0].nodeName,c=l?a.parent():a,u=angular.isDefined(r.trueValue)?r.trueValue:!0;i.test(r.trueValue)&&(u=e.$eval(r.trueValue));var d=angular.isDefined(r.falseValue)?r.falseValue:!1;i.test(r.falseValue)&&(d=e.$eval(r.falseValue));var f="boolean"!=typeof u||"boolean"!=typeof d;f&&(o.$parsers.push(function(e){return e?u:d}),o.$formatters.push(function(e){return angular.equals(e,u)}),e.$watch(r.ngModel,function(e,t){o.$render()})),o.$render=function(){var e=angular.equals(o.$modelValue,u);t(function(){l&&(a[0].checked=e),c.toggleClass(s.activeClass,e)})},a.bind(s.toggleEvent,function(){e.$apply(function(){l||o.$setViewValue(!c.hasClass("active")),f||o.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(e,t){e.attr("data-toggle","buttons"),e.removeAttr("ng-model");var n=e[0].querySelectorAll('input[type="radio"]');angular.forEach(n,function(e){angular.element(e).attr("bs-radio",""),angular.element(e).attr("ng-model",t.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(e,t){var n=e.defaults,i=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(e,a,r,o){var s,l=n,c="INPUT"===a[0].nodeName,u=c?a.parent():a;r.$observe("value",function(t){s=i.test(t)?e.$eval(t):t,o.$render()}),o.$render=function(){var e=angular.equals(o.$modelValue,s);t(function(){c&&(a[0].checked=e),u.toggleClass(l.activeClass,e)})},a.bind(l.toggleEvent,function(){e.$apply(function(){o.$setViewValue(s),o.$render()})})}}}]),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var e=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",prefixEvent:"aside",placement:"right",templateUrl:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(t){function n(n){var i={},a=angular.extend({},e,n);return i=t(a)}return n}]}).directive("bsAside",["$window","$sce","$aside",function(e,t,n){return{restrict:"EAC",scope:!0,link:function(e,i,a,r){var o={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(e){angular.isDefined(a[e])&&(o[e]=a[e])});var s=/^(false|0|)$/i;angular.forEach(["backdrop","keyboard","html","container"],function(e){angular.isDefined(a[e])&&s.test(a[e])&&(o[e]=!1)}),angular.forEach(["title","content"],function(n){a[n]&&a.$observe(n,function(i,a){e[n]=t.trustAsHtml(i)})}),a.bsAside&&e.$watch(a.bsAside,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(o);i.on(a.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),o=null,l=null})}}}]),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var e=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,templateUrl:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(t,n){function i(i){var a={},r=angular.extend({},e,i);a=t(r),a.$scope.dismissable=!!r.dismissable,r.type&&(a.$scope.type=r.type);var o=a.show;return r.duration&&(a.show=function(){o(),n(function(){a.hide()},1e3*r.duration)}),a}return i}]}).directive("bsAlert",["$window","$sce","$alert",function(e,t,n){
return{restrict:"EAC",scope:!0,link:function(e,i,a,r){var o={scope:e,element:i,show:!1};angular.forEach(["template","templateUrl","controller","controllerAs","placement","keyboard","html","container","animation","duration","dismissable"],function(e){angular.isDefined(a[e])&&(o[e]=a[e])});var s=/^(false|0|)$/i;angular.forEach(["keyboard","html","container","dismissable"],function(e){angular.isDefined(a[e])&&s.test(a[e])&&(o[e]=!1)}),e.hasOwnProperty("title")||(e.title=""),angular.forEach(["title","content","type"],function(n){a[n]&&a.$observe(n,function(i,a){e[n]=t.trustAsHtml(i)})}),a.bsAlert&&e.$watch(a.bsAlert,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t},!0);var l=n(o);i.on(a.trigger||"click",l.toggle),e.$on("$destroy",function(){l&&l.destroy(),o=null,l=null})}}}]),angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var e=this.defaults={offsetTop:"auto",inlineStyles:!0};this.$get=["$window","debounce","dimensions",function(t,n,i){function a(a,s){function l(e,t,n){var i=c(),a=u();return y>=i?"top":null!==e&&i+e<=t.top?"middle":null!==b&&t.top+n+m>=a-b?"bottom":"middle"}function c(){return p[0]===t?t.pageYOffset:p[0].scrollTop}function u(){return p[0]===t?t.document.body.scrollHeight:p[0].scrollHeight}var d={},f=angular.extend({},e,s),p=f.target,g="affix affix-top affix-bottom",h=!1,m=0,v=0,y=0,b=0,w=null,$=null,k=a.parent();if(f.offsetParent)if(f.offsetParent.match(/^\d+$/))for(var x=0;x<1*f.offsetParent-1;x++)k=k.parent();else k=angular.element(f.offsetParent);return d.init=function(){this.$parseOffsets(),v=i.offset(a[0]).top+m,h=!a[0].style.width,p.on("scroll",this.checkPosition),p.on("click",this.checkPositionWithEventLoop),o.on("resize",this.$debouncedOnResize),this.checkPosition(),this.checkPositionWithEventLoop()},d.destroy=function(){p.off("scroll",this.checkPosition),p.off("click",this.checkPositionWithEventLoop),o.off("resize",this.$debouncedOnResize)},d.checkPositionWithEventLoop=function(){setTimeout(d.checkPosition,1)},d.checkPosition=function(){var e=c(),t=i.offset(a[0]),n=i.height(a[0]),o=l($,t,n);w!==o&&(w=o,"top"===o?($=null,h&&a.css("width",""),f.inlineStyles&&(a.css("position",f.offsetParent?"":"relative"),a.css("top",""))):"bottom"===o?($=f.offsetUnpin?-(1*f.offsetUnpin):t.top-e,h&&a.css("width",""),f.inlineStyles&&(a.css("position",f.offsetParent?"":"relative"),a.css("top",f.offsetParent?"":r[0].offsetHeight-b-n-v+"px"))):($=null,h&&a.css("width",a[0].offsetWidth+"px"),f.inlineStyles&&(a.css("position","fixed"),a.css("top",m+"px"))),a.removeClass(g).addClass("affix"+("middle"!==o?"-"+o:"")))},d.$onResize=function(){d.$parseOffsets(),d.checkPosition()},d.$debouncedOnResize=n(d.$onResize,50),d.$parseOffsets=function(){var e=a.css("position");f.inlineStyles&&a.css("position",f.offsetParent?"":"relative"),f.offsetTop&&("auto"===f.offsetTop&&(f.offsetTop="+0"),f.offsetTop.match(/^[-+]\d+$/)?(m=1*-f.offsetTop,y=f.offsetParent?i.offset(k[0]).top+1*f.offsetTop:i.offset(a[0]).top-i.css(a[0],"marginTop",!0)+1*f.offsetTop):y=1*f.offsetTop),f.offsetBottom&&(b=f.offsetParent&&f.offsetBottom.match(/^[-+]\d+$/)?u()-(i.offset(k[0]).top+i.height(k[0]))+1*f.offsetBottom+1:1*f.offsetBottom),f.inlineStyles&&a.css("position",e)},d.init(),d}var r=angular.element(t.document.body),o=angular.element(t);return a}]}).directive("bsAffix",["$affix","$window",function(e,t){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(n,i,a,r){var o={scope:n,target:r?r.$element:angular.element(t)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin","inlineStyles"],function(e){if(angular.isDefined(a[e])){var t=a[e];/true/i.test(t)&&(t=!0),/false/i.test(t)&&(t=!1),o[e]=t}});var s=e(i,o);n.$on("$destroy",function(){s&&s.destroy(),o=null,s=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(e){this.$element=e}]}}),angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"])}(window,document),function(e,t,n){"use strict";angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function(e){e.put("alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}]),angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function(e){e.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(e){e.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-if="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(e){e.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu" ng-show="content && content.length"><li role="presentation" ng-class="{divider: item.divider, active: item.active}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(e){e.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function(e){e.put("popover/popover.tpl.html",'<div class="popover" tabindex="-1"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}]),angular.module("mgcrea.ngStrap.select").run(["$templateCache",function(e){e.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button type="button" class="btn btn-default btn-xs" ng-click="$selectAll()">{{$allText}}</button> <button type="button" class="btn btn-default btn-xs" ng-click="$selectNone()">{{$noneText}}</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind="match.label"></span></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function(e){e.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li role="presentation" ng-repeat="$pane in $panes track by $index" ng-class="[ $isActive($pane, $index) ? $activeClass : \'\', $pane.disabled ? \'disabled\' : \'\' ]"><a role="tab" data-toggle="tab" ng-click="!$pane.disabled && $setActive($pane.name || $index)" data-index="{{ $index }}" ng-bind-html="$pane.title" aria-controls="$pane.title"></a></li></ul><div ng-transclude class="tab-content"></div>')}]),angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function(e){e.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 2)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="showSeconds && row[2].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[2].selected}" ng-click="$select(row[2].date, 2)" ng-disabled="row[2].disabled"><span ng-class="{\'text-muted\': row[2].muted}" ng-bind="row[2].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button ng-if="showSeconds" tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 2)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(e){e.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(e){e.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}])}(window,document);var lhFactory=function(){var e=["$http",function(e){var t={get:function(t){e({ignoreLoadingBar:!0,method:"get",url:t.url,params:t.data}).success(function(e,n,i,a){t.success(e,n,i,a)}).error(t.error)},post:function(t){e({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"post",url:t.url,params:t.params,data:jQuery.param(t.data)}).success(function(e,n,i,a){t.success(e,n,i,a)}).error(t.error)}};return t}],t=["$http","cfpLoadingBar","ngNotify",function(e,t,n){var i={get:function(i){t.start(),e({ignoreLoadingBar:!0,method:"get",url:i.url,params:i.data}).success(function(e,a,r,o){t.complete();var s=i.infoSuccess?i.infoSuccess:e.info?e.info:"成功",l=i.infoSuccess?i.infoSuccess:e.info?e.info:"数据格式错误";1==e.status?(i.infoShow&&n.set(s,{position:"top",duration:1500,type:"success"}),i.success(e,a,r,o)):i.infoShow&&n.set(l,{position:"top",duration:1500,type:"warn"})}).error(function(e){alert("服务器错误")})},post:function(i){t.start(),e({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"post",url:i.url,params:i.params,data:jQuery.param(i.data)}).success(function(e,a,r,o){t.complete();var s=i.infoSuccess?i.infoSuccess:e.info?e.info:"成功",l=i.infoSuccess?i.infoSuccess:e.info?e.info:"数据格式错误";1==e.status?(i.infoShow&&n.set(s,{position:"top",duration:1500,type:"success"}),i.success(e,a,r,o)):i.infoShow&&n.set(l,{position:"top",duration:1500,type:"warn"})}).error(function(e){alert("服务器错误")})}};return i}],n=["$http",function(e){var t={get:function(t){var n=layer.load(1);e({ignoreLoadingBar:!0,method:"get",url:t.url,params:t.data}).success(function(e,i,a,r){layer.close(n);var o=t.infoSuccess?t.infoSuccess:e.info?e.info:"成功",s=t.infoSuccess?t.infoSuccess:e.info?e.info:"数据格式错误";1==e.status?(t.infoShow&&layer.msg(o),t.success(e,i,a,r)):t.infoShow&&layer.msg(s,function(){})}).error(function(e){alert("服务器错误")})},post:function(t){var n=layer.load(1);e({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"post",url:t.url,params:t.params,data:jQuery.param(t.data)}).success(function(e,i,a,r){layer.close(n);var o=t.infoSuccess?t.infoSuccess:e.info?e.info:"成功",s=t.infoSuccess?t.infoSuccess:e.info?e.info:"数据格式错误";1==e.status?(t.infoShow&&layer.msg(o),t.success(e,i,a,r)):t.infoShow&&layer.msg(s,function(){})}).error(function(e){alert("服务器错误")})}};return t}];return{http:e,ajax:t,ajax2:n}}(),lhFilter=function(){var e=[function(){return function(e,t){return t=+t,e?e.slice(t):void 0}}],t=[function(){return function(e,t){return"Y"==e&&(t="启用"),"N"==e&&(t="禁用"),t}}],n=[function(){return function(e,t){return"Y"==e&&(t="在线"),"N"==e&&(t="离线"),t}}],i=[function(){return function(e,t){var n=[];if(angular.isArray(e)){var i=Object.keys(t);e.forEach(function(e){for(var a=!1,r=0;r<i.length;r++){var o=i[r],s=t[o].toLowerCase();if(-1!==e[o].toString().toLowerCase().indexOf(s)){a=!0;break}}a&&n.push(e)})}else n=e;return n}}];return{uiSelectPropsFilter:i,YNtoHanzi:t,YNtoZaixian:n,pageStart:e}}();