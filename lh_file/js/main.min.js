!function(){"use strict";var e=angular.module("ngNotify",[]),t=!1;try{angular.module("ngSanitize")&&(angular.module("ngNotify").requires.push("ngSanitize"),t=!0)}catch(n){}var r='<div class="ngn" ng-class="ngNotify.notifyClass" ng-style="ngNotify.notifyStyle"><span ng-show="ngNotify.notifyButton" class="ngn-dismiss" ng-click="dismiss()">&times;</span><span ng-if="ngNotify.notifyHtml" ng-bind-html="ngNotify.notifyMessage"></span><span ng-if="!ngNotify.notifyHtml" ng-bind="ngNotify.notifyMessage"></span></div>';e.run(["$templateCache",function(e){e.put("templates/ng-notify/ng-notify.html",r)}]),e.provider("ngNotify",function(){this.$get=["$document","$compile","$log","$rootScope","$timeout","$interval","$templateCache",function(e,n,r,i,a,o,l){var s,c,u="",d=" ",f=3e3,p="ngn-sticky",g=1,h=-1,m=200,v=500,b=25,y=0,$=1,w={theme:"pure",position:"bottom",duration:f,type:"info",sticky:!1,button:!0,html:!1},x={notifyClass:"",notifyMessage:"",notifyStyle:{display:"none",opacity:y}},_={pure:u,prime:"ngn-prime",pastel:"ngn-pastel",pitchy:"ngn-pitchy"},E={info:"ngn-info",error:"ngn-error",success:"ngn-success",warn:"ngn-warn",grimace:"ngn-grimace"},S={bottom:"ngn-bottom",top:"ngn-top"},A=i.$new(),C=n(l.get("templates/ng-notify/ng-notify.html"))(A);A.ngNotify=angular.extend({},x),a(function(){e.find("body").append(C)});var k=function(e){var t=e.type||w.type;return(E[t]||E.info)+d},P=function(e){var t=e.theme||w.theme;return(_[t]||_.pure)+d},T=function(e){var t=e.position||w.position;return(S[t]||S.bottom)+d},D=function(e){var t=e.duration||w.duration;return angular.isNumber(t)?t:f},F=function(e){var t=void 0!==e.sticky?e.sticky:w.sticky;return!!t},I=function(e,t){var n=void 0!==e.button?e.button:w.button;return n&&t},R=function(e){if((e.html||w.html)&&!t)return r.debug("ngNotify warning: \ngSanitize couldn't be located.  In order to use the 'html' option, be sure the ngSanitize source is included in your project."),!1;var n=void 0!==e.html?e.html:w.html;return!!n},M=function(e,t){var n=k(e)+P(e)+T(e);return n+=t?p:u},U=function(){A.ngNotify=angular.extend({},x)},L=function(e,t,n,r){var i=b/n;A.ngNotify.notifyStyle={display:"block",opacity:t};var a=function(){t+=e*i,A.ngNotify.notifyStyle.opacity=t,(y>=t||t>=$)&&(o.cancel(c),c=!1,r())};c||(c=o(a,b))},z=function(e,t){L(h,$,e,t)},O=function(e,t){L(g,y,e,t)};return A.dismiss=function(){z(v,function(){U()})},{config:function(e){e=e||{},angular.extend(w,e)},set:function(e,t){if(e){o.cancel(c),c=!1,a.cancel(s);var n={};"object"==typeof t?n=t:n.type=t;var r=F(n),i=D(n);angular.extend(A.ngNotify,{notifyHtml:R(n),notifyClass:M(n,r),notifyButton:I(n,r),notifyMessage:e}),O(m,function(){r||(s=a(function(){A.dismiss()},i))})}},dismiss:function(){A.dismiss()},addTheme:function(e,t){e&&t&&(_[e]=t)},addType:function(e,t){e&&t&&(E[e]=t)}}}]})}(),!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var t=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(t,n,r,i,a,o){function l(){r.cancel(c),o.complete(),d=0,u=0}function s(t){var r,i=n.get("$http"),a=e.defaults;!t.cache&&!a.cache||t.cache===!1||"GET"!==t.method&&"JSONP"!==t.method||(r=angular.isObject(t.cache)?t.cache:angular.isObject(a.cache)?a.cache:i);var o=void 0!==r?void 0!==r.get(t.url):!1;return void 0!==t.cached&&o!==t.cached?t.cached:(t.cached=o,o)}var c,u=0,d=0,f=o.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||s(e)||(i.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===u&&(c=r(function(){o.start()},f)),u++,o.set(d/u)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||s(e.config)||(d++,i.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=u?l():o.set(d/u)),e):(a.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||s(e.config)||(d++,i.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),d>=u?l():o.set(d/u)),t.reject(e)):(a.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),t.reject(e))}}}];e.interceptors.push(t)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,t,n,r){function i(){u||(u=e.get("$animate"));var i=t.find(p).eq(0);n.cancel(f),v||(r.$broadcast("cfpLoadingBar:started"),v=!0,w&&u.enter(g,i,angular.element(i[0].lastChild)),$&&u.enter(m,i,angular.element(i[0].lastChild)),a(x))}function a(e){if(v){var t=100*e+"%";h.css("width",t),b=e,y&&(n.cancel(d),d=n(function(){o()},250))}}function o(){if(!(l()>=1)){var e=0,t=l();e=t>=0&&.25>t?(3*Math.random()+3)/100:t>=.25&&.65>t?3*Math.random()/100:t>=.65&&.9>t?2*Math.random()/100:t>=.9&&.99>t?.005:0;var n=l()+e;a(n)}}function l(){return b}function s(){b=0,v=!1}function c(){u||(u=e.get("$animate")),r.$broadcast("cfpLoadingBar:completed"),a(1),n.cancel(f),f=n(function(){var e=u.leave(g,s);e&&e.then&&e.then(s),u.leave(m)},500)}var u,d,f,p=this.parentSelector,g=angular.element(this.loadingBarTemplate),h=g.find("div").eq(0),m=angular.element(this.spinnerTemplate),v=!1,b=0,y=this.autoIncrement,$=this.includeSpinner,w=this.includeBar,x=this.startSize;return{start:i,set:a,status:l,inc:o,complete:c,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(e,t,n){"use strict";function r(e){var n=[];return s(n,t.noop).chars(e),n.join("")}function i(e,n){var r,i={},a=e.split(",");for(r=0;r<a.length;r++)i[n?t.lowercase(a[r]):a[r]]=!0;return i}function a(e,t){null===e||e===n?e="":"string"!=typeof e&&(e=""+e),u.innerHTML=e;var r=5;do{if(0===r)throw d("uinput");r--,11>=document.documentMode&&c(u),e=u.innerHTML,u.innerHTML=e}while(e!==u.innerHTML);for(r=u.firstChild;r;){switch(r.nodeType){case 1:t.start(r.nodeName.toLowerCase(),o(r.attributes));break;case 3:t.chars(r.textContent)}var i;if(!(i=r.firstChild)&&(1==r.nodeType&&t.end(r.nodeName.toLowerCase()),i=r.nextSibling,!i))for(;null==i&&(r=r.parentNode,r!==u);)i=r.nextSibling,1==r.nodeType&&t.end(r.nodeName.toLowerCase());r=i}for(;r=u.firstChild;)u.removeChild(r)}function o(e){for(var t={},n=0,r=e.length;r>n;n++){var i=e[n];t[i.name]=i.value}return t}function l(e){return e.replace(/&/g,"&amp;").replace(f,function(e){var t=e.charCodeAt(0);return e=e.charCodeAt(1),"&#"+(1024*(t-55296)+(e-56320)+65536)+";"}).replace(p,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function s(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,a){e=t.lowercase(e),!r&&y[e]&&(r=e),r||!0!==$[e]||(i("<"),i(e),t.forEach(a,function(r,a){var o=t.lowercase(a),s="img"===e&&"src"===o||"background"===o;!0!==x[o]||!0===w[o]&&!n(r,s)||(i(" "),i(a),i('="'),i(l(r)),i('"'))}),i(">"))},end:function(e){e=t.lowercase(e),r||!0!==$[e]||!0===g[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(l(e))}}}function c(e){if(e.nodeType===Node.ELEMENT_NODE)for(var t=e.attributes,n=0,r=t.length;r>n;n++){var i=t[n],a=i.name.toLowerCase();"xmlns:ns1"!==a&&0!==a.indexOf("ns1:")||(e.removeAttributeNode(i),n--,r--)}(t=e.firstChild)&&c(t),(t=e.nextSibling)&&c(t)}var u,d=t.$$minErr("$sanitize"),f=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,p=/([^\#-~ |!])/g,g=i("area,br,col,hr,img,wbr"),h=i("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=i("rp,rt"),v=t.extend({},m,h),h=t.extend({},h,i("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),m=t.extend({},m,i("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),b=i("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),y=i("script,style"),$=t.extend({},g,h,m,v),w=i("background,cite,href,longdesc,src,xlink:href"),v=i("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),m=i("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),x=t.extend({},w,m,v);!function(e){if(!e.document||!e.document.implementation)throw d("noinert");e=e.document.implementation.createHTMLDocument("inert");var t=(e.documentElement||e.getDocumentElement()).getElementsByTagName("body");1===t.length?u=t[0]:(t=e.createElement("html"),u=e.createElement("body"),t.appendChild(u),e.appendChild(t))}(e),t.module("ngSanitize",[]).provider("$sanitize",function(){var e=!1;this.$get=["$$sanitizeUri",function(n){return e&&t.extend($,b),function(e){var t=[];return a(e,s(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(n){return t.isDefined(n)?(e=n,this):e}}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,i=/^mailto:/i,a=t.$$minErr("linky"),o=t.isString;return function(l,s,c){function u(e){e&&h.push(r(e))}function d(e,n){var r;if(h.push("<a "),t.isFunction(c)&&(c=c(e)),t.isObject(c))for(r in c)h.push(r+'="'+c[r]+'" ');else c={};!t.isDefined(s)||"target"in c||h.push('target="',s,'" '),h.push('href="',e.replace(/"/g,"&quot;"),'">'),u(n),h.push("</a>")}if(null==l||""===l)return l;if(!o(l))throw a("notstring",l);for(var f,p,g=l,h=[];l=g.match(n);)f=l[0],l[2]||l[4]||(f=(l[3]?"http://":"mailto:")+f),p=l.index,u(g.substr(0,p)),d(f,l[0].replace(i,"")),g=g.substring(p+l[0].length);return u(g),e(h.join(""))}}])}(window,window.angular),function(){"use strict";var e={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var n=t.which;switch(n){case e.COMMAND:case e.SHIFT:case e.CTRL:case e.ALT:return!0}return!!t.metaKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&123>=e},isVerticalMovement:function(t){return~[e.UP,e.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[e.LEFT,e.RIGHT,e.BACKSPACE,e.DELETE].indexOf(t)},toSeparator:function(t){var n={ENTER:"\n",TAB:"	",SPACE:" "}[t];return n?n:e[t]?void 0:t}};void 0===angular.element.prototype.querySelectorAll&&(angular.element.prototype.querySelectorAll=function(e){return angular.element(this[0].querySelectorAll(e))}),void 0===angular.element.prototype.closest&&(angular.element.prototype.closest=function(e){for(var t=this[0],n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.bind(t)(e))return t;t=t.parentElement}return!1});var t=0,n=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,dropdownPosition:"auto",generateId:function(){return t++},appendToBody:!1}).service("uiSelectMinErr",function(){var e=angular.$$minErr("ui.select");return function(){var t=e.apply(this,arguments),n=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(n)}}).directive("uisTranscludeAppend",function(){return{link:function(e,t,n,r,i){i(e,function(e){t.append(e)})}}}).filter("highlight",function(){function e(e){return(""+e).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n&&t?(""+t).replace(new RegExp(e(n),"gi"),'<span class="ui-select-highlight">$&</span>'):t}}).factory("uisOffset",["$document","$window",function(e,t){return function(n){var r=n[0].getBoundingClientRect();return{width:r.width||n.prop("offsetWidth"),height:r.height||n.prop("offsetHeight"),top:r.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}}}]);n.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(e,t,n,r,i){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var n=t.parent().attr("theme")||e.theme;return n+"/choices.tpl.html"},compile:function(a,o){if(!o.repeat)throw n("repeat","Expected 'repeat' expression.");return function(a,o,l,s,c){var u=l.groupBy,d=l.groupFilter;if(s.parseRepeatAttr(l.repeat,u,d),s.disableChoiceExpression=l.uiDisableChoice,s.onHighlightCallback=l.onHighlight,s.dropdownPosition=l.position?l.position.toLowerCase():e.dropdownPosition,u){var f=o.querySelectorAll(".ui-select-choices-group");if(1!==f.length)throw n("rows","Expected 1 .ui-select-choices-group but got '{0}'.",f.length);f.attr("ng-repeat",t.getGroupNgRepeatExpression())}var p=o.querySelectorAll(".ui-select-choices-row");if(1!==p.length)throw n("rows","Expected 1 .ui-select-choices-row but got '{0}'.",p.length);p.attr("ng-repeat",s.parserResult.repeatExpression(u)).attr("ng-if","$select.open"),i.document.addEventListener&&p.attr("ng-mouseenter","$select.setActiveItem("+s.parserResult.itemName+")").attr("ng-click","$select.select("+s.parserResult.itemName+",false,$event)");var g=o.querySelectorAll(".ui-select-choices-row-inner");if(1!==g.length)throw n("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",g.length);g.attr("uis-transclude-append",""),i.document.addEventListener||g.attr("ng-mouseenter","$select.setActiveItem("+s.parserResult.itemName+")").attr("ng-click","$select.select("+s.parserResult.itemName+",false,$event)"),r(o,c)(a),a.$watch("$select.search",function(e){e&&!s.open&&s.multiple&&s.activate(!1,!0),s.activeIndex=s.tagging.isActivated?-1:0,!l.minimumInputLength||s.search.length>=l.minimumInputLength?s.refresh(l.refresh):s.items=[]}),l.$observe("refreshDelay",function(){var t=a.$eval(l.refreshDelay);s.refreshDelay=void 0!==t?t:e.refreshDelay})}}}}]),n.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector",function(t,n,r,i,a,o,l,s,c){function u(e,t,n){if(e.findIndex)return e.findIndex(t,n);for(var r,i=Object(e),a=i.length>>>0,o=0;a>o;o++)if(r=i[o],t.call(n,r,o,i))return o;return-1}function d(){(h.resetSearchInput||void 0===h.resetSearchInput&&l.resetSearchInput)&&(h.search=m,h.selected&&h.items.length&&!h.multiple&&(h.activeIndex=u(h.items,function(e){return angular.equals(this,e)},h.selected)))}function f(e,t){var n,r,i=[];for(n=0;n<t.length;n++)for(r=0;r<e.length;r++)e[r].name==[t[n]]&&i.push(e[r]);return i}function p(t){var n=!0;switch(t){case e.DOWN:!h.open&&h.multiple?h.activate(!1,!0):h.activeIndex<h.items.length-1&&h.activeIndex++;break;case e.UP:!h.open&&h.multiple?h.activate(!1,!0):(h.activeIndex>0||0===h.search.length&&h.tagging.isActivated&&h.activeIndex>-1)&&h.activeIndex--;break;case e.TAB:h.multiple&&!h.open||h.select(h.items[h.activeIndex],!0);break;case e.ENTER:h.open&&(h.tagging.isActivated||h.activeIndex>=0)?h.select(h.items[h.activeIndex]):h.activate(!1,!0);break;case e.ESC:h.close();break;default:n=!1}return n}function g(){var e=n.querySelectorAll(".ui-select-choices-content"),t=e.querySelectorAll(".ui-select-choices-row");if(t.length<1)throw o("choices","Expected multiple .ui-select-choices-row but got '{0}'.",t.length);if(!(h.activeIndex<0)){var r=t[h.activeIndex],i=r.offsetTop+r.clientHeight-e[0].scrollTop,a=e[0].offsetHeight;i>a?e[0].scrollTop+=i-a:i<r.clientHeight&&(h.isGrouped&&0===h.activeIndex?e[0].scrollTop=0:e[0].scrollTop-=r.clientHeight-i)}}var h=this,m="";if(h.placeholder=l.placeholder,h.searchEnabled=l.searchEnabled,h.sortable=l.sortable,h.refreshDelay=l.refreshDelay,h.paste=l.paste,h.removeSelected=!1,h.closeOnSelect=!0,h.search=m,h.activeIndex=0,h.items=[],h.open=!1,h.focus=!1,h.disabled=!1,h.selected=void 0,h.dropdownPosition="auto",h.focusser=void 0,h.resetSearchInput=!0,h.multiple=void 0,h.disableChoiceExpression=void 0,h.tagging={isActivated:!1,fct:void 0},h.taggingTokens={isActivated:!1,tokens:void 0},h.lockChoiceExpression=void 0,h.clickTriggeredSelect=!1,h.$filter=i,h.$animate=function(){try{return c.get("$animate")}catch(e){return null}}(),h.searchInput=n.querySelectorAll("input.ui-select-search"),1!==h.searchInput.length)throw o("searchInput","Expected 1 input.ui-select-search but got '{0}'.",h.searchInput.length);h.isEmpty=function(){return angular.isUndefined(h.selected)||null===h.selected||""===h.selected||h.multiple&&0===h.selected.length},h.activate=function(e,i){if(!h.disabled&&!h.open){i||d(),t.$broadcast("uis:activate"),h.open=!0,h.activeIndex=h.activeIndex>=h.items.length?0:h.activeIndex,-1===h.activeIndex&&h.taggingLabel!==!1&&(h.activeIndex=0);var a=n.querySelectorAll(".ui-select-choices-content");h.$animate&&h.$animate.enabled(a[0])?h.$animate.on("enter",a[0],function(t,n){"close"===n&&r(function(){h.focusSearchInput(e)})}):r(function(){h.focusSearchInput(e)})}},h.focusSearchInput=function(e){h.search=e||h.search,h.searchInput[0].focus(),!h.tagging.isActivated&&h.items.length>1&&g()},h.findGroupByName=function(e){return h.groups&&h.groups.filter(function(t){return t.name===e})[0]},h.parseRepeatAttr=function(e,n,r){function i(e){var i=t.$eval(n);if(h.groups=[],angular.forEach(e,function(e){var t=angular.isFunction(i)?i(e):e[i],n=h.findGroupByName(t);n?n.items.push(e):h.groups.push({name:t,items:[e]})}),r){var a=t.$eval(r);angular.isFunction(a)?h.groups=a(h.groups):angular.isArray(a)&&(h.groups=f(h.groups,a))}h.items=[],h.groups.forEach(function(e){h.items=h.items.concat(e.items)})}function l(e){h.items=e}h.setItemsFn=n?i:l,h.parserResult=a.parse(e),h.isGrouped=!!n,h.itemProperty=h.parserResult.itemName;var c=h.parserResult.source,u=function(){var e=c(t);t.$uisSource=Object.keys(e).map(function(t){var n={};return n[h.parserResult.keyName]=t,n.value=e[t],n})};h.parserResult.keyName&&(u(),h.parserResult.source=s("$uisSource"+h.parserResult.filters),t.$watch(c,function(e,t){e!==t&&u()},!0)),h.refreshItems=function(e){e=e||h.parserResult.source(t);var n=h.selected;if(h.isEmpty()||angular.isArray(n)&&!n.length||!h.removeSelected)h.setItemsFn(e);else if(void 0!==e){var r=e.filter(function(e){return n&&n.indexOf(e)<0});h.setItemsFn(r)}"auto"!==h.dropdownPosition&&"up"!==h.dropdownPosition||t.calculateDropdownPos()},t.$watchCollection(h.parserResult.source,function(e){if(void 0===e||null===e)h.items=[];else{if(!angular.isArray(e))throw o("items","Expected an array but got '{0}'.",e);h.refreshItems(e),h.ngModel.$modelValue=null}})};var v;h.refresh=function(e){void 0!==e&&(v&&r.cancel(v),v=r(function(){t.$eval(e)},h.refreshDelay))},h.isActive=function(e){if(!h.open)return!1;var t=h.items.indexOf(e[h.itemProperty]),n=t==h.activeIndex;return!n||0>t&&h.taggingLabel!==!1||0>t&&h.taggingLabel===!1?!1:(n&&!angular.isUndefined(h.onHighlightCallback)&&e.$eval(h.onHighlightCallback),n)},h.isDisabled=function(e){if(h.open){var t,n=h.items.indexOf(e[h.itemProperty]),r=!1;return n>=0&&!angular.isUndefined(h.disableChoiceExpression)&&(t=h.items[n],r=!!e.$eval(h.disableChoiceExpression),t._uiSelectChoiceDisabled=r),r}},h.select=function(e,n,i){if(void 0===e||!e._uiSelectChoiceDisabled){if(!h.items&&!h.search&&!h.tagging.isActivated)return;if(!e||!e._uiSelectChoiceDisabled){if(h.tagging.isActivated){if(h.taggingLabel===!1)if(h.activeIndex<0){if(e=void 0!==h.tagging.fct?h.tagging.fct(h.search):h.search,!e||angular.equals(h.items[0],e))return}else e=h.items[h.activeIndex];else if(0===h.activeIndex){if(void 0===e)return;if(void 0!==h.tagging.fct&&"string"==typeof e){if(e=h.tagging.fct(e),!e)return}else"string"==typeof e&&(e=e.replace(h.taggingLabel,"").trim())}if(h.selected&&angular.isArray(h.selected)&&h.selected.filter(function(t){return angular.equals(t,e)}).length>0)return void h.close(n)}t.$broadcast("uis:select",e);var a={};a[h.parserResult.itemName]=e,r(function(){h.onSelectCallback(t,{$item:e,$model:h.parserResult.modelMapper(t,a)})}),h.closeOnSelect&&h.close(n),i&&"click"===i.type&&(h.clickTriggeredSelect=!0)}}},h.close=function(e){h.open&&(h.ngModel&&h.ngModel.$setTouched&&h.ngModel.$setTouched(),d(),h.open=!1,t.$broadcast("uis:close",e))},h.setFocus=function(){h.focus||h.focusInput[0].focus()},h.clear=function(e){h.select(void 0),e.stopPropagation(),r(function(){h.focusser[0].focus()},0,!1)},h.toggle=function(e){h.open?(h.close(),e.preventDefault(),e.stopPropagation()):h.activate()},h.isLocked=function(e,t){var n,r=h.selected[t];return r&&!angular.isUndefined(h.lockChoiceExpression)&&(n=!!e.$eval(h.lockChoiceExpression),r._uiSelectChoiceLocked=n),n};var b=null;h.sizeSearchInput=function(){var e=h.searchInput[0],n=h.searchInput.parent().parent()[0],i=function(){return n.clientWidth*!!e.offsetParent},a=function(t){if(0===t)return!1;var n=t-e.offsetLeft-10;return 50>n&&(n=t),h.searchInput.css("width",n+"px"),!0};h.searchInput.css("width","10px"),r(function(){null!==b||a(i())||(b=t.$watch(i,function(e){a(e)&&(b(),b=null)}))})},h.searchInput.on("keydown",function(n){var i=n.which;~[e.ENTER,e.ESC].indexOf(i)&&(n.preventDefault(),n.stopPropagation()),t.$apply(function(){var t=!1;if((h.items.length>0||h.tagging.isActivated)&&(p(i),h.taggingTokens.isActivated)){for(var a=0;a<h.taggingTokens.tokens.length;a++)h.taggingTokens.tokens[a]===e.MAP[n.keyCode]&&h.search.length>0&&(t=!0);t&&r(function(){h.searchInput.triggerHandler("tagged");var t=h.search.replace(e.MAP[n.keyCode],"").trim();h.tagging.fct&&(t=h.tagging.fct(t)),t&&h.select(t,!0)})}}),e.isVerticalMovement(i)&&h.items.length>0&&g(),i!==e.ENTER&&i!==e.ESC||(n.preventDefault(),n.stopPropagation())}),h.searchInput.on("paste",function(t){var n;if(n=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),n=h.search+n,n&&n.length>0)if(h.taggingTokens.isActivated){var r=e.toSeparator(h.taggingTokens.tokens[0]),i=n.split(r||h.taggingTokens.tokens[0]);if(i&&i.length>0){var a=h.search;angular.forEach(i,function(e){var t=h.tagging.fct?h.tagging.fct(e):e;t&&h.select(t,!0)}),h.search=a||m,t.preventDefault(),t.stopPropagation()}}else h.paste&&(h.paste(n),h.search=m,t.preventDefault(),t.stopPropagation())}),h.searchInput.on("tagged",function(){r(function(){d()})}),t.$on("$destroy",function(){h.searchInput.off("keyup keydown tagged blur paste")})}]),n.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(e,t,n,r,i,a,o){return{restrict:"EA",templateUrl:function(e,n){var r=n.theme||t.theme;return r+(angular.isDefined(n.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(i,l){var s=/{(.*)}\s*{(.*)}/.exec(l.ngClass);if(s){var c="{"+s[1]+", "+s[2]+"}";l.ngClass=c,i.attr("ng-class",c)}return angular.isDefined(l.multiple)?i.append("<ui-select-multiple/>").removeAttr("multiple"):i.append("<ui-select-single/>"),l.inputId&&(i.querySelectorAll("input.ui-select-search")[0].id=l.inputId),function(i,l,s,c,u){function d(e){if(g.open){var t=!1;if(t=window.jQuery?window.jQuery.contains(l[0],e.target):l[0].contains(e.target),!t&&!g.clickTriggeredSelect){var n=["input","button","textarea","select"],r=angular.element(e.target).controller("uiSelect"),a=r&&r!==g;a||(a=~n.indexOf(e.target.tagName.toLowerCase())),g.close(a),i.$digest()}g.clickTriggeredSelect=!1}}function f(){var t=r(l);v=angular.element('<div class="ui-select-placeholder"></div>'),v[0].style.width=t.width+"px",v[0].style.height=t.height+"px",l.after(v),b=l[0].style.width,e.find("body").append(l),l[0].style.position="absolute",l[0].style.left=t.left+"px",l[0].style.top=t.top+"px",l[0].style.width=t.width+"px"}function p(){null!==v&&(v.replaceWith(l),v=null,l[0].style.position="",l[0].style.left="",l[0].style.top="",l[0].style.width=b,g.setFocus())}var g=c[0],h=c[1];g.generatedId=t.generateId(),g.baseTitle=s.title||"Select box",g.focusserTitle=g.baseTitle+" focus",g.focusserId="focusser-"+g.generatedId,g.closeOnSelect=function(){return angular.isDefined(s.closeOnSelect)?a(s.closeOnSelect)():t.closeOnSelect}(),g.onSelectCallback=a(s.onSelect),g.onRemoveCallback=a(s.onRemove),g.limit=angular.isDefined(s.limit)?parseInt(s.limit,10):void 0,g.ngModel=h,g.choiceGrouped=function(e){return g.isGrouped&&e&&e.name},s.tabindex&&s.$observe("tabindex",function(e){g.focusInput.attr("tabindex",e),l.removeAttr("tabindex")}),i.$watch("searchEnabled",function(){var e=i.$eval(s.searchEnabled);g.searchEnabled=void 0!==e?e:t.searchEnabled}),i.$watch("sortable",function(){var e=i.$eval(s.sortable);g.sortable=void 0!==e?e:t.sortable}),s.$observe("disabled",function(){g.disabled=void 0!==s.disabled?s.disabled:!1}),s.$observe("resetSearchInput",function(){var e=i.$eval(s.resetSearchInput);g.resetSearchInput=void 0!==e?e:!0}),s.$observe("paste",function(){g.paste=i.$eval(s.paste)}),s.$observe("tagging",function(){if(void 0!==s.tagging){var e=i.$eval(s.tagging);g.tagging={isActivated:!0,fct:e!==!0?e:void 0}}else g.tagging={isActivated:!1,fct:void 0}}),s.$observe("taggingLabel",function(){void 0!==s.tagging&&("false"===s.taggingLabel?g.taggingLabel=!1:g.taggingLabel=void 0!==s.taggingLabel?s.taggingLabel:"(new)")}),s.$observe("taggingTokens",function(){if(void 0!==s.tagging){var e=void 0!==s.taggingTokens?s.taggingTokens.split("|"):[",","ENTER"];g.taggingTokens={isActivated:!0,tokens:e}}}),angular.isDefined(s.autofocus)&&o(function(){g.setFocus()}),angular.isDefined(s.focusOn)&&i.$on(s.focusOn,function(){o(function(){g.setFocus()})}),e.on("click",d),i.$on("$destroy",function(){e.off("click",d)}),u(i,function(e){var t=angular.element("<div>").append(e),r=t.querySelectorAll(".ui-select-match");if(r.removeAttr("ui-select-match"),r.removeAttr("data-ui-select-match"),1!==r.length)throw n("transcluded","Expected 1 .ui-select-match but got '{0}'.",r.length);l.querySelectorAll(".ui-select-match").replaceWith(r);var i=t.querySelectorAll(".ui-select-choices");if(i.removeAttr("ui-select-choices"),i.removeAttr("data-ui-select-choices"),1!==i.length)throw n("transcluded","Expected 1 .ui-select-choices but got '{0}'.",i.length);l.querySelectorAll(".ui-select-choices").replaceWith(i)});var m=i.$eval(s.appendToBody);(void 0!==m?m:t.appendToBody)&&(i.$watch("$select.open",function(e){e?f():p()}),i.$on("$destroy",function(){p()}));var v=null,b="",y=null,$="direction-up";i.$watch("$select.open",function(){"auto"!==g.dropdownPosition&&"up"!==g.dropdownPosition||i.calculateDropdownPos()});var w=function(e,t){e=e||r(l),t=t||r(y),y[0].style.position="absolute",y[0].style.top=-1*t.height+"px",l.addClass($)},x=function(e,t){l.removeClass($),e=e||r(l),t=t||r(y),y[0].style.position="",y[0].style.top=""};i.calculateDropdownPos=function(){if(g.open){if(y=angular.element(l).querySelectorAll(".ui-select-dropdown"),0===y.length)return;y[0].style.opacity=0,o(function(){if("up"===g.dropdownPosition)w();else{l.removeClass($);var t=r(l),n=r(y),i=e[0].documentElement.scrollTop||e[0].body.scrollTop;t.top+t.height+n.height>i+e[0].documentElement.clientHeight?w(t,n):x(t,n)}y[0].style.opacity=1})}else{if(null===y||0===y.length)return;y[0].style.position="",y[0].style.top="",l.removeClass($)}}}}}}]),n.directive("uiSelectMatch",["uiSelectConfig",function(e){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-match");var n=t.parent().attr("theme")||e.theme,r=t.parent().attr("multiple");return n+(r?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,n,r,i){function a(e){i.allowClear=angular.isDefined(e)?""===e?!0:"true"===e.toLowerCase():!1}i.lockChoiceExpression=r.uiLockChoice,r.$observe("placeholder",function(t){i.placeholder=void 0!==t?t:e.placeholder}),r.$observe("allowClear",a),a(r.allowClear),i.multiple&&i.sizeSearchInput()}}}]),n.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(e,t){var n,r=this,i=e.$select;angular.isUndefined(i.selected)&&(i.selected=[]),e.$evalAsync(function(){n=e.ngModel}),r.activeMatchIndex=-1,r.updateModel=function(){n.$setViewValue(Date.now()),r.refreshComponent()},r.refreshComponent=function(){i.refreshItems(),i.sizeSearchInput()},r.removeChoice=function(n){var a=i.selected[n];if(!a._uiSelectChoiceLocked){var o={};o[i.parserResult.itemName]=a,i.selected.splice(n,1),r.activeMatchIndex=-1,i.sizeSearchInput(),t(function(){i.onRemoveCallback(e,{$item:a,$model:i.parserResult.modelMapper(e,o)})}),r.updateModel()}},r.getPlaceholder=function(){return i.selected&&i.selected.length?void 0:i.placeholder}}],controllerAs:"$selectMultiple",link:function(r,i,a,o){function l(e){return angular.isNumber(e.selectionStart)?e.selectionStart:e.value.length}function s(t){function n(){switch(t){case e.LEFT:return~p.activeMatchIndex?u:o;case e.RIGHT:return~p.activeMatchIndex&&s!==o?c:(d.activate(),!1);case e.BACKSPACE:return~p.activeMatchIndex?(p.removeChoice(s),u):o;case e.DELETE:return~p.activeMatchIndex?(p.removeChoice(p.activeMatchIndex),s):!1}}var r=l(d.searchInput[0]),i=d.selected.length,a=0,o=i-1,s=p.activeMatchIndex,c=p.activeMatchIndex+1,u=p.activeMatchIndex-1,f=s;
return r>0||d.search.length&&t==e.RIGHT?!1:(d.close(),f=n(),d.selected.length&&f!==!1?p.activeMatchIndex=Math.min(o,Math.max(a,f)):p.activeMatchIndex=-1,!0)}function c(e){if(void 0===e||void 0===d.search)return!1;var t=e.filter(function(e){return void 0===d.search.toUpperCase()||void 0===e?!1:e.toUpperCase()===d.search.toUpperCase()}).length>0;return t}function u(e,t){var n=-1;if(angular.isArray(e))for(var r=angular.copy(e),i=0;i<r.length;i++)if(void 0===d.tagging.fct)r[i]+" "+d.taggingLabel===t&&(n=i);else{var a=r[i];angular.isObject(a)&&(a.isTag=!0),angular.equals(a,t)&&(n=i)}return n}var d=o[0],f=r.ngModel=o[1],p=r.$selectMultiple;d.multiple=!0,d.removeSelected=!0,d.focusInput=d.searchInput,f.$parsers.unshift(function(){for(var e,t={},n=[],i=d.selected.length-1;i>=0;i--)t={},t[d.parserResult.itemName]=d.selected[i],e=d.parserResult.modelMapper(r,t),n.unshift(e);return n}),f.$formatters.unshift(function(e){var t,n=d.parserResult.source(r,{$select:{search:""}}),i={};if(!n)return e;var a=[],o=function(e,n){if(e&&e.length){for(var o=e.length-1;o>=0;o--){if(i[d.parserResult.itemName]=e[o],t=d.parserResult.modelMapper(r,i),d.parserResult.trackByExp){var l=/(\w*)\./.exec(d.parserResult.trackByExp),s=/\.([^\s]+)/.exec(d.parserResult.trackByExp);if(l&&l.length>0&&l[1]==d.parserResult.itemName&&s&&s.length>0&&t[s[1]]==n[s[1]])return a.unshift(e[o]),!0}if(angular.equals(t,n))return a.unshift(e[o]),!0}return!1}};if(!e)return a;for(var l=e.length-1;l>=0;l--)o(d.selected,e[l])||o(n,e[l])||a.unshift(e[l]);return a}),r.$watchCollection(function(){return f.$modelValue},function(e,t){t!=e&&(f.$modelValue=null,p.refreshComponent())}),f.$render=function(){if(!angular.isArray(f.$viewValue)){if(!angular.isUndefined(f.$viewValue)&&null!==f.$viewValue)throw t("multiarr","Expected model value to be array but got '{0}'",f.$viewValue);d.selected=[]}d.selected=f.$viewValue,r.$evalAsync()},r.$on("uis:select",function(e,t){d.selected.length>=d.limit||(d.selected.push(t),p.updateModel())}),r.$on("uis:activate",function(){p.activeMatchIndex=-1}),r.$watch("$select.disabled",function(e,t){t&&!e&&d.sizeSearchInput()}),d.searchInput.on("keydown",function(t){var n=t.which;r.$apply(function(){var r=!1;e.isHorizontalMovement(n)&&(r=s(n)),r&&n!=e.TAB&&(t.preventDefault(),t.stopPropagation())})}),d.searchInput.on("keyup",function(t){if(e.isVerticalMovement(t.which)||r.$evalAsync(function(){d.activeIndex=d.taggingLabel===!1?-1:0}),d.tagging.isActivated&&d.search.length>0){if(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||e.isVerticalMovement(t.which))return;if(d.activeIndex=d.taggingLabel===!1?-1:0,d.taggingLabel===!1)return;var n,i,a,o,l=angular.copy(d.items),s=angular.copy(d.items),f=!1,p=-1;if(void 0!==d.tagging.fct){if(a=d.$filter("filter")(l,{isTag:!0}),a.length>0&&(o=a[0]),l.length>0&&o&&(f=!0,l=l.slice(1,l.length),s=s.slice(1,s.length)),n=d.tagging.fct(d.search),n.isTag=!0,s.filter(function(e){return angular.equals(e,d.tagging.fct(d.search))}).length>0)return;n.isTag=!0}else{if(a=d.$filter("filter")(l,function(e){return e.match(d.taggingLabel)}),a.length>0&&(o=a[0]),i=l[0],void 0!==i&&l.length>0&&o&&(f=!0,l=l.slice(1,l.length),s=s.slice(1,s.length)),n=d.search+" "+d.taggingLabel,u(d.selected,d.search)>-1)return;if(c(s.concat(d.selected)))return void(f&&(l=s,r.$evalAsync(function(){d.activeIndex=0,d.items=l})));if(c(s))return void(f&&(d.items=s.slice(1,s.length)))}f&&(p=u(d.selected,n)),p>-1?l=l.slice(p+1,l.length-1):(l=[],l.push(n),l=l.concat(s)),r.$evalAsync(function(){d.activeIndex=0,d.items=l})}}),d.searchInput.on("blur",function(){n(function(){p.activeMatchIndex=-1})})}}}]),n.directive("uiSelectSingle",["$timeout","$compile",function(t,n){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(r,i,a,o){var l=o[0],s=o[1];s.$parsers.unshift(function(e){var t,n={};return n[l.parserResult.itemName]=e,t=l.parserResult.modelMapper(r,n)}),s.$formatters.unshift(function(e){var t,n=l.parserResult.source(r,{$select:{search:""}}),i={};if(n){var a=function(n){return i[l.parserResult.itemName]=n,t=l.parserResult.modelMapper(r,i),t==e};if(l.selected&&a(l.selected))return l.selected;for(var o=n.length-1;o>=0;o--)if(a(n[o]))return n[o]}return e}),r.$watch("$select.selected",function(e){s.$viewValue!==e&&s.$setViewValue(e)}),s.$render=function(){l.selected=s.$viewValue},r.$on("uis:select",function(e,t){l.selected=t}),r.$on("uis:close",function(e,n){t(function(){l.focusser.prop("disabled",!1),n||l.focusser[0].focus()},0,!1)}),r.$on("uis:activate",function(){c.prop("disabled",!0)});var c=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");n(c)(r),l.focusser=c,l.focusInput=c,i.parent().append(c),c.bind("focus",function(){r.$evalAsync(function(){l.focus=!0})}),c.bind("blur",function(){r.$evalAsync(function(){l.focus=!1})}),c.bind("keydown",function(t){return t.which===e.BACKSPACE?(t.preventDefault(),t.stopPropagation(),l.select(void 0),void r.$apply()):void(t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||(t.which!=e.DOWN&&t.which!=e.UP&&t.which!=e.ENTER&&t.which!=e.SPACE||(t.preventDefault(),t.stopPropagation(),l.activate()),r.$digest()))}),c.bind("keyup input",function(t){t.which===e.TAB||e.isControl(t)||e.isFunctionKey(t)||t.which===e.ESC||t.which==e.ENTER||t.which===e.BACKSPACE||(l.activate(c.val()),c.val(""),r.$digest())})}}}]),n.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(e,t,n){return{require:"^^uiSelect",link:function(t,r,i,a){if(null===t[i.uiSelectSort])throw n("sort","Expected a list to sort");var o=angular.extend({axis:"horizontal"},t.$eval(i.uiSelectSortOptions)),l=o.axis,s="dragging",c="dropping",u="dropping-before",d="dropping-after";t.$watch(function(){return a.sortable},function(e){e?r.attr("draggable",!0):r.removeAttr("draggable")}),r.on("dragstart",function(e){r.addClass(s),(e.dataTransfer||e.originalEvent.dataTransfer).setData("text/plain",t.$index)}),r.on("dragend",function(){r.removeClass(s)});var f,p=function(e,t){this.splice(t,0,this.splice(e,1)[0])},g=function(e){e.preventDefault();var t="vertical"===l?e.offsetY||e.layerY||(e.originalEvent?e.originalEvent.offsetY:0):e.offsetX||e.layerX||(e.originalEvent?e.originalEvent.offsetX:0);t<this["vertical"===l?"offsetHeight":"offsetWidth"]/2?(r.removeClass(d),r.addClass(u)):(r.removeClass(u),r.addClass(d))},h=function(t){t.preventDefault();var n=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text/plain"),10);e.cancel(f),f=e(function(){m(n)},20)},m=function(e){var n=t.$eval(i.uiSelectSort),a=n[e],o=null;o=r.hasClass(u)?e<t.$index?t.$index-1:t.$index:e<t.$index?t.$index:t.$index+1,p.apply(n,[e,o]),t.$apply(function(){t.$emit("uiSelectSort:change",{array:n,item:a,from:e,to:o})}),r.removeClass(c),r.removeClass(u),r.removeClass(d),r.off("drop",h)};r.on("dragenter",function(){r.hasClass(s)||(r.addClass(c),r.on("dragover",g),r.on("drop",h))}),r.on("dragleave",function(e){e.target==r&&(r.removeClass(c),r.removeClass(u),r.removeClass(d),r.off("dragover",g),r.off("drop",h))})}}}]),n.service("uisRepeatParser",["uiSelectMinErr","$parse",function(e,t){var n=this;n.parse=function(n){var r,i=/\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(n);if(r=n.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!r)throw e("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);if(!r[6]&&i)throw e("iexp","Expected expression in form of '_item_ as (_key_, _item_) in _ObjCollection_ [ track by _id_]' but got '{0}'.",n);return{itemName:r[4]||r[2],keyName:r[3],source:t(r[3]?r[6]:r[5]),sourceName:r[6],filters:r[7],trackByExp:r[8],modelMapper:t(r[1]||r[4]||r[2]),repeatExpression:function(e){var t=this.itemName+" in "+(e?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}},n.getGroupNgRepeatExpression=function(){return"$group in $select.groups"}}])}(),angular.module("ui.select").run(["$templateCache",function(e){e.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" role="listbox" ng-show="$select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"></div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"></div><div id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><a href="" class="ui-select-choices-row-inner"></a></div></li></ul>'),e.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;</span> <span uis-transclude-append=""></span></span></span></span>'),e.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""></span> <i class="caret pull-right" ng-click="$select.toggle($event)"></i> <a ng-show="$select.allowClear && !$select.isEmpty()" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"></i></a></span></div>'),e.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"></div><input type="text" autocomplete="false" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-label="{{ $select.baseTitle }}" ondrop="return false;"></div><div class="ui-select-choices"></div></div>'),e.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"></div><input type="text" autocomplete="false" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="form-control ui-select-search" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.searchEnabled && $select.open"><div class="ui-select-choices"></div></div>'),e.put("select2/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"></div><ul role="listbox" id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"></div></li></ul></li></ul>'),e.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""></span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"></a></li></span>'),e.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}</span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""></span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"></abbr> <span class="select2-arrow ui-select-toggle"><b></b></span></a>'),e.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"></span><li class="select2-search-field"><input type="text" autocomplete="false" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"></li></ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="ui-select-choices"></div></div></div>'),e.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"></div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="select2-search" ng-show="$select.searchEnabled"><input type="text" autocomplete="false" autocorrect="false" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="ui-select-search select2-input" ng-model="$select.search"></div><div class="ui-select-choices"></div></div></div>'),e.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown single"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup" role="listbox"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"></div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""></div></div></div></div></div>'),e.put("selectize/match.tpl.html",'<div ng-hide="($select.open || $select.isEmpty())" class="ui-select-match" ng-transclude=""></div>'),e.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"></div><input type="text" autocomplete="false" tabindex="-1" class="ui-select-search ui-select-toggle" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.searchEnabled || ($select.selected && !$select.open)" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"></div><div class="ui-select-choices"></div></div>')}]),angular.module("w5c.validator",["ng"]).provider("w5cValidator",[function(){var e={required:"该选项不能为空",maxlength:"该选项输入值长度不能大于{maxlength}",minlength:"该选项输入值长度不能小于{minlength}",email:"输入邮件的格式不正确",repeat:"两次输入不一致",pattern:"该选项输入格式不正确",number:"必须输入数字",w5cuniquecheck:"该输入值已经存在，请重新输入",url:"输入URL格式不正确",max:"该选项输入值不能大于{max}",min:"该选项输入值不能小于{min}",customizer:"自定义验证不通过"},t=["text","password","email","number","url","tel","hidden",["textarea"],["select"],["select-multiple"],["select-one"],"radio","checkbox"],n=function(e){return"FORM"===e[0].tagName||11==e[0].nodeType?null:e&&e.hasClass("form-group")?e:n(e.parent())},r=function(){this.elemTypes=t,this.rules={},this.isEmpty=function(e){return e?e instanceof Array&&0===e.length:!0},this.defaultShowError=function(e,t){var r=angular.element(e),i=n(r);this.isEmpty(i)||i.hasClass("has-error")||i.addClass("has-error");var a=r.next();a&&a.hasClass("w5c-error")||r.after('<span class="w5c-error">'+t[0]+"</span>")},this.defaultRemoveError=function(e){var t=angular.element(e),r=n(t);!this.isEmpty(r)&&r.hasClass("has-error")&&r.removeClass("has-error");var i=t.next();i.hasClass&&i.hasClass("w5c-error")&&i.remove()},this.options={blurTrig:!1,showError:!0,removeError:!0}};r.prototype={constructor:r,config:function(e){this.options=angular.extend(this.options,e)},setRules:function(e){this.rules=angular.extend(this.rules,e)},getErrorMessage:function(t,n){var r=null;switch(this.isEmpty(this.rules[n.name])||this.isEmpty(this.rules[n.name][t])||(r=this.rules[n.name][t]),t){case"maxlength":return null!==r?r.replace("{maxlength}",n.getAttribute("ng-maxlength")):e.maxlength.replace("{maxlength}",n.getAttribute("ng-maxlength"));case"minlength":return null!==r?r.replace("{minlength}",n.getAttribute("ng-minlength")):e.minlength.replace("{minlength}",n.getAttribute("ng-minlength"));case"max":return null!==r?r.replace("{max}",n.getAttribute("max")):e.max.replace("{max}",n.getAttribute("max"));case"min":return null!==r?r.replace("{min}",n.getAttribute("min")):e.min.replace("{min}",n.getAttribute("min"));default:if(null!==r)return r;if(null===e[t])throw new Error("该验证规则("+t+")默认错误信息没有设置！");return e[t]}},getErrorMessages:function(e,t){var n=[];for(var r in t)if(t[r]){var i=this.getErrorMessage(r,e);n.push(i)}return n},showError:function(e,t,n){var r=angular.extend({},this.options,n);return angular.element(e).removeClass("valid").addClass("error"),r.showError!==!1?angular.isFunction(r.showError)?r.showError(e,t):r.showError===!0?this.defaultShowError(e,t):void 0:void 0},removeError:function(e,t){var n=angular.extend({},this.options,t);return angular.element(e).removeClass("error").addClass("valid"),n.removeError!==!1?angular.isFunction(n.removeError)?n.removeError(e):n.removeError===!0?this.defaultRemoveError(e):void 0:void 0}};var i=new r;this.config=function(e){i.config(e)},this.setRules=function(e){i.setRules(e)},this.setDefaultRules=function(t){e=angular.extend(e,t)},this.$get=function(){return i}}]),function(){angular.module("w5c.validator").directive("w5cFormValidate",["$parse","w5cValidator","$timeout",function(e,t,n){return{require:["w5cFormValidate","^?form"],controller:["$scope",function(e){this.needBindKeydown=!1,this.form=null,this.formElement=null,this.submitSuccessFn=null,this.validElements=[],this.init=function(e,t){this.form=e,this.formElement=t,this.formName=t.attr("name")},this.doValidate=function(t,n){angular.isFunction(this.form.doValidate)&&this.form.doValidate(),this.form.$valid&&angular.isFunction(t)&&e.$apply(function(){t(e,{$event:n})})},this.removeElementValidation=function(e){var n=this.validElements.indexOf(e);n>=0&&(this.validElements.splice(n,1),t.isEmpty(this.form.$errors)||this.doValidate(angular.noop))},this.removeError=function(e){this.form.$errors=[],t.removeError(e,this.options)},this.initElement=function(r){var i=angular.element(r),a=this;if(t.elemTypes.toString().indexOf(r.type)>-1&&!t.isEmpty(r.name)&&!/^\d/.test(r.name)){var o=i.attr("disabled");if(o&&("true"===o||"disabled"===o))return;if(!(this.validElements.indexOf(r.name)<0))return;this.validElements.push(r.name);var l=this.formName+"."+r.name+".$viewValue";e.$watch(l,function(){a.removeError(i)},!0),a.options.blurTrig&&i.bind("blur",function(){if(a.options.blurTrig){var e=this,r=angular.element(this);n(function(){if(a.form[e.name].$valid)t.removeError(r,a.options);else{var n=t.getErrorMessages(e,a.form[e.name].$error);t.showError(r,n,a.options)}},50)}})}}}],link:function(r,i,a,o){var l=o[0],s=o[1],c=i[0],u=e(a.w5cSubmit),d=r.$eval(a.w5cFormValidate);if(!a.name)throw Error("form must has name when use w5cFormValidate");l.init(s,i,a),a.w5cFormValidate&&r.$watch(a.w5cFormValidate,function(e){e&&(l.options=d=angular.extend({},t.options,e))},!0),l.options=d=angular.extend({},t.options,d);for(var f=0;f<c.length;f++){var p=c[f];l.initElement(p)}var g=function(){for(var e=[],n=0;n<c.length;n++){var i=c[n].name;if(i&&l.validElements.indexOf(i)>=0){var a=c[i];if(s[i]&&a&&t.elemTypes.toString().indexOf(a.type)>-1&&!t.isEmpty(a.name)){if(s[i].$valid){angular.element(a).removeClass("error").addClass("valid");continue}var o=t.getErrorMessages(a,s[a.name].$error);e.push(o[0]),t.removeError(a,d),t.showError(a,o,d)}}}s.$errors=!t.isEmpty(e)&&e.length>0?e:[],r.$$phase||r.$apply(s.$errors)};s&&(s.doValidate=g,s.reset=function(){n(function(){s.$setPristine();for(var e=0;e<c.length;e++){var n=c[e],r=angular.element(n);t.removeError(r,d)}})}),a.w5cSubmit&&angular.isFunction(u)&&(i.bind("submit",function(e){g(),s.$valid&&angular.isFunction(u)&&r.$apply(function(){u(r,{$event:e})})}),l.needBindKeydown=!0),l.needBindKeydown&&i.bind("keydown keypress",function(e){if(13===e.which){var t=document.activeElement;if(t.type&&"textarea"!==t.type){var n=i.find("button");n&&n[0]&&n[0].focus(),t.focus(),g(),e.preventDefault(),s.$valid&&angular.isFunction(l.submitSuccessFn)&&r.$apply(function(){l.submitSuccessFn(r,{$event:e})})}}})}}}]).directive("w5cFormSubmit",["$parse",function(e){return{require:"^w5cFormValidate",link:function(t,n,r,i){var a=e(r.w5cFormSubmit);n.bind("click",function(e){i.doValidate(a,e)}),i.needBindKeydown=!0,i.submitSuccessFn=a}}}]).directive("w5cRepeat",[function(){"use strict";return{require:["ngModel","^w5cFormValidate"],link:function(e,t,n,r){var i=t.inheritedData("$formController")[n.w5cRepeat],a=r[0],o=r[1];a.$parsers.push(function(e){return e===i.$viewValue?a.$setValidity("repeat",!0):a.$setValidity("repeat",!1),e}),i.$parsers.push(function(e){return a.$setValidity("repeat",e===a.$viewValue),e===a.$viewValue&&o.removeError(t),e})}}}]).directive("w5cCustomizer",["$timeout",function(){"use strict";return{require:["^form","ngModel"],link:function(e,t,n,r){var i=r[1],a=function(){var t=e.$eval(n.w5cCustomizer);t===!0?i.$setValidity("customizer",!0):i.$setValidity("customizer",!1)},o=r[0][n.associate];o&&o.$viewChangeListeners.push(a),i.$viewChangeListeners.push(a)}}}]).directive("w5cUniqueCheck",["$timeout","$http","w5cValidator",function(e,t,n){return{require:["ngModel","?^w5cFormValidate","?^form"],link:function(e,r,i,a){var o=a[0],l=a[1],s=a[2],c=function(){var a=e.$eval(i.w5cUniqueCheck),c=a.url,u=a.isExists;t.get(c).success(function(e){var t=u===!1?"true"==e||1==e:!("true"==e||1==e);if(o.$setValidity("w5cuniquecheck",t),!t){var i=n.getErrorMessage("w5cuniquecheck",r[0]);n.showError(r[0],[i],l.options),s.$errors?s.$errors.unshift(i):s.$errors=[i]}})};o.$viewChangeListeners.push(function(){s.$errors=[],o.$setValidity("w5cuniquecheck",!0),(!o.$invalid||o.$error.w5cuniquecheck)&&o.$dirty&&c()});var u=e.$eval(i.ngModel);if(u){if(o.$invalid&&!o.$error.w5cuniquecheck)return;c()}}}}]).directive("w5cDynamicName",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$name=e.$eval(n.w5cDynamicName),t.attr("name",e.$eval(n.w5cDynamicName));var i=t.controller("form")||{$addControl:angular.noop};i.$addControl(r)}}}]).directive("w5cDynamicElement",["$timeout",function(e){return{restrict:"A",require:["ngModel","?^w5cFormValidate","?^form"],link:function(t,n,r,i){var a=n[0].name,o=i[2];if(a){n.on("$destroy",function(){i[1].removeElementValidation(a)}),o[a]||o.$addControl(i[0]);var l=!1;i[2].$errors&&i[2].$errors.length>0&&(l=!0),i[1].initElement(n[0]),l&&e(function(){i[1].doValidate(angular.noop)})}}}}])}(),!function(){function e(e,t){window.XMLHttpRequest.prototype[e]=t(window.XMLHttpRequest.prototype[e])}function t(e,t,n){try{Object.defineProperty(e,t,{get:n})}catch(r){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var n=function(e){if(!e.__listeners){e.upload||(e.upload={}),e.__listeners=[];var t=e.upload.addEventListener;e.upload.addEventListener=function(n,r){e.__listeners[n]=r,t&&t.apply(this,arguments)}}};e("open",function(e){return function(t,r,i){n(this),this.__url=r;try{e.apply(this,[t,r,i])}catch(a){a.message.indexOf("Access is denied")>-1&&(this.__origError=a,e.apply(this,[t,"_fix_for_ie_crossdomain__",i]))}}}),e("getResponseHeader",function(e){return function(t){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(t):null==e?null:e.apply(this,[t])}}),e("getAllResponseHeaders",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==e?null:e.apply(this)}}),e("abort",function(e){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==e?null:e.apply(this)}}),e("setRequestHeader",function(e){return function(t,r){if("__setXHR_"===t){n(this);var i=r(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[t]=r,e.apply(this,arguments)}}),e("send",function(e){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var r=arguments[0],i={url:n.__url,jsonp:!1,cache:!0,complete:function(e,r){e&&angular.isString(e)&&-1!==e.indexOf("#2174")&&(e=null),n.__completed=!0,!e&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!e&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===e&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==r.status&&t(n,"status",function(){return 0===r.status&&e&&"abort"!==e?500:r.status}),void 0!==r.statusText&&t(n,"statusText",function(){return r.statusText}),t(n,"readyState",function(){return 4}),void 0!==r.response&&t(n,"response",function(){return r.response});var i=r.responseText||(e&&0===r.status&&"abort"!==e?e:void 0);t(n,"responseText",function(){return i}),t(n,"response",function(){return i}),e&&t(n,"err",function(){return e}),n.__fileApiXHR=r,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},progress:function(e){if(e.target=n,n.__listeners.progress&&n.__listeners.progress(e),n.__total=e.total,n.__loaded=e.loaded,e.total===e.loaded){var t=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},t.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};i.data={},i.files={};for(var a=0;a<r.data.length;a++){var o=r.data[a];null!=o.val&&null!=o.val.name&&null!=o.val.size&&null!=o.val.type?i.files[o.key]=o.val:i.data[o.key]=o.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(i)},1)}else{if(this.__origError)throw this.__origError;e.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(e,t,n){t.__isFileAPIBlobShim&&(t=t.data[0]),this.data.push({key:e,val:t,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(e){return{data:e,__isFileAPIBlobShim:!0}}}}(),function(){function e(e){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function t(){try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(e)return!0}catch(t){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function n(e){var t=0,n=0;if(window.jQuery)return jQuery(e).offset();if(e.offsetParent)do t+=e.offsetLeft-e.scrollLeft,n+=e.offsetTop-e.scrollTop,e=e.offsetParent;while(e);return{left:t,top:n}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=t(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var r,i,a,o,l,s=document.createElement("script"),c=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)r=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)i=window.FileAPI.jsPath;else for(a=0;a<c.length;a++)if(l=c[a].src,o=l.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),o>-1){i=l.substring(0,o+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=i),s.setAttribute("src",r||i+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(s)}FileAPI.ngfFixIE=function(r,i,a){if(!t())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var o=function(){var t=i.parent();r.attr("disabled")?t&&t.removeClass("js-fileapi-wrapper"):(i.attr("__ngf_flash_")||(i.unbind("change"),i.unbind("click"),i.bind("change",function(e){l.apply(this,[e]),a.apply(this,[e])}),i.attr("__ngf_flash_","true")),t.addClass("js-fileapi-wrapper"),e(r)||(t.css("position","absolute").css("top",n(r[0]).top+"px").css("left",n(r[0]).left+"px").css("width",r[0].offsetWidth+"px").css("height",r[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",r.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),i.css("width",r[0].offsetWidth+"px").css("height",r[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))};r.bind("mouseenter",o);var l=function(e){for(var t=FileAPI.getFiles(e),n=0;n<t.length;n++)void 0===t[n].size&&(t[n].size=0),void 0===t[n].name&&(t[n].name="file"),void 0===t[n].type&&(t[n].type="undefined");e.target||(e.target={}),e.target.files=t,e.target.files!==t&&(e.__files_=t),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null}}},FileAPI.disableFileInput=function(e,t){t?e.removeClass("js-fileapi-wrapper"):e.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){
var e=this,t=!1;this.listeners={},this.addEventListener=function(t,n){e.listeners[t]=e.listeners[t]||[],e.listeners[t].push(n)},this.removeEventListener=function(t,n){e.listeners[t]&&e.listeners[t].splice(e.listeners[t].indexOf(n),1)},this.dispatchEvent=function(t){var n=e.listeners[t.type];if(n)for(var r=0;r<n.length;r++)n[r].call(e,t)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(t,n){var r={type:t,target:e,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){t||(t=!0,e.onloadstart&&e.onloadstart(n("loadstart",r)));var i;"load"===r.type?(e.onloadend&&e.onloadend(n("loadend",r)),i=n("load",r),e.onload&&e.onload(i),e.dispatchEvent(i)):"progress"===r.type?(i=n("progress",r),e.onprogress&&e.onprogress(i),e.dispatchEvent(i)):(i=n("error",r),e.onerror&&e.onerror(i),e.dispatchEvent(i))};this.readAsDataURL=function(e){FileAPI.readAsDataURL(e,r)},this.readAsText=function(e){FileAPI.readAsText(e,r)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function r(r){function i(e){c.notify&&c.notify(e),u.progressFunc&&n(function(){u.progressFunc(e)})}function l(e){return null!=r._start&&o?{loaded:e.loaded+r._start,total:r._file&&r._file.size||e.total,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function s(){e(r).then(function(e){o&&r._chunkSize&&!r._finished&&r._file?(i({loaded:r._end,total:r._file&&r._file.size,config:r,type:"progress"}),a.upload(r,!0)):(r._finished&&delete r._finished,c.resolve(e))},function(e){c.reject(e)},function(e){c.notify(e)})}r.method=r.method||"POST",r.headers=r.headers||{};var c=r._deferred=r._deferred||t.defer(),u=c.promise;return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i(l(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i(l(e)))},!1))}}),o?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,s()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then(function(e){r._start=r.resumeSizeResponseReader?r.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),s()},function(e){throw e}):r.resumeSize?r.resumeSize().then(function(e){r._start=e,s()},function(e){throw e}):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),s()):s(),u.success=function(e){return u.then(function(t){e(t.data,t.status,t.headers,r)}),u},u.error=function(e){return u.then(null,function(t){e(t.data,t.status,t.headers,r)}),u},u.progress=function(e){return u.progressFunc=e,u.then(null,null,function(t){e(t)}),u},u.abort=u.pause=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),u},u.xhr=function(e){return r.xhrFn=function(t){return function(){t&&t.apply(u,arguments),e.apply(u,arguments)}}(r.xhrFn),u},a.promisesCount++,u["finally"](function(){a.promisesCount--}),u}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var a=this;a.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var o=this.isResumeSupported();this.isUploadInProgress=function(){return a.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&o){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function l(t,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(i,r);else if(a.isFile(r)){var o=n(r,t),s=i.split(",");s[1]&&(o.ngfName=s[1].replace(/^\s+|\s+$/g,""),i=s[0]),e._fileKey=e._fileKey||i,t.append(i,o,o.ngfName||o.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+i;r.$$ngfCircularDetection=!0;try{for(var c in r)if(r.hasOwnProperty(c)&&"$$ngfCircularDetection"!==c){var u=null==e.objectKey?"[i]":e.objectKey;r.length&&parseInt(c)>-1&&(u=null==e.arrayKey?u:e.arrayKey),l(t,r[c],i+u.replace(/[ik]/g,c))}}finally{delete r.$$ngfCircularDetection}}else t.append(i,r)}function s(){e._chunkSize=a.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,r=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var i=t[n];e.formDataAppender?e.formDataAppender(r,n,i):l(r,i,n)}return r})}return t||(e=i(e)),e._isDigested||(e._isDigested=!0,s()),r(e)},this.http=function(t){return t=i(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=a.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,r(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),n=e.headers("content-type")||"image/WebP",i=new window.Blob([t],{type:n});r.resolve(i)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,r,i){function a(e,t,n){var i=[s.emptyPromise()];return angular.forEach(e,function(r,a){0===r.type.indexOf("image/jpeg")&&s.attrGetter("ngfFixOrientation",t,n,{$file:r})&&i.push(s.happyPromise(s.applyExifRotation(r),r).then(function(t){e.splice(a,1,t)}))}),r.all(i)}function o(e,t,n){var i=s.attrGetter("ngfResize",t,n);if(!i||!s.isResizeSupported()||!e.length)return s.emptyPromise();if(!(i instanceof Function))return l(i,e,t,n);var a=r.defer();i(e).then(function(r){l(r,e,t,n).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})}function l(e,t,n,i){function a(r,a){if(0===r.type.indexOf("image")){if(e.pattern&&!s.validatePattern(r,e.pattern))return;var l=s.resize(r,e.width,e.height,e.quality,e.type,e.ratio,e.centerCrop,function(e,t){return s.attrGetter("ngfResizeIf",n,i,{$width:e,$height:t,$file:r})},e.restoreExif!==!1);o.push(l),l.then(function(e){t.splice(a,1,e)},function(e){r.$error="resize",r.$errorParam=(e?(e.message?e.message:e)+": ":"")+(r&&r.name)})}}for(var o=[s.emptyPromise()],l=0;l<t.length;l++)a(t[l],l);return r.all(o)}var s=i;return s.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=s.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},s.attrGetter=function(t,n,r,i){var a=this.getAttrWithDefaults(n,t);if(!r)return a;try{return i?e(a)(r,i):e(a)(r)}catch(o){if(t.search(/min|max|pattern/i))return a;throw o}},s.shouldUpdateOn=function(e,t,n){var r=s.attrGetter("ngModelOptions",t,n);return r&&r.updateOn?r.updateOn.split(" ").indexOf(e)>-1:!0},s.emptyPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},s.rejectPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},s.happyPromise=function(e,n){var i=r.defer();return e.then(function(e){i.resolve(e)},function(e){t(function(){throw e}),i.resolve(n)}),i.promise},s.updateModel=function(n,r,i,l,c,u,d){function f(a,o,c,d,f){r.$$ngfPrevValidFiles=a,r.$$ngfPrevInvalidFiles=o;var p=a&&a.length?a[0]:null,g=o&&o.length?o[0]:null;n&&(s.applyModelValidation(n,a),n.$setViewValue(f?p:a)),l&&e(l)(i,{$files:a,$file:p,$newFiles:c,$duplicateFiles:d,$invalidFiles:o,$invalidFile:g,$event:u});var h=s.attrGetter("ngfModelInvalid",r);h&&t(function(){e(h).assign(i,f?g:o)}),t(function(){})}function p(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}function t(t){var n;for(n=0;n<b.length;n++)if(e(t,b[n]))return!0;for(n=0;n<y.length;n++)if(e(t,y[n]))return!0;return!1}if(c){v=[],$=[];for(var n=0;n<c.length;n++)t(c[n])?$.push(c[n]):v.push(c[n])}}function g(e){return angular.isArray(e)?e:[e]}function h(){x=[],w=[],angular.forEach(v,function(e){e.$error?w.push(e):x.push(e)})}function m(){function e(){t(function(){f(_?b.concat(x):x,_?y.concat(w):w,c,$,E)},A&&A.debounce?A.debounce.change||A.debounce:0)}o(S?v:x,r,i).then(function(){S?s.validate(v,b.length,n,r,i).then(function(){h(),e()}):e()},function(e){throw"Could not resize files "+e})}var v,b,y,$=[],w=[],x=[];b=r.$$ngfPrevValidFiles||[],y=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(b=g(n.$modelValue));var _=s.attrGetter("ngfKeep",r,i);v=(c||[]).slice(0),("distinct"===_||s.attrGetter("ngfKeepDistinct",r,i)===!0)&&p(r,i);var E=!_&&!s.attrGetter("ngfMultiple",r,i)&&!s.attrGetter("multiple",r);if(!_||v.length){s.attrGetter("ngfBeforeModelChange",r,i,{$files:c,$file:c&&c.length?c[0]:null,$newFiles:v,$duplicateFiles:$,$event:u});var S=s.attrGetter("ngfValidateAfterResize",r,i),A=s.attrGetter("ngModelOptions",r,i);s.validate(v,b.length,n,r,i).then(function(){d?f(v,[],c,$,E):(A&&A.allowInvalid||S?x=v:h(),s.attrGetter("ngfFixOrientation",r,i)&&s.isExifSupported()?a(x,r,i).then(function(){m()}):m())})}},s}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function a(e,t,n,r,a,l,s,c){function u(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return y("ngfChange")||y("ngfSelect")}function f(t){if(c.shouldUpdateOn("change",n,e)){for(var i=t.__files_||t.target&&t.target.files,a=[],o=0;o<i.length;o++)a.push(i[o]);c.updateModel(r,n,e,d(),a.length?a:null,t)}}function p(e){if(t!==e)for(var n=0;n<t[0].attributes.length;n++){var r=t[0].attributes[n];"type"!==r.name&&"class"!==r.name&&"style"!==r.name&&((null==r.value||""===r.value)&&("required"===r.name&&(r.value="required"),"multiple"===r.name&&(r.value="multiple")),e.attr(r.name,"id"===r.name?"ngf-"+r.value:r.value))}}function g(){if(u())return t;var e=angular.element('<input type="file">');p(e);var n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),o.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}function h(n){if(t.attr("disabled"))return!1;if(!y("ngfSelectDisabled",e)){var r=m(n);if(null!=r)return r;v(n);try{u()||document.body.contains(x[0])||(o.push({el:t,ref:x.parent()}),document.body.appendChild(x.parent()[0]),x.bind("change",f))}catch(a){}return i(navigator.userAgent)?setTimeout(function(){x[0].click()},0):x[0].click(),!1}}function m(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if("touchstart"===e.type)return w=t?t[0].clientY:0,!0;if(e.stopPropagation(),e.preventDefault(),"touchend"===e.type){var n=t?t[0].clientY:0;if(Math.abs(n-w)>20)return!1}}function v(t){c.shouldUpdateOn("click",n,e)&&x.val()&&(x.val(null),c.updateModel(r,n,e,d(),null,t,!0))}function b(e){if(x&&!x.attr("__ngf_ie10_Fix_")){if(!x[0].parentNode)return void(x=null);e.preventDefault(),e.stopPropagation(),x.unbind("click");var t=x.clone();return x.replaceWith(t),x=t,x.attr("__ngf_ie10_Fix_","true"),x.bind("change",f),x.bind("click",b),x[0].click(),!1}x.removeAttr("__ngf_ie10_Fix_")}var y=function(e,t){return c.attrGetter(e,n,t)};c.registerModelChangeValidator(r,n,e);var $=[];$.push(e.$watch(y("ngfMultiple"),function(){x.attr("multiple",y("ngfMultiple",e))})),$.push(e.$watch(y("ngfCapture"),function(){x.attr("capture",y("ngfCapture",e))})),$.push(e.$watch(y("ngfAccept"),function(){x.attr("accept",y("ngfAccept",e))})),n.$observe("accept",function(){x.attr("accept",y("accept"))}),$.push(function(){n.$$observers&&delete n.$$observers.accept});var w=0,x=t;u()||(x=g()),x.bind("change",f),u()?t.bind("click",v):t.bind("click touchstart touchend",h),-1!==navigator.appVersion.indexOf("MSIE 10")&&x.bind("click",b),r&&r.$formatters.push(function(e){return(null==e||0===e.length)&&x.val()&&x.val(null),e}),e.$on("$destroy",function(){u()||x.parent().remove(),angular.forEach($,function(e){e()})}),l(function(){for(var e=0;e<o.length;e++){var t=o[e];document.body.contains(t.el[0])||(o.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,x,f)}var o=[];return{restrict:"AEC",require:"?ngModel",link:function(i,o,l,s){a(i,o,l,s,e,t,n,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,r,i,a,o,l,s){function c(e){var o=t.attrGetter("ngfNoObjectUrl",a,r);t.dataUrl(e,o)["finally"](function(){n(function(){var t=(o?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;s?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}n(function(){var n=r.$watch(a[o],function(n){var r=l;if("ngfThumbnail"===o&&(r||(r={width:i[0].clientWidth,height:i[0].clientHeight}),0===r.width&&window.getComputedStyle)){var a=getComputedStyle(i[0]);r={width:parseInt(a.width.slice(0,-2)),height:parseInt(a.height.slice(0,-2))}}return angular.isString(n)?(i.removeClass("ng-hide"),s?i.css("background-image","url('"+n+"')"):i.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(i[0]))||s&&0!==n.type.indexOf("image")?i.addClass("ng-hide"):r&&t.isResizeSupported()?t.resize(n,r.width,r.height,r.quality).then(function(e){c(e)},function(e){throw e}):c(n))});r.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,function(n){r.dataUrl(n,!0)["finally"](function(){if(i++,i===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var a=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(a)return a;var o=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var a;try{a=n.createObjectURL(e)}catch(l){return void t(function(){e.$ngfBlobUrl="",o.reject()})}t(function(){if(e.$ngfBlobUrl=a,a){o.resolve(a,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:a,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var l=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(l.url),r.blobUrlsTotalSize-=l.size}}})}else{var s=new FileReader;s.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,o.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},s.onerror=function(){t(function(){e.$ngfDataUrl="",o.reject()})},s.readAsDataURL(e)}}else t(function(){e[i?"$ngfDataUrl":"$ngfBlobUrl"]="",o.reject()})}),a=i?e.$$ngfDataUrlPromise=o.promise:e.$$ngfBlobUrlPromise=o.promise,a["finally"](function(){delete e[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),a},r}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfSrc",e.attrGetter("ngfResize",a,r),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){t(e,n,r,i,a,"ngfBackground",e.attrGetter("ngfResize",a,r),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,a){var o=e.attrGetter("ngfSize",a,r);t(e,n,r,i,a,"ngfThumbnail",o,e.attrGetter("ngfAsBackground",a,r))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var a=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!a?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&a?i?t.trustAsResourceUrl(a):a:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var a=0;a<i.length;a++){var o=r(i[a]);o.regexp?(t+="("+o.regexp+")",a<i.length-1&&(t+="|")):n=n.concat(o.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function i(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var a=e;return a.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var a=new RegExp(n.regexp,"i");i=null!=e.type&&a.test(e.type)||null!=e.name&&a.test(e.name)}for(var o=n.excludes.length;o--;){var l=new RegExp(n.excludes[o],"i");i=i&&(null==e.type||l.test(e.type))&&(null==e.name||l.test(e.name))}return i},a.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},a.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(r){e.$dirty&&(r&&!angular.isArray(r)&&(r=[r]),a.validate(r,0,e,t,n).then(function(){a.applyModelValidation(e,r)}))})},a.applyModelValidation=function(e,t){i(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},a.getValidationAttr=function(e,t,n,r,i){var o="ngf"+n[0].toUpperCase()+n.substr(1),l=a.attrGetter(o,e,t,{$file:i});if(null==l&&(l=a.attrGetter("ngfValidate",e,t,{$file:i}))){var s=(r||n).split(".");l=l[s[0]],s.length>1&&(l=l&&l[s[1]])}return l},a.validate=function(e,n,r,i,o){function l(t,n,l){if(e){for(var s=e.length,c=null;s--;){var u=e[s];if(u){var d=a.getValidationAttr(i,o,t,n,u);null!=d&&(l(u,d,s)||(u.$error=t,(u.$errorMessages=u.$errorMessages||{})[t]=!0,u.$errorParam=d,e.splice(s,1),c=!1))}}null!==c&&r.$ngfValidations.push({name:t,valid:c})}}function s(n,l,s,u,d){function f(e,t,r){null!=r?u(t,r).then(function(i){d(i,r)?e.resolve():(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=r,e.reject())},function(){c("ngfValidateForce",{$file:t})?(t.$error=n,(t.$errorMessages=t.$errorMessages||{})[n]=!0,t.$errorParam=r,e.reject()):e.resolve()}):e.resolve()}var p=[a.emptyPromise()];return e?(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var r=t.defer();return p.push(r.promise),!s||null!=e.type&&0===e.type.search(s)?void("dimensions"===n&&null!=a.attrGetter("ngfDimensions",i)?a.imageDimensions(e).then(function(t){f(r,e,c("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){r.reject()}):"duration"===n&&null!=a.attrGetter("ngfDuration",i)?a.mediaDuration(e).then(function(t){f(r,e,c("ngfDuration",{$file:e,$duration:t}))},function(){r.reject()}):f(r,e,a.getValidationAttr(i,o,n,l,e))):void r.resolve()}),t.all(p).then(function(){r.$ngfValidations.push({name:n,valid:!0})},function(){r.$ngfValidations.push({name:n,valid:!1})})):void 0}r=r||{},r.$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(e){e.valid=!0});var c=function(e,t){return a.attrGetter(e,i,o,t)};if(null==e||0===e.length)return a.emptyPromise(r);e=void 0===e.length?[e]:e.slice(0),l("maxFiles",null,function(e,t,r){return t>n+r}),l("pattern",null,a.validatePattern),l("minSize","size.min",function(e,t){return e.size+.1>=a.translateScalars(t)}),l("maxSize","size.max",function(e,t){return e.size-.1<=a.translateScalars(t)});var u=0;if(l("maxTotalSize",null,function(t,n){return u+=t.size,u>a.translateScalars(n)?(e.splice(0,e.length),!1):!0}),l("validateFn",null,function(e,t){return t===!0||null===t||""===t}),!e.length)return a.emptyPromise(r,r.$ngfValidations);var d=t.defer(),f=[];return f.push(a.happyPromise(s("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t}))),f.push(a.happyPromise(s("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t}))),f.push(a.happyPromise(s("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t}))),f.push(a.happyPromise(s("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t}))),f.push(a.happyPromise(s("dimensions",null,/image/,function(e,t){return a.emptyPromise(t)},function(e){return e}))),f.push(a.happyPromise(s("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-a.ratioToFloat(n[i]))<1e-4&&(r=!0);return r}))),f.push(a.happyPromise(s("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)<1e-4}))),f.push(a.happyPromise(s("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-a.ratioToFloat(t)>-1e-4}))),f.push(a.happyPromise(s("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=a.translateScalars(t)}))),f.push(a.happyPromise(s("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=a.translateScalars(t)}))),f.push(a.happyPromise(s("duration",null,/audio|video/,function(e,t){return a.emptyPromise(t)},function(e){return e}))),f.push(a.happyPromise(s("validateAsyncFn",null,null,function(e,t){return t},function(e){return e===!0||null===e||""===e}))),t.all(f).then(function(){d.resolve(r,r.$ngfValidations)})},a.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void i.reject("not image"):void a.dataUrl(e).then(function(t){function r(){var t=l[0].clientWidth,n=l[0].clientHeight;l.remove(),e.$ngfWidth=t,e.$ngfHeight=n,i.resolve({width:t,height:n})}function a(){l.remove(),i.reject("load error")}function o(){n(function(){l[0].parentNode&&(l[0].clientWidth?r():s>10?a():o())},1e3)}var l=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");l.on("load",r),l.on("error",a);var s=0;o(),angular.element(document.getElementsByTagName("body")[0]).append(l)},function(){i.reject("load error")})}),e.$ngfDimensionPromise=i.promise,e.$ngfDimensionPromise["finally"](function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},a.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void i.reject("not media"):void a.dataUrl(e).then(function(t){function r(){var t=l[0].duration;e.$ngfDuration=t,l.remove(),i.resolve(t)}function a(){l.remove(),i.reject("load error")}function o(){n(function(){l[0].parentNode&&(l[0].duration?r():s>10?a():o())},1e3)}var l=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");l.on("loadedmetadata",r),l.on("error",a);var s=0;o(),angular.element(document.body).append(l)},function(){i.reject("load error")})}),e.$ngfDurationPromise=i.promise,e.$ngfDurationPromise["finally"](function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},a}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,r=function(e,t,n,r,i){var a=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*a,height:t*a,marginX:e*a-n,marginY:t*a-r}},i=function(e,i,a,o,l,s,c,u){var d=t.defer(),f=document.createElement("canvas"),p=document.createElement("img");return p.onload=function(){if(null!=u&&u(p.width,p.height)===!1)return void d.reject("resizeIf");try{if(s){var e=n.ratioToFloat(s),t=p.width/p.height;e>t?(i=p.width,a=i/e):(a=p.height,i=a*e)}i||(i=p.width),a||(a=p.height);var g=r(p.width,p.height,i,a,c);f.width=Math.min(g.width,i),f.height=Math.min(g.height,a);var h=f.getContext("2d");h.drawImage(p,Math.min(0,-g.marginX/2),Math.min(0,-g.marginY/2),g.width,g.height),d.resolve(f.toDataURL(l||"image/WebP",o||.934))}catch(m){d.reject(m)}},p.onerror=function(){d.reject()},p.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,l=new Uint8Array(o);o--;)l[o]=a.charCodeAt(o);var s=new window.Blob([l],{type:i});return s.name=t,s.$ngfOrigSize=n,s},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,r,a,o,l,s,c,u,d){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var f=t.defer();return n.dataUrl(e,!0).then(function(t){i(t,r,a,o,l||e.type,s,c,u).then(function(r){if("image/jpeg"===e.type&&d)try{r=n.restoreExif(t,r)}catch(i){setTimeout(function(){throw i},1)}try{var a=n.dataUrltoBlob(r,e.name,e.size);f.resolve(a)}catch(i){f.reject(i)}},function(t){"resizeIf"===t&&f.resolve(e),f.reject(t)})},function(e){f.reject(e)}),f.promise},n}]),function(){function e(e,n,r,i,a,o,l,s,c,u){function d(){return n.attr("disabled")||v("ngfDropDisabled",e)}function f(t,n){s.updateModel(i,r,e,v("ngfChange")||v("ngfDrop"),t,n)}function p(t,n){if(!s.shouldUpdateOn(t,r,e)||!n)return s.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){i.push(n)});var a=[],o=[];if(i.length){angular.forEach(i,function(e){a.push(s.urlToBlob(e).then(function(e){o.push(e)}))});var l=u.defer();return u.all(a).then(function(){l.resolve(o)},function(e){l.reject(e)}),l.promise}return s.emptyPromise()}function g(e,t,n,r){var i=v("ngfDragOverClass",e,{$event:n}),a="dragover";if(angular.isString(i))a=i;else if(i&&(i.delay&&(w=i.delay),i.accept||i.reject)){var o=n.dataTransfer.items;if(null!=o&&o.length)for(var l=i.pattern||v("ngfPattern",e,{$event:n}),c=o.length;c--;){if(!s.validatePattern(o[c],l)){a=i.reject;break}a=i.accept}else a=i.accept}r(a)}function h(t,n,i,a){function o(e,t){var n=u.defer();if(null!=e)if(e.isDirectory){var r=[s.emptyPromise()];if(f){var i={type:"directory"};i.name=i.path=(t||"")+e.name+e.name,p.push(i)}var a=e.createReader(),l=[],h=function(){a.readEntries(function(i){try{i.length?(l=l.concat(Array.prototype.slice.call(i||[],0)),h()):(angular.forEach(l.slice(0),function(n){p.length<=c&&d>=g&&r.push(o(n,(t?t:"")+e.name+"/"))}),u.all(r).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(a){n.reject(a)}},function(e){n.reject(e)})};h()}else e.file(function(e){try{e.path=(t?t:"")+e.name,f&&(e=s.rename(e,e.path)),p.push(e),g+=e.size,n.resolve()}catch(r){n.reject(r)}},function(e){n.reject(e)});return n.promise}var c=s.getValidationAttr(r,e,"maxFiles")||Number.MAX_VALUE,d=s.getValidationAttr(r,e,"maxTotalSize")||Number.MAX_VALUE,f=v("ngfIncludeDir",e),p=[],g=0,h=[s.emptyPromise()];if(t&&t.length>0&&"file"!==l.protocol())for(var m=0;m<t.length;m++){if(t[m].webkitGetAsEntry&&t[m].webkitGetAsEntry()&&t[m].webkitGetAsEntry().isDirectory){var b=t[m].webkitGetAsEntry();if(b.isDirectory&&!i)continue;null!=b&&h.push(o(b))}else{var y=t[m].getAsFile();null!=y&&(p.push(y),g+=y.size)}if(p.length>c||g>d||!a&&p.length>0)break}else if(null!=n)for(var $=0;$<n.length;$++){var w=n.item($);if((w.type||w.size>0)&&(p.push(w),g+=w.size),p.length>c||g>d||!a&&p.length>0)break}var x=u.defer();return u.all(h).then(function(){if(a||f||!p.length)x.resolve(p);else{for(var e=0;p[e]&&"directory"===p[e].type;)e++;x.resolve([p[e]])}},function(e){x.reject(e)}),x.promise}var m=t(),v=function(e,t,n){return s.attrGetter(e,r,t,n)};if(v("dropAvailable")&&o(function(){e[v("dropAvailable")]?e[v("dropAvailable")].value=m:e[v("dropAvailable")]=m}),!m)return void(v("ngfHideOnDropNotAvailable",e)===!0&&n.css("display","none"));null==v("ngfSelect")&&s.registerModelChangeValidator(i,r,e);var b,y=null,$=a(v("ngfStopPropagation")),w=1;n[0].addEventListener("dragover",function(t){if(!d()&&s.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),$(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}o.cancel(y),b||(b="C",g(e,r,t,function(r){b=r,n.addClass(b),v("ngfDrag",e,{$isDragging:!0,$class:b,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),$(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&s.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),$(e)&&t.stopPropagation(),y=o(function(){b&&n.removeClass(b),b=null,v("ngfDrag",e,{$isDragging:!1,$event:t})},w||100))},!1),n[0].addEventListener("drop",function(t){if(!d()&&s.shouldUpdateOn("drop",r,e)){t.preventDefault(),$(e)&&t.stopPropagation(),b&&n.removeClass(b),b=null;var i,a=t.dataTransfer.items;try{i=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html");
}catch(o){}h(a,t.dataTransfer.files,v("ngfAllowDir",e)!==!1,v("multiple")||v("ngfMultiple",e)).then(function(e){e.length?f(e,t):p("dropUrl",i).then(function(e){f(e,t)})})}},!1),n[0].addEventListener("paste",function(t){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&s.shouldUpdateOn("paste",r,e)){var n=[],i=t.clipboardData||t.originalEvent.clipboardData;if(i&&i.items)for(var a=0;a<i.items.length;a++)-1!==i.items[a].type.indexOf("image")&&n.push(i.items[a].getAsFile());n.length?f(n,t):p("pasteUrl",i).then(function(e){f(e,t)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(t,n,r,i,a,o){return{restrict:"AEC",require:"?ngModel",link:function(l,s,c,u){e(l,s,c,u,t,n,r,i,a,o)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,a,o){if(t()){var l=e(r.attrGetter("ngfDropAvailable",o));n(function(){l(i),l.assign&&l.assign(i,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:return e.transform(0,-1,1,0,0,n)}}function r(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;r>i;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}var i=e;return i.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&i.isResizeSupported()},i.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,a=2;i>a;){var o=r.getUint16(a,!1);if(a+=2,65505===o){if(1165519206!==r.getUint32(a+=2,!1))return n.resolve(t);var l=18761===r.getUint16(a+=6,!1);a+=r.getUint32(a+4,l);var s=r.getUint16(a,l);a+=2;for(var c=0;s>c;c++)if(274===r.getUint16(a+12*c,l)){var u=r.getUint16(a+12*c+8,l);return u>=2&&8>=u&&(r.setUint16(a+12*c+8,1,l),t.fixedArrayBuffer=e.target.result),t.orientation=u,n.resolve(t)}}else{if(65280!==(65280&o))break;a+=r.getUint16(a,!1)}}return n.resolve(t)},n.promise},i.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return i.emptyPromise(e);var a=t.defer();return i.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?a.resolve(e):void i.dataUrl(e,!0).then(function(o){var l=document.createElement("canvas"),s=document.createElement("img");s.onload=function(){try{l.width=t.orientation>4?s.height:s.width,l.height=t.orientation>4?s.width:s.height;var o=l.getContext("2d");n(o,t.orientation,s.width,s.height),o.drawImage(s,0,0);var c=l.toDataURL(e.type||"image/WebP",.934);c=i.restoreExif(r(t.fixedArrayBuffer),c);var u=i.dataUrltoBlob(c,e.name);a.resolve(u)}catch(d){return a.reject(d)}},s.onerror=function(){a.reject()},s.src=o},function(e){a.reject(e)})},function(e){a.reject(e)}),a.promise},i.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,r,i,a,o="",l="",s="",c=0;do t=e[c++],n=e[c++],l=e[c++],r=t>>2,i=(3&t)<<4|n>>4,a=(15&n)<<2|l>>6,s=63&l,isNaN(n)?a=s=64:isNaN(l)&&(s=64),o=o+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(s),t=n=l="",r=i=a=s="";while(c<e.length);return o},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],255===t[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),a=r.slice(0,i),o=r.slice(i),l=a;return l=l.concat(t),l=l.concat(o)},n.slice2Segments=function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=256*e[t+2]+e[t+3],i=t+r+2,a=e.slice(t,i);n.push(a),t=i}if(t>e.length)break}return n},n.decode64=function(e){var t,n,r,i,a,o="",l="",s=0,c=[],u=/[^A-Za-z0-9\+\/\=]/g;u.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do r=this.KEY_STR.indexOf(e.charAt(s++)),i=this.KEY_STR.indexOf(e.charAt(s++)),a=this.KEY_STR.indexOf(e.charAt(s++)),l=this.KEY_STR.indexOf(e.charAt(s++)),t=r<<2|i>>4,n=(15&i)<<4|a>>2,o=(3&a)<<6|l,c.push(t),64!==a&&c.push(n),64!==l&&c.push(o),t=n=o="",r=i=a=l="";while(s<e.length);return c},n.restore(e,t)},i}]),angular.module("objectTable",[]).directive("contenteditable",function(){return{restrict:"A",require:["ngModel","^objectTable"],link:function(e,t,n,r){var i=r[0],a=r[1];i.$render=function(){t.html(i.$viewValue||"")},t.bind("change blur",function(){var n=i.$viewValue.toString(),r=t.text();n!==r&&(e.$apply(function(){i.$setViewValue(r)}),a.onEdit&&"function"==typeof a.onEdit&&a.onEdit({$oldValue:n,$newValue:r}))})}}}),angular.module("objectTable").directive("objectTable",["$compile","$interpolate",function(e,t){return{restrict:"A",replace:!0,templateUrl:"/src/templates/common.html",controller:"objectTableCtrl",controllerAs:"ctrl",transclude:!0,scope:{data:"=",display:"=?",resize:"=?",paging:"=?",fromUrl:"@",sortingType:"@?sorting",editable:"&?",onEdit:"&?",select:"@?",selectedModel:"=?",dragColumns:"=?",addBtn:"="},compile:function(e,t){var n="",r="";return t.addFilter&&(n+=t.addFilter),"false"!==t.sorting&&(n+="| orderBy:sortingArray"),t.dragColumns&&e.find("th").attr("allow-drag",""),"separate"===t.search?t.fields.split(",").forEach(function(e,t){n+="| filter:{'"+e.trim()+"':columnSearch['"+e+"']}"}):"undefined"!=typeof t.search&&"true"!==t.search||(n+="| filter:globalSearch"),r+=" | offset: currentPage:display |limitTo: display",e[0].querySelector("#rowTr").setAttribute("ng-repeat","item in $parent.$filtered = (data"+n+")"+r),e.find("paging").attr("count","$filtered.length"),function(e,t,i,a,o){e.addBtn?(e.addBtnShow=!0,e.addClick=function(){e.addBtn()}):e.addBtnShow=!1,a._init(),o(e,function(t,i){e.$owner=i.$parent;for(var o in t)if(t.hasOwnProperty(o))switch(t[o].tagName){case"THEAD":a._addHeaderPattern(t[o]);break;case"TBODY":e.findBody=!0,a._addRowPattern(t[o],n,r);break;case"TFOOT":a._addFooterPattern(t[o])}})}}}}]),angular.module("objectTable").directive("allowDrag",function(){return{restrict:"A",controller:function(){},compile:function(e,t){function n(e,t){var n=e[0].parentNode.querySelector("."+t);n&&n.classList.remove(t)}return function(e,t,r,i){t.attr("draggable",!0),t.bind("dragstart",function(e){i.target=this,this.classList.add("dragged");var t=e.originalEvent||e;t.dataTransfer.setData("text",i.target.cellIndex)}),t.bind("dragover",function(e){e.preventDefault()}),t.bind("dragenter",function(e){i.toTarget=this,this.classList.contains("draggedOver")||this.classList.contains("dragged")||this.classList.add("draggedOver"),e.preventDefault(),e.stopPropagation()}),t.bind("dragend",function(e){this.classList.contains("dragged")&&this.classList.remove("dragged"),e.preventDefault()}),t.bind("dragleave",function(e){this.classList.remove("draggedOver")}),t.bind("drop",function(e){var r=i.toTarget.cellIndex,a=e.originalEvent||e,o=parseInt(a.dataTransfer.getData("text"),10);n(t,"dragged"),n(t,"draggedOver"),t.parent().controller("objectTable").changeColumnsOrder(r,o),e.preventDefault()})}}}}),angular.module("objectTable").controller("objectTableCtrl",["$scope","$timeout","$element","$attrs","$http","$compile","$controller","objectTableUtilService",function(e,t,n,r,i,a,o,l){o("objectTableSortingCtrl",{$scope:e});var s=this;this._init=function(){e.headers=[],e.fields=[],e.display=e.display||5,e.paging=angular.isDefined(e.paging)?e.paging:!0,e.sortingType=e.sortingType||"simple",e.currentPage=0,e.customHeader=!1,"separate"==r.search?(e.search="separate",e.columnSearch=[]):e.search="undefined"==typeof r.search||"true"===r.search,e.headers=l.getArrayFromParams(r.headers,"headers"),e.fields=l.getArrayFromParams(r.fields,"fields"),r.fromUrl&&this._loadExternalData(r.fromUrl),e.onEdit&&(this.onEdit=e.onEdit),e.selectedModel="multiply"===e.select?[]:{}},this.onEdit=e.onEdit,this._loadExternalData=function(t){e.dataIsLoading=!0,i.get(t).then(function(t){e.data=t.data,e.dataIsLoading=!1})},this._addHeaderPattern=function(t){e.customHeader=!0,Array.prototype.forEach.call(t.querySelectorAll("[allow-drag]"),function(e,t){e.setAttribute("index",t)}),t.removeAttribute("ng-non-bindable"),n.find("table").prepend(t)},this._addFooterPattern=function(e){n.find("table").prepend(e)},this._addRowPattern=function(t,r,i){this._checkEditableContent(t),this._addRepeatToRow(t,r,i),t.removeAttribute("ng-non-bindable"),n.find("table").append(t.outerHTML),this.bodyTemplate=t.innerHTML,a(n.find("tbody"))(e)},this._addRepeatToRow=function(e,t,n){var r=angular.element(e).find("tr");r.attr("ng-repeat","item in $filtered = (data"+t+")"+n),r.attr("ng-click")||r.attr("ng-click","setSelected(item)"),r.attr("ng-class","{'selected-row':ifSelected(item)}")},this._checkEditableContent=function(e){var t,n=/\{\{:*:*(.*?)\}\}/g;Array.prototype.forEach.call(e.querySelectorAll("[editable]"),function(e){t=e.innerHTML.replace(n,"$1"),e.innerHTML="<div contentEditable ng-model='"+t+"'>{{"+t+"}}</div>"})},this.setCurrentPage=function(t){e.currentPage=t},e.setSelected=function(t){"multiply"===e.select?s._containsInSelectArray(t)?e.selectedModel.splice(e.selectedModel.indexOf(t),1):e.selectedModel.push(t):e.selectedModel=t},this._containsInSelectArray=function(t){return e.selectedModel.length?e.selectedModel.filter(function(e){return angular.equals(e,t)}).length>0:void 0},e.ifSelected=function(t){return e.selectedModel&&"multiply"===e.select?s._containsInSelectArray(t):t.$$hashKey==e.selectedModel.$$hashKey},this.changeColumnsOrder=function(t,r){e.$apply(function(){if(e.fields.swap(t,r),e.headers.swap(t,r),e.columnSearch&&e.columnSearch.swap(t,r),s.bodyTemplate){var i=angular.element(s.bodyTemplate).children(),o=document.createElement("tr"),l=document.createElement("tbody"),c=n.find("tbody").find("tr")[0].attributes;Array.prototype.swap.apply(i,[t,r]),[].forEach.call(c,function(e,t){o.setAttribute(e.name,e.value)});for(var u=0,d=i.length;d>u;u++)o.appendChild(i[u]);l.appendChild(o),n.find("tbody").replaceWith(l),s.bodyTemplate=l.innerHTML,a(n.find("tbody"))(e)}if(e.customHeader){var f=n.find("th"),o=document.createElement("tr"),p=document.createElement("thead");Array.prototype.swap.apply(f,[t,r]);for(var u=0,d=f.length;d>u;u++)o.appendChild(f[u]);p.appendChild(o),n.find("thead").replaceWith(p)}s.pageCtrl&&s.pageCtrl.setPage(0)})},e.setCurrentPageForPageCtrl=function(e){s.pageCtrl&&s.pageCtrl.setPage(e)}}]),angular.module("objectTable").filter("offset",function(){return function(e,t,n){if(e){t=parseInt(t,10),n=parseInt(n,10);var r=t*n;return e.slice(r,r+n)}}}),angular.module("objectTable").controller("pagingTableCtrl",["$scope","$element","$attrs",function(e,t,n){e.currentPage=0,e.prevPage=function(){e.currentPage>0&&e.currentPage--,e.setCurrentPageToTable()},e.nextPage=function(){e.currentPage<e.pageCount()&&e.currentPage++,e.setCurrentPageToTable()},e.setCurrentPageToTable=function(){e.objectTableCtrl.setCurrentPage(e.currentPage)},e.prevPageDisabled=function(){return 0===e.currentPage?"disabled":""},e.pageCount=function(){return e.count>0?Math.ceil(e.count/e.display)-1:0},e.nextPageDisabled=function(){return e.currentPage===e.pageCount()?"disabled":""},e.setPage=function(t){e.currentPage=t,e.setCurrentPageToTable()},e.range=function(){var t=e.pageCount()+1<5?e.pageCount()+1:5,n=[],r=e.currentPage;r>e.pageCount()-t&&(r=e.pageCount()-t+1);for(var i=r;r+t>i;i++)n.push(i);return n}}]),angular.module("objectTable").controller("objectTableSortingCtrl",["$scope",function(e){function t(e){a&&(n.width=i+(e.pageX-r))}e.sort={fields:[],reverse:[]},e.sortingArray=[],e.sortBy=function(t){if(o)return void(o=!1);if(e.data.length){var n=e.headers[e.fields.indexOf(t)];"compound"==e.sortingType?-1==e.sort.fields.indexOf(n)?(e.sort.fields.push(n),e.sortingArray.push(t),e.sort.reverse.push(!1)):e.changeReversing(t,e.sort.fields.indexOf(n)):"simple"==e.sortingType&&(e.sort.fields=[n],e.changeReversing(t))}},e.changeReversing=function(t,n){"compound"==e.sortingType?(e.sort.reverse[n]=!e.sort.reverse[n],e.sortingArray[n]=e.sort.reverse[n]?"-"+t:t):"simple"==e.sortingType&&(e.sort.reverse[0]=!e.sort.reverse[0],e.sortingArray=e.sort.reverse[0]?[t]:["-"+t])},e.headerIsSortedClass=function(t){if(e.sortingArray.length)if("simple"==e.sortingType){if(t==e.sort.fields[0]||"-"+t==e.sort.fields[0])return e.sort.reverse[0]?"table-sort-down":"table-sort-up"}else if("compound"==e.sortingType){var n=e.sort.fields.indexOf(t);if(-1!=n)return e.sort.reverse[n]?"table-sort-down":"table-sort-up"}},e.removeSorting=function(){var t=e.sort.fields.indexOf(this.sortField);t>-1&&(e.sort.fields.splice(t,1),e.sort.reverse.splice(t,1),e.sortingArray.splice(t,1)),t=null};var n,r,i,a=!1,o=!1;e.resizeStart=function(e){var o=e.target?e.target:e.srcElement;o.classList.contains("resize")&&(n=o.parentNode,a=!0,r=e.pageX,i=o.parentNode.offsetWidth,document.addEventListener("mousemove",t),e.stopPropagation(),e.preventDefault())},e.resizeEnd=function(e){a&&(document.removeEventListener("mousemove",t),e.stopPropagation(),e.preventDefault(),a=!1,o=!0)}}]),angular.module("objectTable").service("objectTableUtilService",[function(){return Array.prototype.swap=function(e,t){if(e>=this.length)for(var n=e-this.length;n--+1;)this.push(void 0);return this.splice(e,0,this.splice(t,1)[0]),this},{getArrayFromParams:function(e,t){if(!e)throw"Required '"+t+"' attribute is not found!";for(var n=[],r=e.split(","),i=0,a=r.length;a>i;i++)n.push(r[i].trim());return n}}}]),angular.module("objectTable").directive("paging",["$compile","$interpolate",function(e,t){return{restrict:"E",replace:!0,templateUrl:"/src/templates/paging.html",controller:"pagingTableCtrl",require:"^objectTable",scope:{count:"=",display:"="},link:function(e,t,n,r){e.objectTableCtrl=r,e.objectTableCtrl.pageCtrl=e}}}]),angular.module("objectTable").run(["$templateCache",function(e){e.put("/src/templates/common.html",'<div class="object-table-module"><!--搜索框--><div class="form-group col-xs-12 col-sm-6 col-md-4" ng-if="search && \'separate\'!=search"><input type="text" placeholder="搜索内容" ng-model="$parent.globalSearch" class="row form-control search" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="setCurrentPageForPageCtrl(0)"></div><div class="col-xs-12 col-sm-6 col-md-8" ng-if="addBtnShow"><button ng-click="addClick()" class="row btn btn-primary pull-right"><i class="glyphicon glyphicon-plus"></i>&nbsp;新建</button></div><div class="col-xs-12 col-sm-6 col-md-8 sorting-container"><div ng-if="sortingType && sort.fields.length">Sorting:<div ng-repeat="sortField in sort.fields" class="sorting-badge"><span class="glyphicon" ng-class="{\'glyphicon-chevron-down\':sort.reverse[$index], \'glyphicon-chevron-up\':!sort.reverse[$index]}"></span> {{::sortField}} <span class="glyphicon glyphicon-remove close" ng-click="removeSorting()"></span></div></div></div><div class="back-cover"><table class="table table-responsive table-bordered object-table" ng-mousedown="resizeStart($event)" ng-mouseup="resizeEnd($event)"><thead ng-if="!customHeader"><tr><th ng-repeat="head in headers track by $index" ng-click="sortBy(fields[$index])" ng-class="headerIsSortedClass(head)" class="sortable">{{head}}<div ng-if="resize" class="resize"></div></th></tr></thead><thead ng-if="!customHeader&& \'separate\'===search"><tr><th ng-repeat="head in headers track by $index" class="separate"><i class="glyphicon glyphicon-search search_icon separate"></i> <input type="text" ng-model="columnSearch[fields[$index]]" placeholder="{{head}}..." class="form-control search separate" ng-model-options="{ updateOn: \'default blur\', debounce: { \'default\': 500, \'blur\': 0 } }" ng-change="setCurrentPageForPageCtrl(0)"></th></tr></thead><tbody ng-if="!findBody"><tr id="rowTr" ng-click="setSelected(item)" ng-class="{\'selected-row\':ifSelected(item)}"><!-- <= will inject ng-repeat --><!-- params: headers and fields --><td ng-if="!editable" ng-repeat="field in fields">{{item[field]}}</td><td ng-if="editable" editable ng-repeat="field in fields"><div contenteditable ng-model="item[field]">{{item[field]}}</div></td></tr></tbody></table></div><div class="loading" ng-show="dataIsLoading"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading Data...</div><paging ng-if="paging" data-display="display" count="$filtered.length" class="row" ng-hide="dataIsLoading"></paging><div class="clearfix"></div></div>'),e.put("/src/templates/paging.html",'<div><div class="col-xs-12 text-center"><nav ng-hide="pageCount()==0"><ul class="pagination"><li ng-class="prevPageDisabled()"><a href ng-click="prevPage()">上一页</a></li><li ng-repeat="n in range()" ng-class="{active: n == currentPage}" ng-click="setPage(n)"><a href="javascript:void(0)">{{::n+1}}</a></li><li ng-class="nextPageDisabled()"><a href ng-click="nextPage()">下一页</a></li></ul></nav></div><!--<div class="col-xs-3">--><!--<span class="label count">{{count}} <span>条</span></span>--><!--</div>--></div>')}]),function(){angular.module("template/treeGrid/treeGrid.html",[]).run(["$templateCache",function(e){e.put("template/treeGrid/treeGrid.html",'<div class="table-responsive">\n <table class="table tree-grid">\n   <thead>\n     <tr>\n       <th><a abc=\'dddd\' ng-if="expandingProperty.sortable" ng-click="sortBy(expandingProperty)">{{expandingProperty.displayName || expandingProperty.field || expandingProperty}}</a><span ng-if="!expandingProperty.sortable">{{expandingProperty.displayName || expandingProperty.field || expandingProperty}}</span><i ng-if="expandingProperty.sorted" class="{{expandingProperty.sortingIcon}} pull-right"></i></th>\n       <th ng-repeat="col in colDefinitions"><a ng-if="col.sortable" ng-click="sortBy(col)">{{col.displayName || col.field}}</a><span ng-if="!col.sortable">{{col.displayName || col.field}}</span><i ng-if="col.sorted" class="{{col.sortingIcon}} pull-right"></i></th>\n     </tr>\n   </thead>\n   <tbody>\n     <tr ng-repeat="row in tree_rows | searchFor:$parent.filterString:expandingProperty:colDefinitions track by row.branch.uid"\n       ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\')" class="tree-grid-row">\n       <td><a ng-click="user_clicks_branch(row.branch)">           <i ng-class="row.tree_icon"\n              ng-click="row.branch.expanded = !row.branch.expanded"\n              class="indented tree-icon"></i>           </a><span class="indented tree-label" ng-click="on_user_click(row.branch)">\n             {{row.branch[expandingProperty.field] || row.branch[expandingProperty]}}</span>\n       </td>\n       <td ng-repeat="col in colDefinitions">\n         <div ng-if="col.cellTemplate" compile="col.cellTemplate" cell-template-scope="col.cellTemplateScope"></div>\n         <div ng-if="!col.cellTemplate">{{row.branch[col.field]}}</div>\n       </td>\n     </tr>\n   </tbody>\n </table>\n</div>\n')}]),angular.module("treeGrid",["template/treeGrid/treeGrid.html"]).directive("compile",["$compile",function(e){return{restrict:"A",link:function(t,n,r){t.cellTemplateScope=t.$eval(r.cellTemplateScope),t.$watch(r.compile,function(r){var i=e(r),a=i(t);n.append(a)})}}}]).directive("treeGrid",["$timeout","treegridTemplate",function(e,t){return{restrict:"E",templateUrl:function(e,n){return n.templateUrl||t.getPath()},replace:!0,scope:{treeData:"=",colDefs:"=",expandOn:"=",onSelect:"&",onClick:"&",initialSelection:"@",treeControl:"="},link:function(t,n,r){var i,a,o,l,s,c,u,d,f,p,g,h;if(i=function(e){console.log("ERROR:"+e)},r.iconExpand=r.iconExpand?r.iconExpand:"icon-plus  glyphicon glyphicon-plus  fa fa-plus",r.iconCollapse=r.iconCollapse?r.iconCollapse:"icon-minus glyphicon glyphicon-minus fa fa-minus",r.iconLeaf=r.iconLeaf?r.iconLeaf:"icon-file  glyphicon glyphicon-file  fa fa-file",r.sortedAsc=r.sortedAsc?r.sortedAsc:"icon-file  glyphicon glyphicon-chevron-up  fa angle-up",r.sortedDesc=r.sortedDesc?r.sortedDesc:"icon-file  glyphicon glyphicon-chevron-down  fa angle-down",r.expandLevel=r.expandLevel?r.expandLevel:"3",l=parseInt(r.expandLevel,10),!t.treeData)return void alert("No data was defined for the tree, please define treeData!");var m=function(){if(r.expandOn)a=t.expandOn,t.expandingProperty=t.expandOn;else if(t.treeData.length){for(var e=t.treeData[0],n=Object.keys(e),i=0,o=n.length;o>i;i++)if("string"==typeof e[n[i]]){a=n[i];break}a||(a=n[0]),t.expandingProperty=a}};if(m(),r.colDefs)t.colDefinitions=t.colDefs;else if(t.treeData.length){var v=[],b=t.treeData[0],y=["children","level","expanded",a];for(var $ in b)-1===y.indexOf($)&&v.push({field:$});t.colDefinitions=v}c=function(e){var n,r,i,a,o,l;for(n=function(t,r){var i,a,o,l,s;if(e(t,r),null!=t.children){for(l=t.children,s=[],a=0,o=l.length;o>a;a++)i=l[a],s.push(n(i,r+1));return s}},o=t.treeData,l=[],i=0,a=o.length;a>i;i++)r=o[i],l.push(n(r,1));return l},g=null,p=function(n){if(!n)return null!=g&&(g.selected=!1),void(g=null);if(n!==g){if(null!=g&&(g.selected=!1),n.selected=!0,g=n,o(n),null!=n.onSelect)return e(function(){return n.onSelect(n)});if(null!=t.onSelect)return e(function(){return t.onSelect({branch:n})})}},t.on_user_click=function(e){t.onClick&&t.onClick({branch:e})},t.user_clicks_branch=function(e){return e!==g?p(e):void 0},t.sortBy=function(e){"asc"===e.sortDirection?(w(t.treeData,e,!0),e.sortDirection="desc",e.sortingIcon=r.sortedDesc):(w(t.treeData,e,!1),e.sortDirection="asc",e.sortingIcon=r.sortedAsc),e.sorted=!0,_(e)};var w=function(e,t,n){e.sort(x(t,n));for(var r=0;r<e.length;r++)w(e[r].children,t,n)},x=function(e,t){var n=t?-1:1;if("custom"===e.sortingType&&"function"==typeof e.sortingFunc)return function(t,r){return e.sortingFunc(t,r)*n};var r=function(t){return null===t[e.field]?"":t[e.field].toLowerCase()};switch(e.sortingType){case"number":r=function(t){return parseFloat(t[e.field])};break;case"date":r=function(t){return new Date(t[e.field])}}return function(e,t){return e=r(e),t=r(t),n*((e>t)-(t>e))}},_=function(e){for(var n=t.colDefinitions.length,r=0;n>r;r++){var i=t.colDefinitions[r];i.field!=e.field&&(i.sorted=!1,i.sortDirection="none")}};return u=function(e){var t;return t=void 0,e.parent_uid&&c(function(n){return n.uid===e.parent_uid?t=n:void 0}),t},s=function(e,t){var n;return n=u(e),null!=n?(t(n),s(n,t)):void 0},o=function(e){return s(e,function(e){return e.expanded=!0})},t.tree_rows=[],f=function(){m();var e,n,i,o,l,s;for(c(function(e,t){return e.uid?void 0:e.uid=""+Math.random()}),c(function(e){var t,n,r,i,a;if(angular.isArray(e.children)){for(i=e.children,a=[],n=0,r=i.length;r>n;n++)t=i[n],a.push(t.parent_uid=e.uid);return a}}),t.tree_rows=[],c(function(e){var t,n;return e.children?e.children.length>0?(n=function(e){return"string"==typeof e?{label:e,children:[]}:e},e.children=function(){var r,i,a,o;for(a=e.children,o=[],r=0,i=a.length;i>r;r++)t=a[r],o.push(n(t));return o}()):void 0:e.children=[]}),e=function(n,i,o){var l,s,c,u,d,f,p;null==i.expanded&&(i.expanded=!1);var g=i.type;if("person"==g?i.children&&0!==i.children.length||(c="glyphicon glyphicon-user"):"department"==g&&(c=i.children&&0!==i.children.length?i.expanded?r.iconCollapse:r.iconExpand:r.iconLeaf),i.level=n,t.tree_rows.push({level:n,branch:i,label:i[a],tree_icon:c,visible:o}),null!=i.children){for(f=i.children,p=[],u=0,d=f.length;d>u;u++)l=f[u],s=o&&i.expanded,p.push(e(n+1,l,s));return p}},l=t.treeData,s=[],i=0,o=l.length;o>i;i++)n=l[i],s.push(e(1,n,!0));return s},t.$watch("treeData",f,!0),null!=r.initialSelection&&c(function(t){return t.label===r.initialSelection?e(function(){return p(t)}):void 0}),d=t.treeData.length,c(function(e,t){return e.level=t,e.expanded=e.level<l}),null!=t.treeControl&&angular.isObject(t.treeControl)?(h=t.treeControl,h.expand_all=function(){return c(function(e,t){return e.expanded=!0})},h.collapse_all=function(){return c(function(e,t){return e.expanded=!1})},h.get_first_branch=function(){return d=t.treeData.length,d>0?t.treeData[0]:void 0},h.select_first_branch=function(){var e;return e=h.get_first_branch(),h.select_branch(e)},h.get_selected_branch=function(){return g},h.get_parent_branch=function(e){return u(e)},h.select_branch=function(e){return p(e),e},h.get_children=function(e){return e.children},h.select_parent_branch=function(e){var t;return null==e&&(e=h.get_selected_branch()),null!=e&&(t=h.get_parent_branch(e),null!=t)?(h.select_branch(t),t):void 0},h.add_branch=function(e,n){return null!=e?(e.children.push(n),e.expanded=!0):t.treeData.push(n),n},h.add_root_branch=function(e){return h.add_branch(null,e),e},h.expand_branch=function(e){return null==e&&(e=h.get_selected_branch()),null!=e?(e.expanded=!0,e):void 0},h.collapse_branch=function(e){return null==e&&(e=g),null!=e?(e.expanded=!1,e):void 0},h.get_siblings=function(e){var n,r;return null==e&&(e=g),null!=e?(n=h.get_parent_branch(e),r=n?n.children:t.treeData):void 0},h.get_next_sibling=function(e){var t,n;return null==e&&(e=g),null!=e&&(n=h.get_siblings(e),d=n.length,t=n.indexOf(e),d>t)?n[t+1]:void 0},h.get_prev_sibling=function(e){var t,n;return null==e&&(e=g),n=h.get_siblings(e),d=n.length,t=n.indexOf(e),t>0?n[t-1]:void 0},h.select_next_sibling=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_next_sibling(e),null!=t)?h.select_branch(t):void 0},h.select_prev_sibling=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_prev_sibling(e),null!=t)?h.select_branch(t):void 0},h.get_first_child=function(e){var t;return null==e&&(e=g),null!=e&&(null!=(t=e.children)?t.length:void 0)>0?e.children[0]:void 0},h.get_closest_ancestor_next_sibling=function(e){var t,n;return t=h.get_next_sibling(e),null!=t?t:(n=h.get_parent_branch(e),h.get_closest_ancestor_next_sibling(n))},h.get_next_branch=function(e){var t;return null==e&&(e=g),null!=e?(t=h.get_first_child(e),null!=t?t:t=h.get_closest_ancestor_next_sibling(e)):void 0},h.select_next_branch=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_next_branch(e),null!=t)?(h.select_branch(t),t):void 0},h.last_descendant=function(e){var t;return d=e.children.length,0===d?e:(t=e.children[d-1],h.last_descendant(t))},h.get_prev_branch=function(e){var t,n;return null==e&&(e=g),null!=e?(n=h.get_prev_sibling(e),null!=n?h.last_descendant(n):t=h.get_parent_branch(e)):void 0},h.select_prev_branch=function(e){var t;return null==e&&(e=g),null!=e&&(t=h.get_prev_branch(e),null!=t)?(h.select_branch(t),t):void 0}):void 0}}}]).provider("treegridTemplate",function(){var e="template/treeGrid/treeGrid.html";this.setPath=function(t){e=t},this.$get=function(){return{getPath:function(){return e}}}}).filter("searchFor",function(){function e(e,n,r,i){var a=!1,o=!1;r.filterable&&(o=!0,t(e,n,r)&&(a=!0));for(var l=i.length,s=0;l>s;s++){var c=i[s];c.filterable&&(o=!0,t(e,n,c)&&(a=!0))}return o?a:!0}function t(e,t,n){if("number"===n.sortingType){if(null!=e.branch[n.field]&&parseFloat(e.branch[n.field])===parseFloat(t))return!0}else if(null!=e.branch[n.field]&&-1!==e.branch[n.field].toLowerCase().indexOf(t.toLowerCase()))return!0}return function(t,n,r,i){var a=[];if(!n||n.length<3)for(var o=0;o<t.length;o++){var l=t[o];l.visible&&a.push(l)}else for(var s=[],c=0,o=0;o<t.length;o++){for(var l=t[o];c>=l.level;)throwAway=s.pop(),c--;if(s.push(l),c=l.level,e(l,n,r,i)){for(var u=0;u<s.length;u++)ancestor=s[u],ancestor.visible&&a.push(ancestor);s=[]}}return a}})}.call(window);var lhFactory=function(){var e=["$http",function(e){var t={get:function(t){e({ignoreLoadingBar:!0,method:"get",url:t.url,params:t.data}).success(function(e,n,r,i){t.success(e,n,r,i)}).error(t.error)},post:function(t){e({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"post",url:t.url,params:t.params,data:jQuery.param(t.data)}).success(function(e,n,r,i){t.success(e,n,r,i)}).error(t.error)}};return t}],t=["$http","cfpLoadingBar","ngNotify",function(e,t,n){var r={get:function(r){t.start(),e({ignoreLoadingBar:!0,method:"get",url:r.url,params:r.data}).success(function(e,i,a,o){t.complete();var l=r.infoSuccess?r.infoSuccess:"成功",s=r.infoError?r.infoError:"数据格式错误";1==e.status?(r.infoSuccess&&n.set(l,{position:"top",duration:1500,type:"success"}),r.success(e,i,a,o)):n.set(s,{position:"top",duration:1500,type:"warn"})}).error(function(e){alert("服务器错误"),console.log(e)})},post:function(r){t.start(),e({headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"post",url:r.url,params:r.params,data:jQuery.param(r.data)}).success(function(e,i,a,o){t.complete();var l=r.infoSuccess?r.infoSuccess:"成功",s=r.infoError?r.infoError:"失败";1==e.status?(r.infoSuccess&&n.set(l,{position:"top",duration:1500,type:"success"}),r.success(e,i,a,o)):r.infoError&&n.set(s,{position:"top",duration:1500,type:"warn"})}).error(function(e){alert("服务器错误"),console.log(e)})}};return r}];return{http:e,ajax:t}}(),lhFilter=function(){var e=[function(){return function(e,t){return t=+t,e?e.slice(t):void 0}}],t=[function(){return function(e,t){return"Y"==e&&(t="启用"),"N"==e&&(t="禁用"),t}}],n=[function(){return function(e,t){return"Y"==e&&(t="在线"),"N"==e&&(t="离线"),t}}],r=[function(){return function(e,t){var n=[];if(angular.isArray(e)){var r=Object.keys(t);e.forEach(function(e){for(var i=!1,a=0;a<r.length;a++){var o=r[a],l=t[o].toLowerCase();if(-1!==e[o].toString().toLowerCase().indexOf(l)){i=!0;break}}i&&n.push(e)})}else n=e;return n}}];return{uiSelectPropsFilter:r,YNtoHanzi:t,YNtoZaixian:n,pageStart:e}}();